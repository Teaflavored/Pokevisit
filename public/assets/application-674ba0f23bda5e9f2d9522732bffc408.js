!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=se.type(t);return"function"===i||se.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(se.isFunction(e))return se.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return se.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(de.test(e))return se.filter(e,t,i);e=se.filter(e,t)}return se.grep(t,function(t){return se.inArray(t,e)>=0!==i})}function s(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function r(t){var e=we[t]={};return se.each(t.match(be)||[],function(t,i){e[i]=!0}),e}function o(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(fe.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(o(),se.ready())}function c(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(Ce,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ke.test(i)?se.parseJSON(i):i}catch(s){}se.data(t,e,i)}else i=void 0}return i}function l(t){var e;for(e in t)if(("data"!==e||!se.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,i,n){if(se.acceptData(t)){var s,r,o=se.expando,a=t.nodeType,c=a?se.cache:t,l=a?t[o]:t[o]&&o;if(l&&c[l]&&(n||c[l].data)||void 0!==i||"string"!=typeof e)return l||(l=a?t[o]=V.pop()||se.guid++:o),c[l]||(c[l]=a?{}:{toJSON:se.noop}),("object"==typeof e||"function"==typeof e)&&(n?c[l]=se.extend(c[l],e):c[l].data=se.extend(c[l].data,e)),r=c[l],n||(r.data||(r.data={}),r=r.data),void 0!==i&&(r[se.camelCase(e)]=i),"string"==typeof e?(s=r[e],null==s&&(s=r[se.camelCase(e)])):s=r,s}}function u(t,e,i){if(se.acceptData(t)){var n,s,r=t.nodeType,o=r?se.cache:t,a=r?t[se.expando]:se.expando;if(o[a]){if(e&&(n=i?o[a]:o[a].data)){se.isArray(e)?e=e.concat(se.map(e,se.camelCase)):e in n?e=[e]:(e=se.camelCase(e),e=e in n?[e]:e.split(" ")),s=e.length;for(;s--;)delete n[e[s]];if(i?!l(n):!se.isEmptyObject(n))return}(i||(delete o[a].data,l(o[a])))&&(r?se.cleanData([t],!0):ie.deleteExpando||o!=o.window?delete o[a]:o[a]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return fe.activeElement}catch(t){}}function g(t){var e=Oe.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function m(t,e){var i,n,s=0,r=typeof t.getElementsByTagName!==Se?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Se?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],i=t.childNodes||t;null!=(n=i[s]);s++)!e||se.nodeName(n,e)?r.push(n):se.merge(r,m(n,e));return void 0===e||e&&se.nodeName(t,e)?se.merge([t],r):r}function v(t){De.test(t.type)&&(t.defaultChecked=t.checked)}function y(t,e){return se.nodeName(t,"table")&&se.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function b(t){return t.type=(null!==se.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=qe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function x(t,e){for(var i,n=0;null!=(i=t[n]);n++)se._data(i,"globalEval",!e||se._data(e[n],"globalEval"))}function _(t,e){if(1===e.nodeType&&se.hasData(t)){var i,n,s,r=se._data(t),o=se._data(e,r),a=r.events;if(a){delete o.handle,o.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)se.event.add(e,i,a[i][n])}o.data&&(o.data=se.extend({},o.data))}}function S(t,e){var i,n,s;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ie.noCloneEvent&&e[se.expando]){s=se._data(e);for(n in s.events)se.removeEvent(e,n,s.handle);e.removeAttribute(se.expando)}"script"===i&&e.text!==t.text?(b(e).text=t.text,w(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ie.html5Clone&&t.innerHTML&&!se.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&De.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function k(e,i){var n,s=se(i.createElement(e)).appendTo(i.body),r=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:se.css(s[0],"display");return s.detach(),r}function C(t){var e=fe,i=Ze[t];return i||(i=k(t,e),"none"!==i&&i||(Qe=(Qe||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Qe[0].contentWindow||Qe[0].contentDocument).document,e.write(),e.close(),i=k(t,e),Qe.detach()),Ze[t]=i),i}function T(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function K(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,s=di.length;s--;)if(e=di[s]+i,e in t)return e;return n}function P(t,e){for(var i,n,s,r=[],o=0,a=t.length;a>o;o++)n=t[o],n.style&&(r[o]=se._data(n,"olddisplay"),i=n.style.display,e?(r[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Pe(n)&&(r[o]=se._data(n,"olddisplay",C(n.nodeName)))):(s=Pe(n),(i&&"none"!==i||!s)&&se._data(n,"olddisplay",s?i:se.css(n,"display"))));for(o=0;a>o;o++)n=t[o],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[o]||"":"none"));return t}function E(t,e,i){var n=ci.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function D(t,e,i,n,s){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,o=0;4>r;r+=2)"margin"===i&&(o+=se.css(t,i+Ke[r],!0,s)),n?("content"===i&&(o-=se.css(t,"padding"+Ke[r],!0,s)),"margin"!==i&&(o-=se.css(t,"border"+Ke[r]+"Width",!0,s))):(o+=se.css(t,"padding"+Ke[r],!0,s),"padding"!==i&&(o+=se.css(t,"border"+Ke[r]+"Width",!0,s)));return o}function A(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,r=ti(t),o=ie.boxSizing&&"border-box"===se.css(t,"boxSizing",!1,r);if(0>=s||null==s){if(s=ei(t,e,r),(0>s||null==s)&&(s=t.style[e]),ni.test(s))return s;n=o&&(ie.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+D(t,e,i||(o?"border":"content"),n,r)+"px"}function F(t,e,i,n,s){return new F.prototype.init(t,e,i,n,s)}function I(){return setTimeout(function(){pi=void 0}),pi=se.now()}function $(t,e){var i,n={height:t},s=0;for(e=e?1:0;4>s;s+=2-e)i=Ke[s],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function L(t,e,i){for(var n,s=(bi[e]||[]).concat(bi["*"]),r=0,o=s.length;o>r;r++)if(n=s[r].call(i,e,t))return n}function O(t,e,i){var n,s,r,o,a,c,l,h,u=this,d={},p=t.style,f=t.nodeType&&Pe(t),g=se._data(t,"fxshow");i.queue||(a=se._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,c=a.empty.fire,a.empty.fire=function(){a.unqueued||c()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,se.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],l=se.css(t,"display"),h="none"===l?se._data(t,"olddisplay")||C(t.nodeName):l,"inline"===h&&"none"===se.css(t,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==C(t.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",ie.shrinkWrapBlocks()||u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],gi.exec(s)){if(delete e[n],r=r||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!g||void 0===g[n])continue;f=!0}d[n]=g&&g[n]||se.style(t,n)}else l=void 0;if(se.isEmptyObject(d))"inline"===("none"===l?C(t.nodeName):l)&&(p.display=l);else{g?"hidden"in g&&(f=g.hidden):g=se._data(t,"fxshow",{}),r&&(g.hidden=!f),f?se(t).show():u.done(function(){se(t).hide()}),u.done(function(){var e;se._removeData(t,"fxshow");for(e in d)se.style(t,e,d[e])});for(n in d)o=L(f?g[n]:0,n,u),n in g||(g[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function N(t,e){var i,n,s,r,o;for(i in t)if(n=se.camelCase(i),s=e[n],r=t[i],se.isArray(r)&&(s=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),o=se.cssHooks[n],o&&"expand"in o){r=o.expand(r),delete t[n];for(i in r)i in t||(t[i]=r[i],e[i]=s)}else e[n]=s}function M(t,e,i){var n,s,r=0,o=yi.length,a=se.Deferred().always(function(){delete c.elem}),c=function(){if(s)return!1;for(var e=pi||I(),i=Math.max(0,l.startTime+l.duration-e),n=i/l.duration||0,r=1-n,o=0,c=l.tweens.length;c>o;o++)l.tweens[o].run(r);return a.notifyWith(t,[l,r,i]),1>r&&c?i:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:se.extend({},e),opts:se.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:pi||I(),duration:i.duration,tweens:[],createTween:function(e,i){var n=se.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)l.tweens[i].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),h=l.props;for(N(h,l.opts.specialEasing);o>r;r++)if(n=yi[r].call(l,t,h,l.opts))return n;return se.map(h,L,l),se.isFunction(l.opts.start)&&l.opts.start.call(t,l),se.fx.timer(se.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function R(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,r=e.toLowerCase().match(be)||[];if(se.isFunction(i))for(;n=r[s++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function j(t,e,i,n){function s(a){var c;return r[a]=!0,se.each(t[a]||[],function(t,a){var l=a(e,i,n);return"string"!=typeof l||o||r[l]?o?!(c=l):void 0:(e.dataTypes.unshift(l),s(l),!1)}),c}var r={},o=t===zi;return s(e.dataTypes[0])||!r["*"]&&s("*")}function H(t,e){var i,n,s=se.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&se.extend(!0,t,i),t}function B(t,e,i){for(var n,s,r,o,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(o in a)if(a[o]&&a[o].test(s)){c.unshift(o);break}if(c[0]in i)r=c[0];else{for(o in i){if(!c[0]||t.converters[o+" "+c[0]]){r=o;break}n||(n=o)}r=r||n}return r?(r!==c[0]&&c.unshift(r),i[r]):void 0}function z(t,e,i,n){var s,r,o,a,c,l={},h=t.dataTypes.slice();if(h[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(r=h.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!c&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=r,r=h.shift())if("*"===r)r=c;else if("*"!==c&&c!==r){if(o=l[c+" "+r]||l["* "+r],!o)for(s in l)if(a=s.split(" "),a[1]===r&&(o=l[c+" "+a[0]]||l["* "+a[0]])){o===!0?o=l[s]:l[s]!==!0&&(r=a[0],h.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+c+" to "+r}}}return{state:"success",data:e}}function U(t,e,i,n){var s;if(se.isArray(e))se.each(e,function(e,s){i||qi.test(t)?n(t,s):U(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==se.type(e))n(t,e);else for(s in e)U(t+"["+s+"]",e[s],i,n)}function W(){try{return new t.XMLHttpRequest}catch(e){}}function G(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function q(t){return se.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var V=[],J=V.slice,Y=V.concat,X=V.push,Q=V.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ie={},ne="1.11.1",se=function(t,e){return new se.fn.init(t,e)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oe=/^-ms-/,ae=/-([\da-z])/gi,ce=function(t,e){return e.toUpperCase()};se.fn=se.prototype={jquery:ne,constructor:se,selector:"",length:0,toArray:function(){return J.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:J.call(this)},pushStack:function(t){var e=se.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return se.each(this,t,e)},map:function(t){return this.pushStack(se.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:V.sort,splice:V.splice},se.extend=se.fn.extend=function(){var t,e,i,n,s,r,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||se.isFunction(o)||(o={}),a===c&&(o=this,a--);c>a;a++)if(null!=(s=arguments[a]))for(n in s)t=o[n],i=s[n],o!==i&&(l&&i&&(se.isPlainObject(i)||(e=se.isArray(i)))?(e?(e=!1,r=t&&se.isArray(t)?t:[]):r=t&&se.isPlainObject(t)?t:{},o[n]=se.extend(l,r,i)):void 0!==i&&(o[n]=i));return o},se.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===se.type(t)},isArray:Array.isArray||function(t){return"array"===se.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!se.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==se.type(t)||t.nodeType||se.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ie.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&se.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(oe,"ms-").replace(ae,ce)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,r=0,o=t.length,a=i(t);if(n){if(a)for(;o>r&&(s=e.apply(t[r],n),s!==!1);r++);else for(r in t)if(s=e.apply(t[r],n),s===!1)break}else if(a)for(;o>r&&(s=e.call(t[r],r,t[r]),s!==!1);r++);else for(r in t)if(s=e.call(t[r],r,t[r]),s===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(re,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?se.merge(n,"string"==typeof t?[t]:t):X.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(Q)return Q.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;)t[s++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[s++]=e[n++];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],r=0,o=t.length,a=!i;o>r;r++)n=!e(t[r],r),n!==a&&s.push(t[r]);return s},map:function(t,e,n){var s,r=0,o=t.length,a=i(t),c=[];if(a)for(;o>r;r++)s=e(t[r],r,n),null!=s&&c.push(s);else for(r in t)s=e(t[r],r,n),null!=s&&c.push(s);return Y.apply([],c)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(s=t[e],e=t,t=s),se.isFunction(t)?(i=J.call(arguments,2),n=function(){return t.apply(e||this,i.concat(J.call(arguments)))},n.guid=t.guid=t.guid||se.guid++,n):void 0},now:function(){return+new Date},support:ie}),se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var le=function(t){function e(t,e,i,n){var s,r,o,a,c,l,u,p,f,g;if((e?e.ownerDocument||e:j)!==F&&A(e),e=e||F,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if($&&!n){if(s=ye.exec(t))if(o=s[1]){if(9===a){if(r=e.getElementById(o),!r||!r.parentNode)return i;if(r.id===o)return i.push(r),i}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(o))&&M(e,r)&&r.id===o)return i.push(r),i}else{if(s[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((o=s[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(o)),i}if(x.qsa&&(!L||!L.test(t))){if(p=u=R,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=C(t),(u=e.getAttribute("id"))?p=u.replace(we,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",c=l.length;c--;)l[c]=p+d(l[c]);f=be.test(t)&&h(e.parentNode)||e,g=l.join(",")}if(g)try{return Z.apply(i,f.querySelectorAll(g)),i}catch(m){}finally{u||e.removeAttribute("id")}}}return K(t.replace(ce,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>_.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[R]=!0,t}function s(t){var e=F.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var i=t.split("|"),n=t.length;n--;)_.attrHandle[i[n]]=e}function o(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||V)-(~t.sourceIndex||V);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function c(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(i,n){for(var s,r=t([],i.length,e),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))})})}function h(t){return t&&typeof t.getElementsByTagName!==q&&t}function u(){}function d(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,s=i&&"parentNode"===n,r=B++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r)}:function(e,i,o){var a,c,l=[H,r];if(o){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(c=e[R]||(e[R]={}),(a=c[n])&&a[0]===H&&a[1]===r)return l[2]=a[2];if(c[n]=l,l[2]=t(e,i,o))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function g(t,i,n){for(var s=0,r=i.length;r>s;s++)e(t,i[s],n);return n}function m(t,e,i,n,s){for(var r,o=[],a=0,c=t.length,l=null!=e;c>a;a++)(r=t[a])&&(!i||i(r,n,s))&&(o.push(r),l&&e.push(a));return o}function v(t,e,i,s,r,o){return s&&!s[R]&&(s=v(s)),r&&!r[R]&&(r=v(r,o)),n(function(n,o,a,c){var l,h,u,d=[],p=[],f=o.length,v=n||g(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?v:m(v,d,t,a,c),b=i?r||(n?t:f||s)?[]:o:y;if(i&&i(y,b,a,c),s)for(l=m(b,p),s(l,[],a,c),h=l.length;h--;)(u=l[h])&&(b[p[h]]=!(y[p[h]]=u));if(n){if(r||t){if(r){for(l=[],h=b.length;h--;)(u=b[h])&&l.push(y[h]=u);r(null,b=[],l,c)}for(h=b.length;h--;)(u=b[h])&&(l=r?ee.call(n,u):d[h])>-1&&(n[l]=!(o[l]=u))}}else b=m(b===o?b.splice(f,b.length):b),r?r(null,o,b,c):Z.apply(o,b)})}function y(t){for(var e,i,n,s=t.length,r=_.relative[t[0].type],o=r||_.relative[" "],a=r?1:0,c=p(function(t){return t===e},o,!0),l=p(function(t){return ee.call(e,t)>-1},o,!0),h=[function(t,i,n){return!r&&(n||i!==P)||((e=i).nodeType?c(t,i,n):l(t,i,n))}];s>a;a++)if(i=_.relative[t[a].type])h=[p(f(h),i)];else{if(i=_.filter[t[a].type].apply(null,t[a].matches),i[R]){for(n=++a;s>n&&!_.relative[t[n].type];n++);return v(a>1&&f(h),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ce,"$1"),i,n>a&&y(t.slice(a,n)),s>n&&y(t=t.slice(n)),s>n&&d(t))}h.push(i)}return f(h)}function b(t,i){var s=i.length>0,r=t.length>0,o=function(n,o,a,c,l){var h,u,d,p=0,f="0",g=n&&[],v=[],y=P,b=n||r&&_.find.TAG("*",l),w=H+=null==y?1:Math.random()||.1,x=b.length;for(l&&(P=o!==F&&o);f!==x&&null!=(h=b[f]);f++){if(r&&h){for(u=0;d=t[u++];)if(d(h,o,a)){c.push(h);break}l&&(H=w)}s&&((h=!d&&h)&&p--,n&&g.push(h))}if(p+=f,s&&f!==p){for(u=0;d=i[u++];)d(g,v,o,a);if(n){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=X.call(c));v=m(v)}Z.apply(c,v),l&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(c)}return l&&(H=w,P=y),g};return s?n(o):o}var w,x,_,S,k,C,T,K,P,E,D,A,F,I,$,L,O,N,M,R="sizzle"+-new Date,j=t.document,H=0,B=0,z=i(),U=i(),W=i(),G=function(t,e){return t===e&&(D=!0),0},q="undefined",V=1<<31,J={}.hasOwnProperty,Y=[],X=Y.pop,Q=Y.push,Z=Y.push,te=Y.slice,ee=Y.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=se.replace("w","w#"),oe="\\["+ne+"*("+se+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",ae=":("+se+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ce=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),he=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ue=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),pe=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+se+")"),CLASS:new RegExp("^\\.("+se+")"),TAG:new RegExp("^("+se.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(Y=te.call(j.childNodes),j.childNodes),Y[j.childNodes.length].nodeType}catch(Se){Z={apply:Y.length?function(t,e){Q.apply(t,te.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}x=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},A=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:j,n=i.defaultView;return i!==F&&9===i.nodeType&&i.documentElement?(F=i,I=i.documentElement,$=!k(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){A()},!1):n.attachEvent&&n.attachEvent("onunload",function(){A()})),x.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=s(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=ve.test(i.getElementsByClassName)&&s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=s(function(t){return I.appendChild(t).id=R,!i.getElementsByName||!i.getElementsByName(R).length}),x.getById?(_.find.ID=function(t,e){if(typeof e.getElementById!==q&&$){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},_.filter.ID=function(t){var e=t.replace(xe,_e);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(xe,_e);return function(t){var i=typeof t.getAttributeNode!==q&&t.getAttributeNode("id");return i&&i.value===e}}),_.find.TAG=x.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==q?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],s=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},_.find.CLASS=x.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==q&&$?e.getElementsByClassName(t):void 0},O=[],L=[],(x.qsa=ve.test(i.querySelectorAll))&&(s(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||L.push(":checked")}),s(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(x.matchesSelector=ve.test(N=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&s(function(t){x.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),O.push("!=",ae)}),L=L.length&&new RegExp(L.join("|")),O=O.length&&new RegExp(O.join("|")),e=ve.test(I.compareDocumentPosition),M=e||ve.test(I.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===j&&M(j,t)?-1:e===i||e.ownerDocument===j&&M(j,e)?1:E?ee.call(E,t)-ee.call(E,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,s=0,r=t.parentNode,a=e.parentNode,c=[t],l=[e];if(!r||!a)return t===i?-1:e===i?1:r?-1:a?1:E?ee.call(E,t)-ee.call(E,e):0;if(r===a)return o(t,e);for(n=t;n=n.parentNode;)c.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;c[s]===l[s];)s++;return s?o(c[s],l[s]):c[s]===j?-1:l[s]===j?1:0},i):F},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==F&&A(t),i=i.replace(ue,"='$1']"),!(!x.matchesSelector||!$||O&&O.test(i)||L&&L.test(i)))try{var n=N.call(t,i);if(n||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(i,F,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==F&&A(t),M(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==F&&A(t);var i=_.attrHandle[e.toLowerCase()],n=i&&J.call(_.attrHandle,e.toLowerCase())?i(t,e,!$):void 0;return void 0!==n?n:x.attributes||!$?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(D=!x.detectDuplicates,E=!x.sortStable&&t.slice(0),t.sort(G),D){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return E=null,t},S=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=S(e);return i},_=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xe,_e),t[3]=(t[3]||t[4]||t[5]||"").replace(xe,_e),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&de.test(i)&&(e=C(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xe,_e).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==q&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var r=e.attr(s,t);return null==r?"!="===i:i?(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r+" ").indexOf(n)>-1:"|="===i?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,s){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,c){var l,h,u,d,p,f,g=r!==o?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!c&&!a;if(m){if(r){for(;g;){for(u=e;u=u[g];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&y){for(h=m[R]||(m[R]={}),l=h[t]||[],p=l[0]===H&&l[1],d=l[0]===H&&l[2],u=p&&m.childNodes[p];u=++p&&u&&u[g]||(d=p=0)||f.pop();)if(1===u.nodeType&&++d&&u===e){h[t]=[H,p,d];break}}else if(y&&(l=(e[R]||(e[R]={}))[t])&&l[0]===H)d=l[1];else for(;(u=++p&&u&&u[g]||(d=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++d||(y&&((u[R]||(u[R]={}))[t]=[H,d]),u!==e)););return d-=s,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var s,r=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[R]?r(i):r.length>1?(s=[t,t,"",i],_.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=r(t,i),o=s.length;o--;)n=ee.call(t,s[o]),t[n]=!(e[n]=s[o])}):function(t){return r(t,0,s)}):r}},pseudos:{not:n(function(t){var e=[],i=[],s=T(t.replace(ce,"$1"));return s[R]?n(function(t,e,i,n){for(var r,o=s(t,null,n,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,s(e,null,r,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:n(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xe,_e).toLowerCase(),function(e){var i;do if(i=$?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[0>i?i+e:i]}),even:l(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:l(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},_.pseudos.nth=_.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})_.pseudos[w]=c(w);return u.prototype=_.filters=_.pseudos,_.setFilters=new u,C=e.tokenize=function(t,i){var n,s,r,o,a,c,l,h=U[t+" "];if(h)return i?0:h.slice(0);for(a=t,c=[],l=_.preFilter;a;){(!n||(s=le.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),c.push(r=[])),n=!1,(s=he.exec(a))&&(n=s.shift(),r.push({value:n,type:s[0].replace(ce," ")}),a=a.slice(n.length));for(o in _.filter)!(s=fe[o].exec(a))||l[o]&&!(s=l[o](s))||(n=s.shift(),r.push({value:n,type:o,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):U(t,c).slice(0)},T=e.compile=function(t,e){var i,n=[],s=[],r=W[t+" "];if(!r){for(e||(e=C(t)),i=e.length;i--;)r=y(e[i]),r[R]?n.push(r):s.push(r);r=W(t,b(s,n)),r.selector=t}return r},K=e.select=function(t,e,i,n){var s,r,o,a,c,l="function"==typeof t&&t,u=!n&&C(t=l.selector||t);if(i=i||[],1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(o=r[0]).type&&x.getById&&9===e.nodeType&&$&&_.relative[r[1].type]){if(e=(_.find.ID(o.matches[0].replace(xe,_e),e)||[])[0],!e)return i;l&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(s=fe.needsContext.test(t)?0:r.length;s--&&(o=r[s],!_.relative[a=o.type]);)if((c=_.find[a])&&(n=c(o.matches[0].replace(xe,_e),be.test(r[0].type)&&h(e.parentNode)||e))){if(r.splice(s,1),t=n.length&&d(r),!t)return Z.apply(i,n),i;
break}}return(l||T(t,u))(n,e,!$,i,be.test(t)&&h(e.parentNode)||e),i},x.sortStable=R.split("").sort(G).join("")===R,x.detectDuplicates=!!D,A(),x.sortDetached=s(function(t){return 1&t.compareDocumentPosition(F.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||r(ie,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);se.find=le,se.expr=le.selectors,se.expr[":"]=se.expr.pseudos,se.unique=le.uniqueSort,se.text=le.getText,se.isXMLDoc=le.isXML,se.contains=le.contains;var he=se.expr.match.needsContext,ue=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;se.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?se.find.matchesSelector(n,t)?[n]:[]:se.find.matches(t,se.grep(e,function(t){return 1===t.nodeType}))},se.fn.extend({find:function(t){var e,i=[],n=this,s=n.length;if("string"!=typeof t)return this.pushStack(se(t).filter(function(){for(e=0;s>e;e++)if(se.contains(n[e],this))return!0}));for(e=0;s>e;e++)se.find(t,n[e],i);return i=this.pushStack(s>1?se.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&he.test(t)?se(t):t||[],!1).length}});var pe,fe=t.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=se.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ge.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||pe).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof se?e[0]:e,se.merge(this,se.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:fe,!0)),ue.test(i[1])&&se.isPlainObject(e))for(i in e)se.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=fe.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pe.find(t);this.length=1,this[0]=n}return this.context=fe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):se.isFunction(t)?"undefined"!=typeof pe.ready?pe.ready(t):t(se):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),se.makeArray(t,this))};me.prototype=se.fn,pe=se(fe);var ve=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};se.extend({dir:function(t,e,i){for(var n=[],s=t[e];s&&9!==s.nodeType&&(void 0===i||1!==s.nodeType||!se(s).is(i));)1===s.nodeType&&n.push(s),s=s[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),se.fn.extend({has:function(t){var e,i=se(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(se.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,r=[],o=he.test(t)||"string"!=typeof t?se(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&se.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?se.unique(r):r)},index:function(t){return t?"string"==typeof t?se.inArray(this[0],se(t)):se.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(se.unique(se.merge(this.get(),se(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),se.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return se.dir(t,"parentNode")},parentsUntil:function(t,e,i){return se.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return se.dir(t,"nextSibling")},prevAll:function(t){return se.dir(t,"previousSibling")},nextUntil:function(t,e,i){return se.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return se.dir(t,"previousSibling",i)},siblings:function(t){return se.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return se.sibling(t.firstChild)},contents:function(t){return se.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:se.merge([],t.childNodes)}},function(t,e){se.fn[t]=function(i,n){var s=se.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=se.filter(n,s)),this.length>1&&(ye[t]||(s=se.unique(s)),ve.test(t)&&(s=s.reverse())),this.pushStack(s)}});var be=/\S+/g,we={};se.Callbacks=function(t){t="string"==typeof t?we[t]||r(t):se.extend({},t);var e,i,n,s,o,a,c=[],l=!t.once&&[],h=function(r){for(i=t.memory&&r,n=!0,o=a||0,a=0,s=c.length,e=!0;c&&s>o;o++)if(c[o].apply(r[0],r[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,c&&(l?l.length&&h(l.shift()):i?c=[]:u.disable())},u={add:function(){if(c){var n=c.length;!function r(e){se.each(e,function(e,i){var n=se.type(i);"function"===n?t.unique&&u.has(i)||c.push(i):i&&i.length&&"string"!==n&&r(i)})}(arguments),e?s=c.length:i&&(a=n,h(i))}return this},remove:function(){return c&&se.each(arguments,function(t,i){for(var n;(n=se.inArray(i,c,n))>-1;)c.splice(n,1),e&&(s>=n&&s--,o>=n&&o--)}),this},has:function(t){return t?se.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=l=i=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,i||u.disable(),this},locked:function(){return!l},fireWith:function(t,i){return!c||n&&!l||(i=i||[],i=[t,i.slice?i.slice():i],e?l.push(i):h(i)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},se.extend({Deferred:function(t){var e=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return se.Deferred(function(i){se.each(e,function(e,r){var o=se.isFunction(t[e])&&t[e];s[r[1]](function(){var t=o&&o.apply(this,arguments);t&&se.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r[0]+"With"](this===n?i.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?se.extend(t,n):n}},s={};return n.pipe=n.then,se.each(e,function(t,r){var o=r[2],a=r[3];n[r[1]]=o.add,a&&o.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?n:this,arguments),this},s[r[0]+"With"]=o.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,r=J.call(arguments),o=r.length,a=1!==o||t&&se.isFunction(t.promise)?o:0,c=1===a?t:se.Deferred(),l=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?J.call(arguments):s,n===e?c.notifyWith(i,n):--a||c.resolveWith(i,n)}};if(o>1)for(e=new Array(o),i=new Array(o),n=new Array(o);o>s;s++)r[s]&&se.isFunction(r[s].promise)?r[s].promise().done(l(s,n,r)).fail(c.reject).progress(l(s,i,e)):--a;return a||c.resolveWith(n,r),c.promise()}});var xe;se.fn.ready=function(t){return se.ready.promise().done(t),this},se.extend({isReady:!1,readyWait:1,holdReady:function(t){t?se.readyWait++:se.ready(!0)},ready:function(t){if(t===!0?!--se.readyWait:!se.isReady){if(!fe.body)return setTimeout(se.ready);se.isReady=!0,t!==!0&&--se.readyWait>0||(xe.resolveWith(fe,[se]),se.fn.triggerHandler&&(se(fe).triggerHandler("ready"),se(fe).off("ready")))}}}),se.ready.promise=function(e){if(!xe)if(xe=se.Deferred(),"complete"===fe.readyState)setTimeout(se.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{fe.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&fe.documentElement}catch(n){}i&&i.doScroll&&!function s(){if(!se.isReady){try{i.doScroll("left")}catch(t){return setTimeout(s,50)}o(),se.ready()}}()}return xe.promise(e)};var _e,Se="undefined";for(_e in se(ie))break;ie.ownLast="0"!==_e,ie.inlineBlockNeedsLayout=!1,se(function(){var t,e,i,n;i=fe.getElementsByTagName("body")[0],i&&i.style&&(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==Se&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ie.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=fe.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(e){ie.deleteExpando=!1}}t=null}(),se.acceptData=function(t){var e=se.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return 1!==i&&9!==i?!1:!e||e!==!0&&t.getAttribute("classid")===e};var ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ce=/([A-Z])/g;se.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?se.cache[t[se.expando]]:t[se.expando],!!t&&!l(t)},data:function(t,e,i){return h(t,e,i)},removeData:function(t,e){return u(t,e)},_data:function(t,e,i){return h(t,e,i,!0)},_removeData:function(t,e){return u(t,e,!0)}}),se.fn.extend({data:function(t,e){var i,n,s,r=this[0],o=r&&r.attributes;if(void 0===t){if(this.length&&(s=se.data(r),1===r.nodeType&&!se._data(r,"parsedAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=se.camelCase(n.slice(5)),c(r,n,s[n])));se._data(r,"parsedAttrs",!0)}return s}return"object"==typeof t?this.each(function(){se.data(this,t)}):arguments.length>1?this.each(function(){se.data(this,t,e)}):r?c(r,t,se.data(r,t)):void 0},removeData:function(t){return this.each(function(){se.removeData(this,t)})}}),se.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=se._data(t,e),i&&(!n||se.isArray(i)?n=se._data(t,e,se.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=se.queue(t,e),n=i.length,s=i.shift(),r=se._queueHooks(t,e),o=function(){se.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete r.stop,s.call(t,o,r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return se._data(t,i)||se._data(t,i,{empty:se.Callbacks("once memory").add(function(){se._removeData(t,e+"queue"),se._removeData(t,i)})})}}),se.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?se.queue(this[0],t):void 0===e?this:this.each(function(){var i=se.queue(this,t,e);se._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&se.dequeue(this,t)})},dequeue:function(t){return this.each(function(){se.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=se.Deferred(),r=this,o=this.length,a=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)i=se._data(r[o],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var Te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ke=["Top","Right","Bottom","Left"],Pe=function(t,e){return t=e||t,"none"===se.css(t,"display")||!se.contains(t.ownerDocument,t)},Ee=se.access=function(t,e,i,n,s,r,o){var a=0,c=t.length,l=null==i;if("object"===se.type(i)){s=!0;for(a in i)se.access(t,e,a,i[a],!0,r,o)}else if(void 0!==n&&(s=!0,se.isFunction(n)||(o=!0),l&&(o?(e.call(t,n),e=null):(l=e,e=function(t,e,i){return l.call(se(t),i)})),e))for(;c>a;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return s?t:l?e.call(t):c?e(t[0],i):r},De=/^(?:checkbox|radio)$/i;!function(){var t=fe.createElement("input"),e=fe.createElement("div"),i=fe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie.leadingWhitespace=3===e.firstChild.nodeType,ie.tbody=!e.getElementsByTagName("tbody").length,ie.htmlSerialize=!!e.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),ie.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ie.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(n){ie.deleteExpando=!1}}}(),function(){var e,i,n=fe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(ie[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),ie[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Ae=/^(?:input|select|textarea)$/i,Fe=/^key/,Ie=/^(?:mouse|pointer|contextmenu)|click/,$e=/^(?:focusinfocus|focusoutblur)$/,Le=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(t,e,i,n,s){var r,o,a,c,l,h,u,d,p,f,g,m=se._data(t);if(m){for(i.handler&&(c=i,i=c.handler,s=c.selector),i.guid||(i.guid=se.guid++),(o=m.events)||(o=m.events={}),(h=m.handle)||(h=m.handle=function(t){return typeof se===Se||t&&se.event.triggered===t.type?void 0:se.event.dispatch.apply(h.elem,arguments)},h.elem=t),e=(e||"").match(be)||[""],a=e.length;a--;)r=Le.exec(e[a])||[],p=g=r[1],f=(r[2]||"").split(".").sort(),p&&(l=se.event.special[p]||{},p=(s?l.delegateType:l.bindType)||p,l=se.event.special[p]||{},u=se.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&se.expr.match.needsContext.test(s),namespace:f.join(".")},c),(d=o[p])||(d=o[p]=[],d.delegateCount=0,l.setup&&l.setup.call(t,n,f,h)!==!1||(t.addEventListener?t.addEventListener(p,h,!1):t.attachEvent&&t.attachEvent("on"+p,h))),l.add&&(l.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),se.event.global[p]=!0);t=null}},remove:function(t,e,i,n,s){var r,o,a,c,l,h,u,d,p,f,g,m=se.hasData(t)&&se._data(t);if(m&&(h=m.events)){for(e=(e||"").match(be)||[""],l=e.length;l--;)if(a=Le.exec(e[l])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(u=se.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,d=h[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=r=d.length;r--;)o=d[r],!s&&g!==o.origType||i&&i.guid!==o.guid||a&&!a.test(o.namespace)||n&&n!==o.selector&&("**"!==n||!o.selector)||(d.splice(r,1),o.selector&&d.delegateCount--,u.remove&&u.remove.call(t,o));c&&!d.length&&(u.teardown&&u.teardown.call(t,f,m.handle)!==!1||se.removeEvent(t,p,m.handle),delete h[p])}else for(p in h)se.event.remove(t,p+e[l],i,n,!0);se.isEmptyObject(h)&&(delete m.handle,se._removeData(t,"events"))}},trigger:function(e,i,n,s){var r,o,a,c,l,h,u,d=[n||fe],p=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=h=n=n||fe,3!==n.nodeType&&8!==n.nodeType&&!$e.test(p+se.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),o=p.indexOf(":")<0&&"on"+p,e=e[se.expando]?e:new se.Event(p,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:se.makeArray(i,[e]),l=se.event.special[p]||{},s||!l.trigger||l.trigger.apply(n,i)!==!1)){if(!s&&!l.noBubble&&!se.isWindow(n)){for(c=l.delegateType||p,$e.test(c+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),h=a;h===(n.ownerDocument||fe)&&d.push(h.defaultView||h.parentWindow||t)}for(u=0;(a=d[u++])&&!e.isPropagationStopped();)e.type=u>1?c:l.bindType||p,r=(se._data(a,"events")||{})[e.type]&&se._data(a,"handle"),r&&r.apply(a,i),r=o&&a[o],r&&r.apply&&se.acceptData(a)&&(e.result=r.apply(a,i),e.result===!1&&e.preventDefault());if(e.type=p,!s&&!e.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),i)===!1)&&se.acceptData(n)&&o&&n[p]&&!se.isWindow(n)){h=n[o],h&&(n[o]=null),se.event.triggered=p;try{n[p]()}catch(g){}se.event.triggered=void 0,h&&(n[o]=h)}return e.result}},dispatch:function(t){t=se.event.fix(t);var e,i,n,s,r,o=[],a=J.call(arguments),c=(se._data(this,"events")||{})[t.type]||[],l=se.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(o=se.event.handlers.call(this,t,c),e=0;(s=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,r=0;(n=s.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((se.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,r,o=[],a=e.delegateCount,c=t.target;if(a&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==t.type)){for(s=[],r=0;a>r;r++)n=e[r],i=n.selector+" ",void 0===s[i]&&(s[i]=n.needsContext?se(i,this).index(c)>=0:se.find(i,this,null,[c]).length),s[i]&&s.push(n);s.length&&o.push({elem:c,handlers:s})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},fix:function(t){if(t[se.expando])return t;var e,i,n,s=t.type,r=t,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=Ie.test(s)?this.mouseHooks:Fe.test(s)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new se.Event(r),e=n.length;e--;)i=n[e],t[i]=r[i];return t.target||(t.target=r.srcElement||fe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,o.filter?o.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,r=e.button,o=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||fe,s=n.documentElement,i=n.body,t.pageX=e.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&o&&(t.relatedTarget=o===t.target?e.toElement:o),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return se.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return se.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=se.extend(new se.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?se.event.trigger(s,null,e):se.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},se.removeEvent=fe.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===Se&&(t[n]=null),t.detachEvent(n,i))},se.Event=function(t,e){return this instanceof se.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&se.extend(this,e),this.timeStamp=t&&t.timeStamp||se.now(),void(this[se.expando]=!0)):new se.Event(t,e)},se.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){se.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,r=t.handleObj;return(!s||s!==n&&!se.contains(n,s))&&(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),ie.submitBubbles||(se.event.special.submit={setup:function(){return se.nodeName(this,"form")?!1:void se.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=se.nodeName(e,"input")||se.nodeName(e,"button")?e.form:void 0;i&&!se._data(i,"submitBubbles")&&(se.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),se._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&se.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return se.nodeName(this,"form")?!1:void se.event.remove(this,"._submit")}}),ie.changeBubbles||(se.event.special.change={setup:function(){return Ae.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(se.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),se.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),se.event.simulate("change",this,t,!0)})),!1):void se.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ae.test(e.nodeName)&&!se._data(e,"changeBubbles")&&(se.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||se.event.simulate("change",this.parentNode,t,!0)}),se._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return se.event.remove(this,"._change"),!Ae.test(this.nodeName)}}),ie.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){se.event.simulate(e,t.target,se.event.fix(t),!0)};se.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=se._data(n,e);s||n.addEventListener(t,i,!0),se._data(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=se._data(n,e)-1;s?se._data(n,e,s):(n.removeEventListener(t,i,!0),se._removeData(n,e))}}}),se.fn.extend({on:function(t,e,i,n,s){var r,o;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(r in t)this.on(r,e,i,t[r],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===s&&(o=n,n=function(t){return se().off(t),o.apply(this,arguments)},n.guid=o.guid||(o.guid=se.guid++)),this.each(function(){se.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,se(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=p),this.each(function(){se.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){se.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?se.event.trigger(t,e,i,!0):void 0}});var Oe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ne=/ jQuery\d+="(?:null|\d+)"/g,Me=new RegExp("<(?:"+Oe+")[\\s/>]","i"),Re=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,Be=/<tbody/i,ze=/<|&#?\w+;/,Ue=/<(?:script|style|link)/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^$|\/(?:java|ecma)script/i,qe=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Je={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ye=g(fe),Xe=Ye.appendChild(fe.createElement("div"));Je.optgroup=Je.option,Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td,se.extend({clone:function(t,e,i){var n,s,r,o,a,c=se.contains(t.ownerDocument,t);if(ie.html5Clone||se.isXMLDoc(t)||!Me.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(Xe.innerHTML=t.outerHTML,Xe.removeChild(r=Xe.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||se.isXMLDoc(t)))for(n=m(r),a=m(t),o=0;null!=(s=a[o]);++o)n[o]&&S(s,n[o]);if(e)if(i)for(a=a||m(t),n=n||m(r),o=0;null!=(s=a[o]);o++)_(s,n[o]);else _(t,r);return n=m(r,"script"),n.length>0&&x(n,!c&&m(t,"script")),n=a=s=null,r},buildFragment:function(t,e,i,n){for(var s,r,o,a,c,l,h,u=t.length,d=g(e),p=[],f=0;u>f;f++)if(r=t[f],r||0===r)if("object"===se.type(r))se.merge(p,r.nodeType?[r]:r);else if(ze.test(r)){for(a=a||d.appendChild(e.createElement("div")),c=(He.exec(r)||["",""])[1].toLowerCase(),h=Je[c]||Je._default,a.innerHTML=h[1]+r.replace(je,"<$1></$2>")+h[2],s=h[0];s--;)a=a.lastChild;if(!ie.leadingWhitespace&&Re.test(r)&&p.push(e.createTextNode(Re.exec(r)[0])),!ie.tbody)for(r="table"!==c||Be.test(r)?"<table>"!==h[1]||Be.test(r)?0:a:a.firstChild,s=r&&r.childNodes.length;s--;)se.nodeName(l=r.childNodes[s],"tbody")&&!l.childNodes.length&&r.removeChild(l);for(se.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else p.push(e.createTextNode(r));for(a&&d.removeChild(a),ie.appendChecked||se.grep(m(p,"input"),v),f=0;r=p[f++];)if((!n||-1===se.inArray(r,n))&&(o=se.contains(r.ownerDocument,r),a=m(d.appendChild(r),"script"),o&&x(a),i))for(s=0;r=a[s++];)Ge.test(r.type||"")&&i.push(r);return a=null,d},cleanData:function(t,e){for(var i,n,s,r,o=0,a=se.expando,c=se.cache,l=ie.deleteExpando,h=se.event.special;null!=(i=t[o]);o++)if((e||se.acceptData(i))&&(s=i[a],r=s&&c[s])){if(r.events)for(n in r.events)h[n]?se.event.remove(i,n):se.removeEvent(i,n,r.handle);c[s]&&(delete c[s],l?delete i[a]:typeof i.removeAttribute!==Se?i.removeAttribute(a):i[a]=null,V.push(s))}}}),se.fn.extend({text:function(t){return Ee(this,function(t){return void 0===t?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?se.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||se.cleanData(m(i)),i.parentNode&&(e&&se.contains(i.ownerDocument,i)&&x(m(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&se.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&se.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return se.clone(this,t,e)})},html:function(t){return Ee(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Ne,""):void 0;if(!("string"!=typeof t||Ue.test(t)||!ie.htmlSerialize&&Me.test(t)||!ie.leadingWhitespace&&Re.test(t)||Je[(He.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(je,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(se.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,se.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Y.apply([],t);var i,n,s,r,o,a,c=0,l=this.length,h=this,u=l-1,d=t[0],p=se.isFunction(d);if(p||l>1&&"string"==typeof d&&!ie.checkClone&&We.test(d))return this.each(function(i){var n=h.eq(i);p&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(l&&(a=se.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(r=se.map(m(a,"script"),b),s=r.length;l>c;c++)n=a,c!==u&&(n=se.clone(n,!0,!0),s&&se.merge(r,m(n,"script"))),e.call(this[c],n,c);if(s)for(o=r[r.length-1].ownerDocument,se.map(r,w),c=0;s>c;c++)n=r[c],Ge.test(n.type||"")&&!se._data(n,"globalEval")&&se.contains(o,n)&&(n.src?se._evalUrl&&se._evalUrl(n.src):se.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Ve,"")));a=i=null}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){se.fn[t]=function(t){for(var i,n=0,s=[],r=se(t),o=r.length-1;o>=n;n++)i=n===o?this:this.clone(!0),se(r[n])[e](i),X.apply(s,i.get());return this.pushStack(s)}});var Qe,Ze={};!function(){var t;ie.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return i=fe.getElementsByTagName("body")[0],i&&i.style?(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==Se&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(fe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var ti,ei,ii=/^margin/,ni=new RegExp("^("+Te+")(?!px)[a-z%]+$","i"),si=/^(top|right|bottom|left)$/;t.getComputedStyle?(ti=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ei=function(t,e,i){var n,s,r,o,a=t.style;return i=i||ti(t),o=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==o||se.contains(t.ownerDocument,t)||(o=se.style(t,e)),ni.test(o)&&ii.test(e)&&(n=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=s,a.maxWidth=r)),void 0===o?o:o+""}):fe.documentElement.currentStyle&&(ti=function(t){return t.currentStyle},ei=function(t,e,i){var n,s,r,o,a=t.style;return i=i||ti(t),o=i?i[e]:void 0,null==o&&a&&a[e]&&(o=a[e]),ni.test(o)&&!si.test(e)&&(n=a.left,s=t.runtimeStyle,r=s&&s.left,r&&(s.left=t.currentStyle.left),a.left="fontSize"===e?"1em":o,o=a.pixelLeft+"px",a.left=n,r&&(s.left=r)),void 0===o?o:o+""||"auto"}),function(){function e(){var e,i,n,s;i=fe.getElementsByTagName("body")[0],i&&i.style&&(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=o=!1,c=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(e,null)||{}).top,o="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,s=e.appendChild(fe.createElement("div")),s.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",s.style.marginRight=s.style.width="0",e.style.width="1px",c=!parseFloat((t.getComputedStyle(s,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=e.getElementsByTagName("td"),s[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===s[0].offsetHeight,a&&(s[0].style.display="",s[1].style.display="none",a=0===s[0].offsetHeight),i.removeChild(n))}var i,n,s,r,o,a,c;i=fe.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=i.getElementsByTagName("a")[0],n=s&&s.style,n&&(n.cssText="float:left;opacity:.5",ie.opacity="0.5"===n.opacity,ie.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===i.style.backgroundClip,ie.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,se.extend(ie,{reliableHiddenOffsets:function(){return null==a&&e(),a
},boxSizingReliable:function(){return null==o&&e(),o},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){return null==c&&e(),c}}))}(),se.swap=function(t,e,i,n){var s,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];s=i.apply(t,n||[]);for(r in e)t.style[r]=o[r];return s};var ri=/alpha\([^)]*\)/i,oi=/opacity\s*=\s*([^)]*)/,ai=/^(none|table(?!-c[ea]).+)/,ci=new RegExp("^("+Te+")(.*)$","i"),li=new RegExp("^([+-])=("+Te+")","i"),hi={position:"absolute",visibility:"hidden",display:"block"},ui={letterSpacing:"0",fontWeight:"400"},di=["Webkit","O","Moz","ms"];se.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ei(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,o,a=se.camelCase(e),c=t.style;if(e=se.cssProps[a]||(se.cssProps[a]=K(c,a)),o=se.cssHooks[e]||se.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(s=o.get(t,!1,n))?s:c[e];if(r=typeof i,"string"===r&&(s=li.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(se.css(t,e)),r="number"),null!=i&&i===i&&("number"!==r||se.cssNumber[a]||(i+="px"),ie.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),!(o&&"set"in o&&void 0===(i=o.set(t,i,n)))))try{c[e]=i}catch(l){}}},css:function(t,e,i,n){var s,r,o,a=se.camelCase(e);return e=se.cssProps[a]||(se.cssProps[a]=K(t.style,a)),o=se.cssHooks[e]||se.cssHooks[a],o&&"get"in o&&(r=o.get(t,!0,i)),void 0===r&&(r=ei(t,e,n)),"normal"===r&&e in ui&&(r=ui[e]),""===i||i?(s=parseFloat(r),i===!0||se.isNumeric(s)?s||0:r):r}}),se.each(["height","width"],function(t,e){se.cssHooks[e]={get:function(t,i,n){return i?ai.test(se.css(t,"display"))&&0===t.offsetWidth?se.swap(t,hi,function(){return A(t,e,n)}):A(t,e,n):void 0},set:function(t,i,n){var s=n&&ti(t);return E(t,i,n?D(t,e,n,ie.boxSizing&&"border-box"===se.css(t,"boxSizing",!1,s),s):0)}}}),ie.opacity||(se.cssHooks.opacity={get:function(t,e){return oi.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=se.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===se.trim(r.replace(ri,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=ri.test(r)?r.replace(ri,s):r+" "+s)}}),se.cssHooks.marginRight=T(ie.reliableMarginRight,function(t,e){return e?se.swap(t,{display:"inline-block"},ei,[t,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(t,e){se.cssHooks[t+e]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+Ke[n]+e]=r[n]||r[n-2]||r[0];return s}},ii.test(t)||(se.cssHooks[t+e].set=E)}),se.fn.extend({css:function(t,e){return Ee(this,function(t,e,i){var n,s,r={},o=0;if(se.isArray(e)){for(n=ti(t),s=e.length;s>o;o++)r[e[o]]=se.css(t,e[o],!1,n);return r}return void 0!==i?se.style(t,e,i):se.css(t,e)},t,e,arguments.length>1)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Pe(this)?se(this).show():se(this).hide()})}}),se.Tween=F,F.prototype={constructor:F,init:function(t,e,i,n,s,r){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(se.cssNumber[i]?"":"px")},cur:function(){var t=F.propHooks[this.prop];return t&&t.get?t.get(this):F.propHooks._default.get(this)},run:function(t){var e,i=F.propHooks[this.prop];return this.pos=e=this.options.duration?se.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=se.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){se.fx.step[t.prop]?se.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[se.cssProps[t.prop]]||se.cssHooks[t.prop])?se.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},se.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},se.fx=F.prototype.init,se.fx.step={};var pi,fi,gi=/^(?:toggle|show|hide)$/,mi=new RegExp("^(?:([+-])=|)("+Te+")([a-z%]*)$","i"),vi=/queueHooks$/,yi=[O],bi={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=mi.exec(e),r=s&&s[3]||(se.cssNumber[t]?"":"px"),o=(se.cssNumber[t]||"px"!==r&&+n)&&mi.exec(se.css(i.elem,t)),a=1,c=20;if(o&&o[3]!==r){r=r||o[3],s=s||[],o=+n||1;do a=a||".5",o/=a,se.style(i.elem,t,o+r);while(a!==(a=i.cur()/n)&&1!==a&&--c)}return s&&(o=i.start=+o||+n||0,i.unit=r,i.end=s[1]?o+(s[1]+1)*s[2]:+s[2]),i}]};se.Animation=se.extend(M,{tweener:function(t,e){se.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],bi[i]=bi[i]||[],bi[i].unshift(e)},prefilter:function(t,e){e?yi.unshift(t):yi.push(t)}}),se.speed=function(t,e,i){var n=t&&"object"==typeof t?se.extend({},t):{complete:i||!i&&e||se.isFunction(t)&&t,duration:t,easing:i&&e||e&&!se.isFunction(e)&&e};return n.duration=se.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in se.fx.speeds?se.fx.speeds[n.duration]:se.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){se.isFunction(n.old)&&n.old.call(this),n.queue&&se.dequeue(this,n.queue)},n},se.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Pe).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=se.isEmptyObject(t),r=se.speed(e,i,n),o=function(){var e=M(this,se.extend({},t),r);(s||se._data(this,"finish"))&&e.stop(!0)};return o.finish=o,s||r.queue===!1?this.each(o):this.queue(r.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",r=se.timers,o=se._data(this);if(s)o[s]&&o[s].stop&&n(o[s]);else for(s in o)o[s]&&o[s].stop&&vi.test(s)&&n(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=t&&r[s].queue!==t||(r[s].anim.stop(i),e=!1,r.splice(s,1));(e||!i)&&se.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=se._data(this),n=i[t+"queue"],s=i[t+"queueHooks"],r=se.timers,o=n?n.length:0;for(i.finish=!0,se.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;o>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),se.each(["toggle","show","hide"],function(t,e){var i=se.fn[e];se.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate($(e,!0),t,n,s)}}),se.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){se.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),se.timers=[],se.fx.tick=function(){var t,e=se.timers,i=0;for(pi=se.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||se.fx.stop(),pi=void 0},se.fx.timer=function(t){se.timers.push(t),t()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){fi||(fi=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(fi),fi=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(t,e){return t=se.fx?se.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,s;e=fe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],i=fe.createElement("select"),s=i.appendChild(fe.createElement("option")),t=e.getElementsByTagName("input")[0],n.style.cssText="top:1px",ie.getSetAttribute="t"!==e.className,ie.style=/top/.test(n.getAttribute("style")),ie.hrefNormalized="/a"===n.getAttribute("href"),ie.checkOn=!!t.value,ie.optSelected=s.selected,ie.enctype=!!fe.createElement("form").enctype,i.disabled=!0,ie.optDisabled=!s.disabled,t=fe.createElement("input"),t.setAttribute("value",""),ie.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ie.radioValue="t"===t.value}();var wi=/\r/g;se.fn.extend({val:function(t){var e,i,n,s=this[0];{if(arguments.length)return n=se.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,se(this).val()):t,null==s?s="":"number"==typeof s?s+="":se.isArray(s)&&(s=se.map(s,function(t){return null==t?"":t+""})),e=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))});if(s)return e=se.valHooks[s.type]||se.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(wi,""):null==i?"":i)}}}),se.extend({valHooks:{option:{get:function(t){var e=se.find.attr(t,"value");return null!=e?e:se.trim(se.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,r="select-one"===t.type||0>s,o=r?null:[],a=r?s+1:n.length,c=0>s?a:r?s:0;a>c;c++)if(i=n[c],!(!i.selected&&c!==s||(ie.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&se.nodeName(i.parentNode,"optgroup"))){if(e=se(i).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var i,n,s=t.options,r=se.makeArray(e),o=s.length;o--;)if(n=s[o],se.inArray(se.valHooks.option.get(n),r)>=0)try{n.selected=i=!0}catch(a){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),s}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(t,e){return se.isArray(e)?t.checked=se.inArray(se(t).val(),e)>=0:void 0}},ie.checkOn||(se.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xi,_i,Si=se.expr.attrHandle,ki=/^(?:checked|selected)$/i,Ci=ie.getSetAttribute,Ti=ie.input;se.fn.extend({attr:function(t,e){return Ee(this,se.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){se.removeAttr(this,t)})}}),se.extend({attr:function(t,e,i){var n,s,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===Se?se.prop(t,e,i):(1===r&&se.isXMLDoc(t)||(e=e.toLowerCase(),n=se.attrHooks[e]||(se.expr.match.bool.test(e)?_i:xi)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=se.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void se.removeAttr(t,e))},removeAttr:function(t,e){var i,n,s=0,r=e&&e.match(be);if(r&&1===t.nodeType)for(;i=r[s++];)n=se.propFix[i]||i,se.expr.match.bool.test(i)?Ti&&Ci||!ki.test(i)?t[n]=!1:t[se.camelCase("default-"+i)]=t[n]=!1:se.attr(t,i,""),t.removeAttribute(Ci?i:n)},attrHooks:{type:{set:function(t,e){if(!ie.radioValue&&"radio"===e&&se.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),_i={set:function(t,e,i){return e===!1?se.removeAttr(t,i):Ti&&Ci||!ki.test(i)?t.setAttribute(!Ci&&se.propFix[i]||i,i):t[se.camelCase("default-"+i)]=t[i]=!0,i}},se.each(se.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Si[e]||se.find.attr;Si[e]=Ti&&Ci||!ki.test(e)?function(t,e,n){var s,r;return n||(r=Si[e],Si[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,Si[e]=r),s}:function(t,e,i){return i?void 0:t[se.camelCase("default-"+e)]?e.toLowerCase():null}}),Ti&&Ci||(se.attrHooks.value={set:function(t,e,i){return se.nodeName(t,"input")?void(t.defaultValue=e):xi&&xi.set(t,e,i)}}),Ci||(xi={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},Si.id=Si.name=Si.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},se.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:xi.set},se.attrHooks.contenteditable={set:function(t,e,i){xi.set(t,""===e?!1:e,i)}},se.each(["width","height"],function(t,e){se.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),ie.style||(se.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ki=/^(?:input|select|textarea|button|object)$/i,Pi=/^(?:a|area)$/i;se.fn.extend({prop:function(t,e){return Ee(this,se.prop,t,e,arguments.length>1)},removeProp:function(t){return t=se.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),se.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,s,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return r=1!==o||!se.isXMLDoc(t),r&&(e=se.propFix[e]||e,s=se.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=se.find.attr(t,"tabindex");return e?parseInt(e,10):Ki.test(t.nodeName)||Pi.test(t.nodeName)&&t.href?0:-1}}}}),ie.hrefNormalized||se.each(["href","src"],function(t,e){se.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ie.optSelected||(se.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),ie.enctype||(se.propFix.enctype="encoding");var Ei=/[\t\r\n\f]/g;se.fn.extend({addClass:function(t){var e,i,n,s,r,o,a=0,c=this.length,l="string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(be)||[];c>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ei," "):" ")){for(r=0;s=e[r++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");o=se.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(t){var e,i,n,s,r,o,a=0,c=this.length,l=0===arguments.length||"string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(be)||[];c>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ei," "):"")){for(r=0;s=e[r++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");o=t?se.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(se.isFunction(t)?function(i){se(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,s=se(this),r=t.match(be)||[];e=r[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===Se||"boolean"===i)&&(this.className&&se._data(this,"__className__",this.className),this.className=this.className||t===!1?"":se._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ei," ").indexOf(e)>=0)return!0;return!1}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){se.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),se.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Di=se.now(),Ai=/\?/,Fi=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;se.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,s=se.trim(e+"");return s&&!se.trim(s.replace(Fi,function(t,e,s,r){return i&&e&&(n=0),0===n?t:(i=s||e,n+=!r-!s,"")}))?Function("return "+s)():se.error("Invalid JSON: "+e)},se.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(s){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+e),i};var Ii,$i,Li=/#.*$/,Oi=/([?&])_=[^&]*/,Ni=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ri=/^(?:GET|HEAD)$/,ji=/^\/\//,Hi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Bi={},zi={},Ui="*/".concat("*");try{$i=location.href}catch(Wi){$i=fe.createElement("a"),$i.href="",$i=$i.href}Ii=Hi.exec($i.toLowerCase())||[],se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:$i,type:"GET",isLocal:Mi.test(Ii[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ui,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?H(H(t,se.ajaxSettings),e):H(se.ajaxSettings,t)},ajaxPrefilter:R(Bi),ajaxTransport:R(zi),ajax:function(t,e){function i(t,e,i,n){var s,h,v,y,w,_=e;2!==b&&(b=2,a&&clearTimeout(a),l=void 0,o=n||"",x.readyState=t>0?4:0,s=t>=200&&300>t||304===t,i&&(y=B(u,x,i)),y=z(u,y,x,s),s?(u.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(se.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(se.etag[r]=w)),204===t||"HEAD"===u.type?_="nocontent":304===t?_="notmodified":(_=y.state,h=y.data,v=y.error,s=!v)):(v=_,(t||!_)&&(_="error",0>t&&(t=0))),x.status=t,x.statusText=(e||_)+"",s?f.resolveWith(d,[h,_,x]):f.rejectWith(d,[x,_,v]),x.statusCode(m),m=void 0,c&&p.trigger(s?"ajaxSuccess":"ajaxError",[x,u,s?h:v]),g.fireWith(d,[x,_]),c&&(p.trigger("ajaxComplete",[x,u]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,r,o,a,c,l,h,u=se.ajaxSetup({},e),d=u.context||u,p=u.context&&(d.nodeType||d.jquery)?se(d):se.event,f=se.Deferred(),g=se.Callbacks("once memory"),m=u.statusCode||{},v={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!h)for(h={};e=Ni.exec(o);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=y[i]=y[i]||t,v[t]=e),this},overrideMimeType:function(t){return b||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return l&&l.abort(e),i(0,e),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,u.url=((t||u.url||$i)+"").replace(Li,"").replace(ji,Ii[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=se.trim(u.dataType||"*").toLowerCase().match(be)||[""],null==u.crossDomain&&(n=Hi.exec(u.url.toLowerCase()),u.crossDomain=!(!n||n[1]===Ii[1]&&n[2]===Ii[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ii[3]||("http:"===Ii[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=se.param(u.data,u.traditional)),j(Bi,u,e,x),2===b)return x;c=u.global,c&&0===se.active++&&se.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Ri.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(Ai.test(r)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=Oi.test(r)?r.replace(Oi,"$1_="+Di++):r+(Ai.test(r)?"&":"?")+"_="+Di++)),u.ifModified&&(se.lastModified[r]&&x.setRequestHeader("If-Modified-Since",se.lastModified[r]),se.etag[r]&&x.setRequestHeader("If-None-Match",se.etag[r])),(u.data&&u.hasContent&&u.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Ui+"; q=0.01":""):u.accepts["*"]);for(s in u.headers)x.setRequestHeader(s,u.headers[s]);if(u.beforeSend&&(u.beforeSend.call(d,x,u)===!1||2===b))return x.abort();w="abort";for(s in{success:1,error:1,complete:1})x[s](u[s]);if(l=j(zi,u,e,x)){x.readyState=1,c&&p.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},u.timeout));try{b=1,l.send(v,i)}catch(_){if(!(2>b))throw _;i(-1,_)}}else i(-1,"No Transport");return x},getJSON:function(t,e,i){return se.get(t,e,i,"json")},getScript:function(t,e){return se.get(t,void 0,e,"script")}}),se.each(["get","post"],function(t,e){se[e]=function(t,i,n,s){return se.isFunction(i)&&(s=s||n,n=i,i=void 0),se.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){se.fn[e]=function(t){return this.on(e,t)}}),se._evalUrl=function(t){return se.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},se.fn.extend({wrapAll:function(t){if(se.isFunction(t))return this.each(function(e){se(this).wrapAll(t.call(this,e))});if(this[0]){var e=se(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(se.isFunction(t)?function(e){se(this).wrapInner(t.call(this,e))}:function(){var e=se(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=se.isFunction(t);return this.each(function(i){se(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||se.css(t,"display"))},se.expr.filters.visible=function(t){return!se.expr.filters.hidden(t)};var Gi=/%20/g,qi=/\[\]$/,Vi=/\r?\n/g,Ji=/^(?:submit|button|image|reset|file)$/i,Yi=/^(?:input|select|textarea|keygen)/i;se.param=function(t,e){var i,n=[],s=function(t,e){e=se.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(t)||t.jquery&&!se.isPlainObject(t))se.each(t,function(){s(this.name,this.value)});else for(i in t)U(i,t[i],e,s);return n.join("&").replace(Gi,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=se.prop(this,"elements");return t?se.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!se(this).is(":disabled")&&Yi.test(this.nodeName)&&!Ji.test(t)&&(this.checked||!De.test(t))}).map(function(t,e){var i=se(this).val();return null==i?null:se.isArray(i)?se.map(i,function(t){return{name:e.name,value:t.replace(Vi,"\r\n")}}):{name:e.name,value:i.replace(Vi,"\r\n")}}).get()}}),se.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||G()}:W;var Xi=0,Qi={},Zi=se.ajaxSettings.xhr();t.ActiveXObject&&se(t).on("unload",function(){for(var t in Qi)Qi[t](void 0,!0)}),ie.cors=!!Zi&&"withCredentials"in Zi,Zi=ie.ajax=!!Zi,Zi&&se.ajaxTransport(function(t){if(!t.crossDomain||ie.cors){var e;return{send:function(i,n){var s,r=t.xhr(),o=++Xi;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)r[s]=t.xhrFields[s];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)void 0!==i[s]&&r.setRequestHeader(s,i[s]+"");r.send(t.hasContent&&t.data||null),e=function(i,s){var a,c,l;if(e&&(s||4===r.readyState))if(delete Qi[o],e=void 0,r.onreadystatechange=se.noop,s)4!==r.readyState&&r.abort();else{l={},a=r.status,"string"==typeof r.responseText&&(l.text=r.responseText);try{c=r.statusText}catch(h){c=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=l.text?200:404}l&&n(a,c,l,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Qi[o]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return se.globalEval(t),t}}}),se.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),se.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=fe.head||se("head")[0]||fe.documentElement;return{send:function(n,s){e=fe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||s(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var tn=[],en=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||se.expando+"_"+Di++;return this[t]=!0,t}}),se.ajaxPrefilter("json jsonp",function(e,i,n){var s,r,o,a=e.jsonp!==!1&&(en.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=se.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(en,"$1"+s):e.jsonp!==!1&&(e.url+=(Ai.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||se.error(s+" was not called"),o[0]},e.dataTypes[0]="json",r=t[s],t[s]=function(){o=arguments},n.always(function(){t[s]=r,e[s]&&(e.jsonpCallback=i.jsonpCallback,tn.push(s)),o&&se.isFunction(r)&&r(o[0]),o=r=void 0}),"script"):void 0}),se.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||fe;var n=ue.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=se.buildFragment([t],e,s),s&&s.length&&se(s).remove(),se.merge([],n.childNodes))};var nn=se.fn.load;se.fn.load=function(t,e,i){if("string"!=typeof t&&nn)return nn.apply(this,arguments);var n,s,r,o=this,a=t.indexOf(" ");return a>=0&&(n=se.trim(t.slice(a,t.length)),t=t.slice(0,a)),se.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&se.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){s=arguments,o.html(n?se("<div>").append(se.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){o.each(i,s||[t.responseText,e,t])}),this},se.expr.filters.animated=function(t){return se.grep(se.timers,function(e){return t===e.elem}).length};var sn=t.document.documentElement;se.offset={setOffset:function(t,e,i){var n,s,r,o,a,c,l,h=se.css(t,"position"),u=se(t),d={};"static"===h&&(t.style.position="relative"),a=u.offset(),r=se.css(t,"top"),c=se.css(t,"left"),l=("absolute"===h||"fixed"===h)&&se.inArray("auto",[r,c])>-1,l?(n=u.position(),o=n.top,s=n.left):(o=parseFloat(r)||0,s=parseFloat(c)||0),se.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+s),"using"in e?e.using.call(t,d):u.css(d)}},se.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){se.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},s=this[0],r=s&&s.ownerDocument;if(r)return e=r.documentElement,se.contains(e,s)?(typeof s.getBoundingClientRect!==Se&&(n=s.getBoundingClientRect()),i=q(r),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===se.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),se.nodeName(t[0],"html")||(i=t.offset()),i.top+=se.css(t[0],"borderTopWidth",!0),i.left+=se.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-se.css(n,"marginTop",!0),left:e.left-i.left-se.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||sn;t&&!se.nodeName(t,"html")&&"static"===se.css(t,"position");)t=t.offsetParent;return t||sn})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);se.fn[t]=function(n){return Ee(this,function(t,n,s){var r=q(t);return void 0===s?r?e in r?r[e]:r.document.documentElement[n]:t[n]:void(r?r.scrollTo(i?se(r).scrollLeft():s,i?s:se(r).scrollTop()):t[n]=s)},t,n,arguments.length,null)}}),se.each(["top","left"],function(t,e){se.cssHooks[e]=T(ie.pixelPosition,function(t,i){return i?(i=ei(t,e),ni.test(i)?se(t).position()[e]+"px":i):void 0})}),se.each({Height:"height",Width:"width"},function(t,e){se.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){se.fn[n]=function(n,s){var r=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||s===!0?"margin":"border");return Ee(this,function(e,i,n){var s;return se.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?se.css(e,i,o):se.style(e,i,n,o)},e,r?n:void 0,r,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return se});var rn=t.jQuery,on=t.$;return se.noConflict=function(e){return t.$===se&&(t.$=on),e&&t.jQuery===se&&(t.jQuery=rn),se},typeof e===Se&&(t.jQuery=t.$=se),se}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)},fire:function(e,i,n){var s=t.Event(i);return e.trigger(s,n),s.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var s,r,o,a,c,l,h,u;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),c=a===e?null:a,l=n.data("with-credentials")||null,h=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){s=n.attr("method"),r=n.attr("action"),o=n.serializeArray();var d=n.data("ujs:submit-button");d&&(o.push(d),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(s=n.data("method"),r=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(s=n.data("method")||"get",r=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(s=n.data("method"),r=i.href(n),o=n.data("params")||null);
return u={type:s||"GET",data:o,dataType:h,beforeSend:function(t,s){return s.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),i.fire(n,"ajax:beforeSend",[t,s])?void n.trigger("ajax:send",t):!1},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:c},l&&(u.xhrFields={withCredentials:l}),r&&(u.url=r),i.ajax(u)}return!1},handleMethod:function(n){var s=i.href(n),r=n.data("method"),o=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),c=t("meta[name=csrf-param]").attr("content"),l=t('<form method="post" action="'+s+'"></form>'),h='<input name="_method" value="'+r+'" type="hidden" />';c!==e&&a!==e&&(h+='<input name="'+c+'" value="'+a+'" type="hidden" />'),o&&l.attr("target",o),l.hide().append(h).appendTo("body"),l.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[i]()),n!==e&&t[i](n),t.prop("disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),s=!1;return n?(i.fire(t,"confirm")&&(s=i.confirm(n),e=i.fire(t,"confirm:complete",[s])),s&&e):!0},blankInputs:function(e,i,n){var s,r,o=t(),a=i||"input,textarea",c=e.find(a);return c.each(function(){if(s=t(this),r=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val(),!r==!n){if(s.is("input[type=radio]")&&c.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;o=o.add(s)}}),o.length?o:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");t.data("ujs:enable-with",t.html()),n!==e&&t.html(n),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var s=t(this),r=s.data("method"),o=s.data("params"),a=n.metaKey||n.ctrlKey;if(!i.allowAction(s))return i.stopEverything(n);if(!a&&s.is(i.linkDisableSelector)&&i.disableElement(s),s.data("remote")!==e){if(a&&(!r||"GET"===r)&&!o)return!0;var c=i.handleRemote(s);return c===!1?i.enableElement(s):c.error(function(){i.enableElement(s)}),!1}return s.data("method")?(i.handleMethod(s),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var s=i.handleRemote(n);return s===!1?i.enableFormElement(n):s.error(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var s,r,o=t(this),a=o.data("remote")!==e;if(!i.allowAction(o))return i.stopEverything(n);if(o.attr("novalidate")==e&&(s=i.blankInputs(o,i.requiredInputSelector),s&&i.fire(o,"ajax:aborted:required",[s])))return i.stopEverything(n);if(a){if(r=i.nonBlankInputs(o,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(o)},13);var c=i.fire(o,"ajax:aborted:file",[r]);return c||setTimeout(function(){i.enableFormElements(o)},13),c}return i.handleRemote(o),!1}setTimeout(function(){i.disableFormElements(o)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var s=n.attr("name"),r=s?{name:s,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.affix"),r="object"==typeof e&&e;s||n.data("bs.affix",s=new i(this,r)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.1",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var s=this.$target.scrollTop(),r=this.$element.offset(),o=this.$target.height();if(null!=i&&"top"==this.affixed)return i>s?"top":!1;if("bottom"==this.affixed)return null!=i?s+this.unpin<=r.top?!1:"bottom":t-n>=s+o?!1:"bottom";var a=null==this.affixed,c=a?s:r.top,l=a?o:e;return null!=i&&i>=c?"top":null!=n&&c+l>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,s=n.top,r=n.bottom,o=t("body").height();"object"!=typeof n&&(r=s=n),"function"==typeof s&&(s=n.top(this.$element)),"function"==typeof r&&(r=n.bottom(this.$element));var a=this.getState(o,e,s,r);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var c="affix"+(a?"-"+a:""),l=t.Event(c+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:o-e-r})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new n(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){o.detach().trigger("closed.bs.alert").remove()}var s=t(this),r=s.attr("data-target");r||(r=s.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=s.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.button"),r="object"==typeof e&&e;s||n.data("bs.button",s=new i(this,r)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.1",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",r=n.data();e+="Text",null==r.resetText&&n.data("resetText",n[s]()),setTimeout(t.proxy(function(){n[s](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.carousel"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),o="string"==typeof e?e:r.slide;s||n.data("bs.carousel",s=new i(this,r)),"number"==typeof e?s.to(e):o?s[o]():r.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.1",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i="prev"==t?-1:1,n=this.getItemIndex(e),s=(n+i)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var s=this.$element.find(".item.active"),r=n||this.getItemForDirection(e,s),o=this.interval,a="next"==e?"left":"right",c="next"==e?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[c]()}if(r.hasClass("active"))return this.sliding=!1;var h=r[0],u=t.Event("slide.bs.carousel",{relatedTarget:h,direction:a});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(r)]);d&&d.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:h,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,s.addClass(a),r.addClass(a),s.one("bsTransitionEnd",function(){r.removeClass([e,a].join(" ")).addClass("active"),s.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(p)),o&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var s=function(i){var n,s=t(this),r=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var o=t.extend({},r.data(),s.data()),a=s.attr("data-slide-to");a&&(o.interval=!1),e.call(r,o),a&&r.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!s&&r.toggle&&"show"==e&&(r.toggle=!1),s||i.data("bs.collapse",s=new n(this,r)),"string"==typeof e&&s[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.1",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),e||s.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var c=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[o](this.$element[0][c])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION):s.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var s=t(n);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var s=t(this);s.attr("data-target")||n.preventDefault();var r=e(s),o=r.data("bs.collapse"),a=o?"toggle":t.extend({},s.data(),{trigger:this});i.call(r,a)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(r).each(function(){var n=t(this),s=i(n),r={relatedTarget:this};s.hasClass("open")&&(s.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||(n.attr("aria-expanded","false"),s.removeClass("open").trigger("hidden.bs.dropdown",r)))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var s=".dropdown-backdrop",r='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.1",o.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var r=i(s),o=r.hasClass("open");if(e(),!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(r.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},o.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),o=s.hasClass("open");if(!o&&27!=e.which||o&&27==e.which)return 27==e.which&&s.find(r).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",c=s.find('[role="menu"]'+a+', [role="listbox"]'+a);if(c.length){var l=c.index(e.target);38==e.which&&l>0&&l--,40==e.which&&l<c.length-1&&l++,~l||(l=0),c.eq(l).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.1",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),o=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(r),e.trigger(o),!o.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,n,s){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var o=n.find("> .active"),a=s&&t.support.transition&&(o.length&&o.hasClass("fade")||!!n.find("> .fade").length);o.length&&a?o.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(i,n){var s=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),s=n.data("bs.scrollspy"),r="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new e(this,r)),"string"==typeof i&&s[i]()})}e.VERSION="3.3.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=t(this),s=n.data("target")||n.attr("href"),r=/^#./.test(s)&&t(s);return r&&r.length&&r.is(":visible")&&[[r[e]().top+i,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,r=this.targets,o=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return o!=(t=r[r.length-1])&&this.activate(t);if(o&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)o!=r[t]&&e>=s[t]&&(!s[t+1]||e<=s[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),r=s.data("bs.modal"),o=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);r||s.data("bs.modal",r=new i(this,o)),"string"==typeof e?r[e](n):o.show&&r.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.1",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var s=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.options.backdrop&&n.adjustBackdrop(),n.adjustDialog(),s&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});s?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&s;if(this.$backdrop=t('<div class="modal-backdrop '+s+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):o()}else e&&e()},i.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},i.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),r=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(r,o,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tooltip"),r="object"==typeof e&&e,o=r&&r.selector;(s||"destroy"!=e)&&(o?(s||n.data("bs.tooltip",s={}),s[o]||(s[o]=new i(this,r))):s||n.data("bs.tooltip",s=new i(this,r)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.3.1",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),r=s.length;r--;){var o=s[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",c="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()
},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var s=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,l=c.test(a);l&&(a=a.replace(c,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var h=this.getPosition(),u=r[0].offsetWidth,d=r[0].offsetHeight;if(l){var p=a,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);a="bottom"==a&&h.bottom+d>g.bottom?"top":"top"==a&&h.top-d<g.top?"bottom":"right"==a&&h.right+u>g.width?"left":"left"==a&&h.left-u<g.left?"right":a,r.removeClass(p).addClass(a)}var m=this.getCalculatedOffset(a,h,u,d);this.applyPlacement(m,a);var v=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,r=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top=e.top+o,e.left=e.left+a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var c=n[0].offsetWidth,l=n[0].offsetHeight;"top"==i&&l!=r&&(e.top=e.top+r-l);var h=this.getViewportAdjustedDelta(i,e,c,l);h.left?e.left+=h.left:e.top+=h.top;var u=/top|bottom/.test(i),d=u?2*h.left-s+c:2*h.top-r+l,p=u?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(d,n[0][p],u)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=s.hoverState&&r.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),e&&e()}var s=this,r=this.tip(),o=t.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var r=n?{top:0,left:0}:e.offset(),o={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,o,a,r)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var r=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-o.scroll,c=e.top+r-o.scroll+n;a<o.top?s.top=o.top-a:c>o.top+o.height&&(s.top=o.top+o.height-c)}else{var l=e.left-r,h=e.left+r+i;l<o.left?s.left=o.left-l:h>o.width&&(s.left=o.left+o.width-h)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.popover"),r="object"==typeof e&&e,o=r&&r.selector;(s||"destroy"!=e)&&(o?(s||n.data("bs.popover",s={}),s[o]||(s[o]=new i(this,r))):s||n.data("bs.popover",s=new i(this,r)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.1",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(){var t=this,e=t._,i=Array.prototype,n=Object.prototype,s=Function.prototype,r=i.push,o=i.slice,a=i.concat,c=n.toString,l=n.hasOwnProperty,h=Array.isArray,u=Object.keys,d=s.bind,p=function(t){return t instanceof p?t:this instanceof p?void(this._wrapped=t):new p(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):t._=p,p.VERSION="1.7.0";var f=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,s){return t.call(e,i,n,s)};case 4:return function(i,n,s,r){return t.call(e,i,n,s,r)}}return function(){return t.apply(e,arguments)}};p.iteratee=function(t,e,i){return null==t?p.identity:p.isFunction(t)?f(t,e,i):p.isObject(t)?p.matches(t):p.property(t)},p.each=p.forEach=function(t,e,i){if(null==t)return t;e=f(e,i);var n,s=t.length;if(s===+s)for(n=0;s>n;n++)e(t[n],n,t);else{var r=p.keys(t);for(n=0,s=r.length;s>n;n++)e(t[r[n]],r[n],t)}return t},p.map=p.collect=function(t,e,i){if(null==t)return[];e=p.iteratee(e,i);for(var n,s=t.length!==+t.length&&p.keys(t),r=(s||t).length,o=Array(r),a=0;r>a;a++)n=s?s[a]:a,o[a]=e(t[n],n,t);return o};var g="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(t,e,i,n){null==t&&(t=[]),e=f(e,n,4);var s,r=t.length!==+t.length&&p.keys(t),o=(r||t).length,a=0;if(arguments.length<3){if(!o)throw new TypeError(g);i=t[r?r[a++]:a++]}for(;o>a;a++)s=r?r[a]:a,i=e(i,t[s],s,t);return i},p.reduceRight=p.foldr=function(t,e,i,n){null==t&&(t=[]),e=f(e,n,4);var s,r=t.length!==+t.length&&p.keys(t),o=(r||t).length;if(arguments.length<3){if(!o)throw new TypeError(g);i=t[r?r[--o]:--o]}for(;o--;)s=r?r[o]:o,i=e(i,t[s],s,t);return i},p.find=p.detect=function(t,e,i){var n;return e=p.iteratee(e,i),p.some(t,function(t,i,s){return e(t,i,s)?(n=t,!0):void 0}),n},p.filter=p.select=function(t,e,i){var n=[];return null==t?n:(e=p.iteratee(e,i),p.each(t,function(t,i,s){e(t,i,s)&&n.push(t)}),n)},p.reject=function(t,e,i){return p.filter(t,p.negate(p.iteratee(e)),i)},p.every=p.all=function(t,e,i){if(null==t)return!0;e=p.iteratee(e,i);var n,s,r=t.length!==+t.length&&p.keys(t),o=(r||t).length;for(n=0;o>n;n++)if(s=r?r[n]:n,!e(t[s],s,t))return!1;return!0},p.some=p.any=function(t,e,i){if(null==t)return!1;e=p.iteratee(e,i);var n,s,r=t.length!==+t.length&&p.keys(t),o=(r||t).length;for(n=0;o>n;n++)if(s=r?r[n]:n,e(t[s],s,t))return!0;return!1},p.contains=p.include=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=p.values(t)),p.indexOf(t,e)>=0)},p.invoke=function(t,e){var i=o.call(arguments,2),n=p.isFunction(e);return p.map(t,function(t){return(n?e:t[e]).apply(t,i)})},p.pluck=function(t,e){return p.map(t,p.property(e))},p.where=function(t,e){return p.filter(t,p.matches(e))},p.findWhere=function(t,e){return p.find(t,p.matches(e))},p.max=function(t,e,i){var n,s,r=-1/0,o=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var a=0,c=t.length;c>a;a++)n=t[a],n>r&&(r=n)}else e=p.iteratee(e,i),p.each(t,function(t,i,n){s=e(t,i,n),(s>o||s===-1/0&&r===-1/0)&&(r=t,o=s)});return r},p.min=function(t,e,i){var n,s,r=1/0,o=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var a=0,c=t.length;c>a;a++)n=t[a],r>n&&(r=n)}else e=p.iteratee(e,i),p.each(t,function(t,i,n){s=e(t,i,n),(o>s||1/0===s&&1/0===r)&&(r=t,o=s)});return r},p.shuffle=function(t){for(var e,i=t&&t.length===+t.length?t:p.values(t),n=i.length,s=Array(n),r=0;n>r;r++)e=p.random(0,r),e!==r&&(s[r]=s[e]),s[e]=i[r];return s},p.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=p.values(t)),t[p.random(t.length-1)]):p.shuffle(t).slice(0,Math.max(0,e))},p.sortBy=function(t,e,i){return e=p.iteratee(e,i),p.pluck(p.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var m=function(t){return function(e,i,n){var s={};return i=p.iteratee(i,n),p.each(e,function(n,r){var o=i(n,r,e);t(s,n,o)}),s}};p.groupBy=m(function(t,e,i){p.has(t,i)?t[i].push(e):t[i]=[e]}),p.indexBy=m(function(t,e,i){t[i]=e}),p.countBy=m(function(t,e,i){p.has(t,i)?t[i]++:t[i]=1}),p.sortedIndex=function(t,e,i,n){i=p.iteratee(i,n,1);for(var s=i(e),r=0,o=t.length;o>r;){var a=r+o>>>1;i(t[a])<s?r=a+1:o=a}return r},p.toArray=function(t){return t?p.isArray(t)?o.call(t):t.length===+t.length?p.map(t,p.identity):p.values(t):[]},p.size=function(t){return null==t?0:t.length===+t.length?t.length:p.keys(t).length},p.partition=function(t,e,i){e=p.iteratee(e,i);var n=[],s=[];return p.each(t,function(t,i,r){(e(t,i,r)?n:s).push(t)}),[n,s]},p.first=p.head=p.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:o.call(t,0,e)},p.initial=function(t,e,i){return o.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},p.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},p.rest=p.tail=p.drop=function(t,e,i){return o.call(t,null==e||i?1:e)},p.compact=function(t){return p.filter(t,p.identity)};var v=function(t,e,i,n){if(e&&p.every(t,p.isArray))return a.apply(n,t);for(var s=0,o=t.length;o>s;s++){var c=t[s];p.isArray(c)||p.isArguments(c)?e?r.apply(n,c):v(c,e,i,n):i||n.push(c)}return n};p.flatten=function(t,e){return v(t,e,!1,[])},p.without=function(t){return p.difference(t,o.call(arguments,1))},p.uniq=p.unique=function(t,e,i,n){if(null==t)return[];p.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=p.iteratee(i,n));for(var s=[],r=[],o=0,a=t.length;a>o;o++){var c=t[o];if(e)o&&r===c||s.push(c),r=c;else if(i){var l=i(c,o,t);p.indexOf(r,l)<0&&(r.push(l),s.push(c))}else p.indexOf(s,c)<0&&s.push(c)}return s},p.union=function(){return p.uniq(v(arguments,!0,!0,[]))},p.intersection=function(t){if(null==t)return[];for(var e=[],i=arguments.length,n=0,s=t.length;s>n;n++){var r=t[n];if(!p.contains(e,r)){for(var o=1;i>o&&p.contains(arguments[o],r);o++);o===i&&e.push(r)}}return e},p.difference=function(t){var e=v(o.call(arguments,1),!0,!0,[]);return p.filter(t,function(t){return!p.contains(e,t)})},p.zip=function(t){if(null==t)return[];for(var e=p.max(arguments,"length").length,i=Array(e),n=0;e>n;n++)i[n]=p.pluck(arguments,n);return i},p.object=function(t,e){if(null==t)return{};for(var i={},n=0,s=t.length;s>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},p.indexOf=function(t,e,i){if(null==t)return-1;var n=0,s=t.length;if(i){if("number"!=typeof i)return n=p.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,s+i):i}for(;s>n;n++)if(t[n]===e)return n;return-1},p.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=t.length;for("number"==typeof i&&(n=0>i?n+i+1:Math.min(n,i+1));--n>=0;)if(t[n]===e)return n;return-1},p.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=Array(n),r=0;n>r;r++,t+=i)s[r]=t;return s};var y=function(){};p.bind=function(t,e){var i,n;if(d&&t.bind===d)return d.apply(t,o.call(arguments,1));if(!p.isFunction(t))throw new TypeError("Bind must be called on a function");return i=o.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(o.call(arguments)));y.prototype=t.prototype;var s=new y;y.prototype=null;var r=t.apply(s,i.concat(o.call(arguments)));return p.isObject(r)?r:s}},p.partial=function(t){var e=o.call(arguments,1);return function(){for(var i=0,n=e.slice(),s=0,r=n.length;r>s;s++)n[s]===p&&(n[s]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},p.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=p.bind(t[i],t);return t},p.memoize=function(t,e){var i=function(n){var s=i.cache,r=e?e.apply(this,arguments):n;return p.has(s,r)||(s[r]=t.apply(this,arguments)),s[r]};return i.cache={},i},p.delay=function(t,e){var i=o.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},p.defer=function(t){return p.delay.apply(p,[t,1].concat(o.call(arguments,1)))},p.throttle=function(t,e,i){var n,s,r,o=null,a=0;i||(i={});var c=function(){a=i.leading===!1?0:p.now(),o=null,r=t.apply(n,s),o||(n=s=null)};return function(){var l=p.now();a||i.leading!==!1||(a=l);var h=e-(l-a);return n=this,s=arguments,0>=h||h>e?(clearTimeout(o),o=null,a=l,r=t.apply(n,s),o||(n=s=null)):o||i.trailing===!1||(o=setTimeout(c,h)),r}},p.debounce=function(t,e,i){var n,s,r,o,a,c=function(){var l=p.now()-o;e>l&&l>0?n=setTimeout(c,e-l):(n=null,i||(a=t.apply(r,s),n||(r=s=null)))};return function(){r=this,s=arguments,o=p.now();var l=i&&!n;return n||(n=setTimeout(c,e)),l&&(a=t.apply(r,s),r=s=null),a}},p.wrap=function(t,e){return p.partial(e,t)},p.negate=function(t){return function(){return!t.apply(this,arguments)}},p.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},p.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},p.before=function(t,e){var i;return function(){return--t>0?i=e.apply(this,arguments):e=null,i}},p.once=p.partial(p.before,2),p.keys=function(t){if(!p.isObject(t))return[];if(u)return u(t);var e=[];for(var i in t)p.has(t,i)&&e.push(i);return e},p.values=function(t){for(var e=p.keys(t),i=e.length,n=Array(i),s=0;i>s;s++)n[s]=t[e[s]];return n},p.pairs=function(t){for(var e=p.keys(t),i=e.length,n=Array(i),s=0;i>s;s++)n[s]=[e[s],t[e[s]]];return n},p.invert=function(t){for(var e={},i=p.keys(t),n=0,s=i.length;s>n;n++)e[t[i[n]]]=i[n];return e},p.functions=p.methods=function(t){var e=[];for(var i in t)p.isFunction(t[i])&&e.push(i);return e.sort()},p.extend=function(t){if(!p.isObject(t))return t;for(var e,i,n=1,s=arguments.length;s>n;n++){e=arguments[n];for(i in e)l.call(e,i)&&(t[i]=e[i])}return t},p.pick=function(t,e,i){var n,s={};if(null==t)return s;if(p.isFunction(e)){e=f(e,i);for(n in t){var r=t[n];e(r,n,t)&&(s[n]=r)}}else{var c=a.apply([],o.call(arguments,1));t=new Object(t);for(var l=0,h=c.length;h>l;l++)n=c[l],n in t&&(s[n]=t[n])}return s},p.omit=function(t,e,i){if(p.isFunction(e))e=p.negate(e);else{var n=p.map(a.apply([],o.call(arguments,1)),String);e=function(t,e){return!p.contains(n,e)}}return p.pick(t,e,i)},p.defaults=function(t){if(!p.isObject(t))return t;for(var e=1,i=arguments.length;i>e;e++){var n=arguments[e];for(var s in n)void 0===t[s]&&(t[s]=n[s])}return t},p.clone=function(t){return p.isObject(t)?p.isArray(t)?t.slice():p.extend({},t):t},p.tap=function(t,e){return e(t),t};var b=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof p&&(t=t._wrapped),e instanceof p&&(e=e._wrapped);var s=c.call(t);if(s!==c.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=i.length;r--;)if(i[r]===t)return n[r]===e;var o=t.constructor,a=e.constructor;if(o!==a&&"constructor"in t&&"constructor"in e&&!(p.isFunction(o)&&o instanceof o&&p.isFunction(a)&&a instanceof a))return!1;i.push(t),n.push(e);var l,h;if("[object Array]"===s){if(l=t.length,h=l===e.length)for(;l--&&(h=b(t[l],e[l],i,n)););}else{var u,d=p.keys(t);if(l=d.length,h=p.keys(e).length===l)for(;l--&&(u=d[l],h=p.has(e,u)&&b(t[u],e[u],i,n)););}return i.pop(),n.pop(),h};p.isEqual=function(t,e){return b(t,e,[],[])},p.isEmpty=function(t){if(null==t)return!0;if(p.isArray(t)||p.isString(t)||p.isArguments(t))return 0===t.length;for(var e in t)if(p.has(t,e))return!1;return!0},p.isElement=function(t){return!(!t||1!==t.nodeType)},p.isArray=h||function(t){return"[object Array]"===c.call(t)},p.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){p["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}}),p.isArguments(arguments)||(p.isArguments=function(t){return p.has(t,"callee")}),"function"!=typeof/./&&(p.isFunction=function(t){return"function"==typeof t||!1}),p.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},p.isNaN=function(t){return p.isNumber(t)&&t!==+t},p.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===c.call(t)},p.isNull=function(t){return null===t},p.isUndefined=function(t){return void 0===t},p.has=function(t,e){return null!=t&&l.call(t,e)},p.noConflict=function(){return t._=e,this},p.identity=function(t){return t},p.constant=function(t){return function(){return t}},p.noop=function(){},p.property=function(t){return function(e){return e[t]}},p.matches=function(t){var e=p.pairs(t),i=e.length;return function(t){if(null==t)return!i;t=new Object(t);for(var n=0;i>n;n++){var s=e[n],r=s[0];if(s[1]!==t[r]||!(r in t))return!1}return!0}},p.times=function(t,e,i){var n=Array(Math.max(0,t));e=f(e,i,1);for(var s=0;t>s;s++)n[s]=e(s);return n},p.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},p.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},x=p.invert(w),_=function(t){var e=function(e){return t[e]},i="(?:"+p.keys(t).join("|")+")",n=RegExp(i),s=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(s,e):t}};p.escape=_(w),p.unescape=_(x),p.result=function(t,e){if(null==t)return void 0;var i=t[e];return p.isFunction(i)?t[e]():i};var S=0;p.uniqueId=function(t){var e=++S+"";return t?t+e:e},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var k=/(.)^/,C={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,K=function(t){return"\\"+C[t]};p.template=function(t,e,i){!e&&i&&(e=i),e=p.defaults({},e,p.templateSettings);var n=RegExp([(e.escape||k).source,(e.interpolate||k).source,(e.evaluate||k).source].join("|")+"|$","g"),s=0,r="__p+='";t.replace(n,function(e,i,n,o,a){return r+=t.slice(s,a).replace(T,K),s=a+e.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var o=new Function(e.variable||"obj","_",r)}catch(a){throw a.source=r,a}var c=function(t){return o.call(this,t,p)},l=e.variable||"obj";return c.source="function("+l+"){\n"+r+"}",c},p.chain=function(t){var e=p(t);return e._chain=!0,e};var P=function(t){return this._chain?p(t).chain():t};p.mixin=function(t){p.each(p.functions(t),function(e){var i=p[e]=t[e];p.prototype[e]=function(){var t=[this._wrapped];return r.apply(t,arguments),P.call(this,i.apply(p,t))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];p.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],P.call(this,i)}}),p.each(["concat","join","slice"],function(t){var e=i[t];p.prototype[t]=function(){return P.call(this,e.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){{var s=t.Backbone,r=[],o=(r.push,r.slice);r.splice}e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!l(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,o,a,c,h,u,d;if(!this._events||!l(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),c=0,h=a.length;h>c;c++)if(t=a[c],o=this._events[t]){if(this._events[t]=s=[],e||n)for(u=0,d=o.length;d>u;u++)r=o[u],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&h(i,e),n&&h(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var o in s)t=s[o],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[o];return this}},c=/\s+/,l=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(c.test(i)){for(var r=i.split(c),o=0,a=r.length;a>o;o++)t[e].apply(t,[r[o]].concat(n));return!1}return!0},h=function(t,e){var i,n=-1,s=t.length,r=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},u={listenTo:"on",listenToOnce:"once"};i.each(u,function(t,e){a[e]=function(e,n,s){var r=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=i.uniqueId("l"));return r[o]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,o,a,c,l,h,u;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;o=n.unset,c=n.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={}),u=this.attributes,h=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(u[s],e)||a.push(s),i.isEqual(h[s],e)?delete this.changed[s]:this.changed[s]=e,o?delete u[s]:u[s]=e;if(!c){a.length&&(this._pending=n);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,u[a[d]],n)}if(l)return this;if(!c)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},N(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,o,a=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},a,s)),void 0===n.parse&&(n.parse=!0);var c=this,l=n.success;return n.success=function(t){c.attributes=a;var e=c.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!c.set(e,n)?!1:(l&&l(c,t,n),void c.trigger("sync",c,t,n))},N(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),o=this.sync(r,this,n),s&&n.wait&&(this.attributes=a),o},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;N(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||O();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(t){d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};i.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,m))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,o,a;for(s=0,r=t.length;r>s;s++)a=t[s]=this.get(t[s]),a&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,o,a,c,l,h,u=e.at,p=this.model,f=this.comparator&&null==u&&e.sort!==!1,m=i.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=e.add,x=e.merge,_=e.remove,S=!f&&w&&_?[]:!1;for(s=0,r=t.length;r>s;s++){if(c=t[s]||{},o=c instanceof d?a=c:c[p.prototype.idAttribute||"id"],l=this.get(o))_&&(b[l.cid]=!0),x&&(c=c===a?a.attributes:c,e.parse&&(c=l.parse(c,e)),l.set(c,e),f&&!h&&l.hasChanged(m)&&(h=!0)),t[s]=l;else if(w){if(a=t[s]=this._prepareModel(c,e),!a)continue;v.push(a),this._addReference(a,e)}a=l||a,!S||!a.isNew()&&b[a.id]||S.push(a),b[a.id]=!0}if(_){for(s=0,r=this.length;r>s;++s)b[(a=this.models[s]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||S&&S.length)if(f&&(h=!0),this.length+=v.length,null!=u)for(s=0,r=v.length;r>s;s++)this.models.splice(u+s,0,v[s]);else{S&&(this.models.length=0);var k=S||v;for(s=0,r=k.length;r>s;s++)this.models.push(k[s])}if(h&&this.sort({silent:!0}),!e.silent){for(s=0,r=v.length;r>s;s++)(a=v[s]).trigger("add",a,this,e);(h||S&&S.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},N(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)
},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){f.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var b=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(w),r=s[1],o=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=S[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(s.url||(o.url=i.result(n,"url")||O()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",s.emulateJSON&&(o.data._method=r);var a=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===o.type||s.emulateJSON||(o.processData=!1),"PATCH"===o.type&&_&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=s.xhr=e.ajax(i.extend(o,s));return n.trigger("request",n,c,s),c};var _=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,K=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,a,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var o=r._extractParameters(t,i);r.execute(s,o),r.trigger.apply(r,["route:"+n].concat(o)),r.trigger("route",n,o),e.history.trigger("route",r,n,o)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(P,"\\$&").replace(C,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace(K,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var E=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,F=/msie [\w.]+/,I=/\/$/,$=/#.*$/;E.started=!1,i.extend(E.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(I,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(D,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=F.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(A,"/"),r&&this._wantsHashChange){var o=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),E.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!E.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace($,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new E;var L=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=f.extend=k.extend=b.extend=E.extend=L;var O=function(){throw new Error('A "url" property or function must be specified')},N=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),!function(){"use strict";function t(t){return t.split("").reverse().join("")}function e(t,e){return t.substring(0,e.length)===e}function i(t,e){return t.slice(-1*e.length)===e}function n(t,e,i){if((t[e]||t[i])&&t[e]===t[i])throw new Error(e)}function s(t){return"number"==typeof t&&isFinite(t)}function r(t,e){var i=Math.pow(10,e);return(Math.round(t*i)/i).toFixed(e)}function o(e,i,n,o,a,c,l,h,u,d,p,f){var g,m,v,y=f,b="",w="";return c&&(f=c(f)),s(f)?(e&&0===parseFloat(f.toFixed(e))&&(f=0),0>f&&(g=!0,f=Math.abs(f)),e!==!1&&(f=r(f,e)),f=f.toString(),-1!==f.indexOf(".")?(m=f.split("."),v=m[0],n&&(b=n+m[1])):v=f,i&&(v=t(v).match(/.{1,3}/g),v=t(v.join(t(i)))),g&&h&&(w+=h),o&&(w+=o),g&&u&&(w+=u),w+=v,w+=b,a&&(w+=a),d&&(w=d(w,y)),w):!1}function a(t,n,r,o,a,c,l,h,u,d,p,f){var g,m="";return p&&(f=p(f)),f&&"string"==typeof f?(h&&e(f,h)&&(f=f.replace(h,""),g=!0),o&&e(f,o)&&(f=f.replace(o,"")),u&&e(f,u)&&(f=f.replace(u,""),g=!0),a&&i(f,a)&&(f=f.slice(0,-1*a.length)),n&&(f=f.split(n).join("")),r&&(f=f.replace(r,".")),g&&(m+="-"),m+=f,m=m.replace(/[^0-9\.\-.]/g,""),""===m?!1:(m=Number(m),l&&(m=l(m)),s(m)?m:!1)):!1}function c(t){var e,i,s,r={};for(e=0;e<u.length;e+=1)if(i=u[e],s=t[i],void 0===s)r[i]="negative"!==i||r.negativeBefore?"mark"===i&&"."!==r.thousand?".":!1:"-";else if("decimals"===i){if(!(s>=0&&8>s))throw new Error(i);r[i]=s}else if("encoder"===i||"decoder"===i||"edit"===i||"undo"===i){if("function"!=typeof s)throw new Error(i);r[i]=s}else{if("string"!=typeof s)throw new Error(i);r[i]=s}return n(r,"mark","thousand"),n(r,"prefix","negative"),n(r,"prefix","negativeBefore"),r}function l(t,e,i){var n,s=[];for(n=0;n<u.length;n+=1)s.push(t[u[n]]);return s.push(i),e.apply("",s)}function h(t){return this instanceof h?void("object"==typeof t&&(t=c(t),this.to=function(e){return l(t,o,e)},this.from=function(e){return l(t,a,e)})):new h(t)}var u=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=h}(),function(t){"use strict";function e(e){return e instanceof t||t.zepto&&t.zepto.isZ(e)}function i(e,i){return"string"==typeof e&&0===e.indexOf("-inline-")?(this.method=i||"html",this.target=this.el=t(e.replace("-inline-","")||"<div/>"),!0):void 0}function n(e){if("string"==typeof e&&0!==e.indexOf("-")){this.method="val";var i=document.createElement("input");return i.name=e,i.type="hidden",this.target=this.el=t(i),!0}}function s(t){return"function"==typeof t?(this.target=!1,this.method=t,!0):void 0}function r(t,i){return e(t)&&!i?(t.is("input, select, textarea")?(this.method="val",this.target=t.on("change.liblink",this.changeHandler)):(this.target=t,this.method="html"),!0):void 0}function o(t,i){return e(t)&&("function"==typeof i||"string"==typeof i&&t[i])?(this.method=i,this.target=t,!0):void 0}function a(e,i,n){var s=this,r=!1;if(this.changeHandler=function(e){var i=s.formatInstance.from(t(this).val());return i===!1||isNaN(i)?(t(this).val(s.lastSetValue),!1):void s.changeHandlerMethod.call("",e,i)},this.el=!1,this.formatInstance=n,t.each(h,function(t,n){return r=n.call(s,e,i),!r}),!r)throw new RangeError("(Link) Invalid Link.")}function c(t){this.items=[],this.elements=[],this.origin=t}function l(e,i,n,s){0===e&&(e=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[e]||(this.linkAPI[e]=new c(this));var r=new a(i,n,s||this.LinkDefaultFormatter);r.target||(r.target=t(this)),r.changeHandlerMethod=this.LinkConfirm(e,r.el),this.linkAPI[e].push(r,r.el),this.LinkUpdate(e)}var h=[i,n,s,r,o];a.prototype.set=function(t){var e=Array.prototype.slice.call(arguments),i=e.slice(1);this.lastSetValue=this.formatInstance.to(t),i.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,i)},c.prototype.push=function(t,e){this.items.push(t),e&&this.elements.push(e)},c.prototype.reconfirm=function(t){var e;for(e=0;e<this.elements.length;e+=1)this.origin.LinkConfirm(t,this.elements[e])},c.prototype.remove=function(){var t;for(t=0;t<this.items.length;t+=1)this.items[t].target.off(".liblink");for(t=0;t<this.elements.length;t+=1)this.elements[t].remove()},c.prototype.change=function(t){if(this.origin.LinkIsEmitting)return!1;this.origin.LinkIsEmitting=!0;var e,i=Array.prototype.slice.call(arguments,1);for(i.unshift(t),e=0;e<this.items.length;e+=1)this.items[e].set.apply(this.items[e],i);this.origin.LinkIsEmitting=!1},t.fn.Link=function(e){var i=this;if(e===!1)return i.each(function(){this.linkAPI&&(t.map(this.linkAPI,function(t){t.remove()}),delete this.linkAPI)});if(void 0===e)e=0;else if("string"!=typeof e)throw new Error("Flag must be string.");return{to:function(t,n,s){return i.each(function(){l.call(this,e,t,n,s)})}}}}(window.jQuery||window.Zepto),function(t){"use strict";function e(e){return t.grep(e,function(i,n){return n===t.inArray(i,e)})}function i(t,e){return Math.round(t/e)*e}function n(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function s(t){var e=Math.pow(10,7);return Number((Math.round(t*e)/e).toFixed(7))}function r(t,e,i){t.addClass(e),setTimeout(function(){t.removeClass(e)},i)}function o(t){return Math.max(Math.min(t,100),0)}function a(e){return t.isArray(e)?e:[e]}function c(t,e){return 100/(e-t)}function l(t,e){return 100*e/(t[1]-t[0])}function h(t,e){return l(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}function u(t,e){return e*(t[1]-t[0])/100+t[0]}function d(t,e){for(var i=1;t>=e[i];)i+=1;return i}function p(t,e,i){if(i>=t.slice(-1)[0])return 100;var n,s,r,o,a=d(i,t);return n=t[a-1],s=t[a],r=e[a-1],o=e[a],r+h([n,s],i)/c(r,o)}function f(t,e,i){if(i>=100)return t.slice(-1)[0];var n,s,r,o,a=d(i,e);return n=t[a-1],s=t[a],r=e[a-1],o=e[a],u([n,s],(i-r)*c(r,o))}function g(t,e,n,s){if(100===s)return s;var r,o,a=d(s,t);return n?(r=t[a-1],o=t[a],s-r>(o-r)/2?o:r):e[a-1]?t[a-1]+i(s-t[a-1],e[a-1]):s}function m(t,e,i){var s;if("number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e))throw new Error("noUiSlider: 'range' contains invalid value.");if(s="min"===t?0:"max"===t?100:parseFloat(t),!n(s)||!n(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");i.xPct.push(s),i.xVal.push(e[0]),s?i.xSteps.push(isNaN(e[1])?!1:e[1]):isNaN(e[1])||(i.xSteps[0]=e[1])}function v(t,e,i){return e?void(i.xSteps[t]=l([i.xVal[t],i.xVal[t+1]],e)/c(i.xPct[t],i.xPct[t+1])):!0}function y(t,e,i,n){this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=e,this.direction=i;var s,r=this;for(s in t)t.hasOwnProperty(s)&&m(s,t[s],r);r.xNumSteps=r.xSteps.slice(0);for(s in r.xNumSteps)r.xNumSteps.hasOwnProperty(s)&&v(Number(s),r.xNumSteps[s],r)}function b(t,e){if(!n(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function w(e,i){if("object"!=typeof i||t.isArray(i))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new y(i,e.snap,e.dir,e.singleStep)}function x(e,i){if(i=a(i),!t.isArray(i)||!i.length||i.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=i.length,e.start=i}function _(t,e){if(t.snap=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function S(t,e){if(t.animate=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function k(t,e){if("lower"===e&&1===t.handles)t.connect=1;else if("upper"===e&&1===t.handles)t.connect=2;else if(e===!0&&2===t.handles)t.connect=3;else{if(e!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");t.connect=0}}function C(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function T(t,e){if(!n(e))throw new Error("noUiSlider: 'margin' option must be numeric.");if(t.margin=t.spectrum.getMargin(e),!t.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function K(t,e){if(!n(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function P(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.connect=[0,2,1,3][t.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function E(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i=e.indexOf("tap")>=0,n=e.indexOf("drag")>=0,s=e.indexOf("fixed")>=0,r=e.indexOf("snap")>=0;t.events={tap:i||r,drag:n,fixed:s,snap:r}}function D(t,e){if(t.format=e,"function"==typeof e.to&&"function"==typeof e.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function A(e){var i,n={margin:0,limit:0,animate:!0,format:Y};return i={step:{r:!1,t:b},start:{r:!0,t:x},connect:{r:!0,t:k},direction:{r:!0,t:P},snap:{r:!1,t:_},animate:{r:!1,t:S},range:{r:!0,t:w},orientation:{r:!1,t:C},margin:{r:!1,t:T},limit:{r:!1,t:K},behaviour:{r:!0,t:E},format:{r:!1,t:D}},e=t.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e),t.each(i,function(t,i){if(void 0===e[t]){if(i.r)throw new Error("noUiSlider: '"+t+"' is required.");return!0}i.t(n,e[t])}),n.style=n.ort?"top":"left",n}function F(t,e,i){var n=t+e[0],s=t+e[1];return i?(0>n&&(s+=Math.abs(n)),s>100&&(n-=s-100),[o(n),o(s)]):[n,s]}function I(t){t.preventDefault();var e,i,n=0===t.type.indexOf("touch"),s=0===t.type.indexOf("mouse"),r=0===t.type.indexOf("pointer"),o=t;return 0===t.type.indexOf("MSPointer")&&(r=!0),t.originalEvent&&(t=t.originalEvent),n&&(e=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY),(s||r)&&(r||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),e=t.clientX+window.pageXOffset,i=t.clientY+window.pageYOffset),o.points=[e,i],o.cursor=s,o}function $(e,i){var n=t("<div><div/></div>").addClass(J[2]),s=["-lower","-upper"];return e&&s.reverse(),n.children().addClass(J[3]+" "+J[3]+s[i]),n}function L(t,e,i){switch(t){case 1:e.addClass(J[7]),i[0].addClass(J[6]);break;case 3:i[1].addClass(J[6]);case 2:i[0].addClass(J[7]);case 0:e.addClass(J[6])}}function O(t,e,i){var n,s=[];for(n=0;t>n;n+=1)s.push($(e,n).appendTo(i));return s}function N(e,i,n){return n.addClass([J[0],J[8+e],J[4+i]].join(" ")),t("<div/>").appendTo(n).addClass(J[1])}function M(e,i,n){function s(){return K[["width","height"][i.ort]]()}function c(t){var e,i=[E.val()];for(e=0;e<t.length;e+=1)E.trigger(t[e],i)}function l(t){return 1===t.length?t[0]:i.dir?t.reverse():t}function h(t){return function(e,i){E.val([t?null:i,t?i:null],!0)}}function u(e){var i=t.inArray(e,M);E[0].linkAPI&&E[0].linkAPI[e]&&E[0].linkAPI[e].change($[i],P[i].children(),E)}function d(e,n){var s=t.inArray(e,M);return n&&n.appendTo(P[s].children()),i.dir&&i.handles>1&&(s=1===s?0:1),h(s)}function p(){var t,e;for(t=0;t<M.length;t+=1)this.linkAPI&&this.linkAPI[e=M[t]]&&this.linkAPI[e].reconfirm(e)}function f(t,e,n,s){return t=t.replace(/\s/g,q+" ")+q,e.on(t,function(t){return E.attr("disabled")?!1:E.hasClass(J[14])?!1:(t=I(t),t.calcPoint=t.points[i.ort],void n(t,s))})}function g(t,e){var i,n=e.handles||P,r=!1,o=100*(t.calcPoint-e.start)/s(),a=n[0][0]!==P[0][0]?1:0;i=F(o,e.positions,n.length>1),r=w(n[0],i[a],1===n.length),n.length>1&&(r=w(n[1],i[a?0:1],!1)||r),r&&c(["slide"])}function m(e){t("."+J[15]).removeClass(J[15]),e.cursor&&t("body").css("cursor","").off(q),W.off(q),E.removeClass(J[12]),c(["set","change"])}function v(e,i){1===i.handles.length&&i.handles[0].children().addClass(J[15]),e.stopPropagation(),f(V.move,W,g,{start:e.calcPoint,handles:i.handles,positions:[D[0],D[P.length-1]]}),f(V.end,W,m,null),e.cursor&&(t("body").css("cursor",t(e.target).css("cursor")),P.length>1&&E.addClass(J[12]),t("body").on("selectstart"+q,!1))}function y(e){var n,o=e.calcPoint,a=0;e.stopPropagation(),t.each(P,function(){a+=this.offset()[i.style]}),a=a/2>o||1===P.length?0:1,o-=K.offset()[i.style],n=100*o/s(),i.events.snap||r(E,J[14],300),w(P[a],n),c(["slide","set","change"]),i.events.snap&&v(e,{handles:[P[a]]})}function b(t){var e,i;if(!t.fixed)for(e=0;e<P.length;e+=1)f(V.start,P[e].children(),v,{handles:[P[e]]});t.tap&&f(V.start,K,y,{handles:P}),t.drag&&(i=K.find("."+J[7]).addClass(J[10]),t.fixed&&(i=i.add(K.children().not(i).children())),f(V.start,i,v,{handles:P}))}function w(t,e,n){var s=t[0]!==P[0][0]?1:0,r=D[0]+i.margin,a=D[1]-i.margin,c=D[0]+i.limit,l=D[1]-i.limit;return P.length>1&&(e=s?Math.max(e,r):Math.min(e,a)),n!==!1&&i.limit&&P.length>1&&(e=s?Math.min(e,c):Math.max(e,l)),e=A.getStep(e),e=o(parseFloat(e.toFixed(7))),e===D[s]?!1:(t.css(i.style,e+"%"),t.is(":first-child")&&t.toggleClass(J[17],e>50),D[s]=e,$[s]=A.fromStepping(e),u(M[s]),!0)}function x(t,e){var n,s,r;for(i.limit&&(t+=1),n=0;t>n;n+=1)s=n%2,r=e[s],null!==r&&r!==!1&&("number"==typeof r&&(r=String(r)),r=i.format.from(r),(r===!1||isNaN(r)||w(P[s],A.toStepping(r),n===3-i.dir)===!1)&&u(M[s]))}function _(t){if(E[0].LinkIsEmitting)return this;var e,n=a(t);return i.dir&&i.handles>1&&n.reverse(),i.animate&&-1!==D[0]&&r(E,J[14],300),e=P.length>1?3:1,1===n.length&&(e=1),x(e,n),c(["set"]),this}function S(){var t,e=[];for(t=0;t<i.handles;t+=1)e[t]=i.format.to($[t]);return l(e)}function k(){return t(this).off(q).removeClass(J.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,n}function C(){var e=t.map(D,function(t,e){var i=A.getApplicableStep(t),n=$[e],s=i[2],r=n-i[2]>=i[1]?i[2]:i[0];return[[r,s]]});return l(e)}function T(){return n}var K,P,E=t(e),D=[-1,-1],A=i.spectrum,$=[],M=["lower","upper"].slice(0,i.handles);if(i.dir&&M.reverse(),e.LinkUpdate=u,e.LinkConfirm=d,e.LinkDefaultFormatter=i.format,e.LinkDefaultFlag="lower",e.reappend=p,E.hasClass(J[0]))throw new Error("Slider was already initialized.");K=N(i.dir,i.ort,E),P=O(i.handles,i.dir,K),L(i.connect,E,P),b(i.events),e.vSet=_,e.vGet=S,e.destroy=k,e.getCurrentStep=C,e.getOriginalOptions=T,e.getInfo=function(){return[A,i.style,i.ort]},E.val(i.start)}function R(t){if(!this.length)throw new Error("noUiSlider: Can't initialize slider on empty selection.");var e=A(t,this);return this.each(function(){M(this,e,t)})}function j(e){return this.each(function(){if(!this.destroy)return void t(this).noUiSlider(e);var i=t(this).val(),n=this.destroy(),s=t.extend({},n,e);t(this).noUiSlider(s),this.reappend(),n.start===s.start&&t(this).val(i)})}function H(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function B(e,i,n,s){if("range"===i||"steps"===i)return e.xVal;if("count"===i){var r,o=100/(n-1),a=0;for(n=[];(r=a++*o)<=100;)n.push(r);i="positions"}return"positions"===i?t.map(n,function(t){return e.fromStepping(s?e.getStep(t):t)}):"values"===i?s?t.map(n,function(t){return e.fromStepping(e.getStep(e.toStepping(t)))}):n:void 0}function z(i,n,s,r){var o=i.direction,a={},c=i.xVal[0],l=i.xVal[i.xVal.length-1],h=!1,u=!1,d=0;return i.direction=0,r=e(r.slice().sort(function(t,e){return t-e})),r[0]!==c&&(r.unshift(c),h=!0),r[r.length-1]!==l&&(r.push(l),u=!0),t.each(r,function(e){var o,c,l,p,f,g,m,v,y,b,w=r[e],x=r[e+1];if("steps"===s&&(o=i.xNumSteps[e]),o||(o=x-w),w!==!1&&void 0!==x)for(c=w;x>=c;c+=o){for(p=i.toStepping(c),f=p-d,v=f/n,y=Math.round(v),b=f/y,l=1;y>=l;l+=1)g=d+l*b,a[g.toFixed(5)]=["x",0];m=t.inArray(c,r)>-1?1:"steps"===s?2:0,!e&&h&&(m=0),c===x&&u||(a[p.toFixed(5)]=[c,m]),d=p}}),i.direction=o,a}function U(e,i,n,s,r,o){function a(t,e){return["-normal","-large","-sub"][t&&r?r(e,t):t]}function c(t,i,n){return'class="'+i+" "+i+"-"+h+" "+i+a(n[1],n[0])+'" style="'+e+": "+t+'%"'}function l(t,e){n&&(t=100-t),u.append("<div "+c(t,"noUi-marker",e)+"></div>"),e[1]&&u.append("<div "+c(t,"noUi-value",e)+">"+o.to(e[0])+"</div>")}var h=["horizontal","vertical"][i],u=t("<div/>");return u.addClass("noUi-pips noUi-pips-"+h),t.each(s,l),u}var W=t(document),G=t.fn.val,q=".nui",V=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},J=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];y.prototype.getMargin=function(t){return 2===this.xPct.length?l(this.xVal,t):!1},y.prototype.toStepping=function(t){return t=p(this.xVal,this.xPct,t),this.direction&&(t=100-t),t},y.prototype.fromStepping=function(t){return this.direction&&(t=100-t),s(f(this.xVal,this.xPct,t))},y.prototype.getStep=function(t){return this.direction&&(t=100-t),t=g(this.xPct,this.xSteps,this.snap,t),this.direction&&(t=100-t),t},y.prototype.getApplicableStep=function(t){var e=d(t,this.xPct),i=100===t?2:1;return[this.xNumSteps[e-2],this.xVal[e-i],this.xNumSteps[e-i]]},y.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var Y={to:function(t){return t.toFixed(2)},from:Number};t.fn.val=function(e){function i(t){return t.hasClass(J[0])?H:G}if(void 0===e){var n=t(this[0]);return i(n).call(n)}var s=t.isFunction(e);return this.each(function(n){var r=e,o=t(this);s&&(r=e.call(this,n,o.val())),i(o).call(o,r)})},t.fn.noUiSlider=function(t,e){switch(t){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(e?j:R).call(this,t)},t.fn.noUiSlider_pips=function(e){var i=e.mode,n=e.density||1,s=e.filter||!1,r=e.values||!1,o=e.format||{to:Math.round},a=e.stepped||!1;return this.each(function(){var e=this.getInfo(),c=B(e[0],i,r,a),l=z(e[0],n,i,c);return t(this).append(U(e[1],e[2],e[0].direction,l,s,o))})}}(window.jQuery||window.Zepto),function(t){function e(t,e){t&&window.console&&window.console.log&&window.console.log("jQuery-LABELAUTY: "+e)}function i(t,e,i){var s,r,o;return null==e?r=o="":(r=e[0],o=null==e[1]?r:e[1]),1==i?(s='<label for="'+t+'"><span class="labelauty-unchecked-image"></span><span class="labelauty-unchecked">'+r+'</span><span class="labelauty-checked-image"></span><span class="labelauty-checked">'+o+"</span></label>",n++):s='<label for="'+t+'"><span class="labelauty-unchecked-image"></span><span class="labelauty-checked-image"></span></label>',s}t.fn.labelauty=function(n){var s=t.extend({development:!1,"class":"labelauty",label:!0,separator:"|",checked_label:"Checked",unchecked_label:"Unchecked",minimum_width:!1,same_width:!0},n);return this.each(function(){var n,r,o,a=t(this),c=!0;if(a.is(":checkbox")===!1&&a.is(":radio")===!1)return this;if(a.addClass(s.class),n=a.attr("data-labelauty"),c=s.label,c===!0&&(null==n||0===n.length?(r=new Array,r[0]=s.unchecked_label,r[1]=s.checked_label):(r=n.split(s.separator),r.length>2?(c=!1,e(s.development,"There's more than two labels. LABELAUTY will not use labels.")):1===r.length&&e(s.development,"There's just one label. LABELAUTY will use this one for both cases."))),a.css({display:"none"}),a.removeAttr("data-labelauty"),o=a.attr("id"),null==o){var l=1+Math.floor(1024e3*Math.random());for(o="labelauty-"+l;0!==t(o).length;)l++,o="labelauty-"+l,e(s.development,"Holy crap, between 1024 thousand numbers, one raised a conflict. Trying again.");a.attr("id",o)}if(a.after(i(o,r,c)),s.minimum_width!==!1&&a.next("label[for="+o+"]").css({"min-width":s.minimum_width}),0!=s.same_width&&1==s.label){var h=a.next("label[for="+o+"]"),u=h.find("span.labelauty-unchecked").width(),d=h.find("span.labelauty-checked").width();u>d?h.find("span.labelauty-checked").width(u):h.find("span.labelauty-unchecked").width(d)}})};var n=0}(jQuery),!function(t){var e=function(e,n){if(this.element=t(e),this.format=i.parseFormat(n.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=t(i.template).appendTo("body").on({click:t.proxy(this.click,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this)}):this.component?this.component.on("click",t.proxy(this.show,this)):this.element.on("click",t.proxy(this.show,this)),this.minViewMode=n.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=n.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=n.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=n.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};e.prototype={constructor:e,show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),!this.isInput;var i=this;t(document).on("mousedown",function(e){0==t(e.target).closest(".datepicker").length&&i.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var t=i.formatDate(this.date,this.format);this.isInput?this.element.prop("value",t):(this.component&&this.element.find("input").prop("value",t),this.element.data("date",t))},setValue:function(t){this.date="string"==typeof t?i.parseDate(t,this.format):new Date(t),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},place:function(){var t=this.component?this.component.offset():this.element.offset();this.picker.css({top:t.top+this.height,left:t.left})},update:function(t){this.date=i.parseDate("string"==typeof t?t:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+i.dates.daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+i.dates.monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").append(t)},fill:function(){var t=new Date(this.viewDate),e=t.getFullYear(),n=t.getMonth(),s=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(i.dates.months[n]+" "+e);var r=new Date(e,n-1,28,0,0,0,0),o=i.getDaysInMonth(r.getFullYear(),r.getMonth());r.setDate(o),r.setDate(o-(r.getDay()-this.weekStart+7)%7);var a=new Date(r);a.setDate(a.getDate()+42),a=a.valueOf();for(var c,l,h,u=[];r.valueOf()<a;)r.getDay()===this.weekStart&&u.push("<tr>"),c=this.onRender(r),l=r.getFullYear(),h=r.getMonth(),n>h&&l===e||e>l?c+=" old":(h>n&&l===e||l>e)&&(c+=" new"),r.valueOf()===s&&-1==c.indexOf("disabled")&&(c+=" active"),u.push('<td class="day '+c+'">'+r.getDate()+"</td>"),r.getDay()===this.weekEnd&&u.push("</tr>"),r.setDate(r.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(u.join(""));var d=this.date.getFullYear(),p=this.picker.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");d===e&&p.eq(this.date.getMonth()).addClass("active"),u="",e=10*parseInt(e/10,10);var f=this.picker.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");
e-=1;for(var g=-1;11>g;g++)u+='<span class="year'+(-1===g||10===g?" old":"")+(d===e?" active":"")+'">'+e+"</span>",e+=1;f.html(u)},click:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.target).closest("span, td, th");if(1===n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+i.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+i.modes[this.viewMode].navFnc].call(this.viewDate)+i.modes[this.viewMode].navStep*("prev"===n[0].className?-1:1)),this.fill(),this.set()}break;case"span":if(n.is(".month")){var s=n.parent().find("span").index(n);this.viewDate.setMonth(s)}else{var r=parseInt(n.text(),10)||0;this.viewDate.setFullYear(r)}0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:i.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(n.is(".day")&&!n.is(".disabled")){var o=parseInt(n.text(),10)||1,s=this.viewDate.getMonth();n.is(".old")?s-=1:n.is(".new")&&(s+=1);var r=this.viewDate.getFullYear();this.date=new Date(r,s,o,0,0,0,0),this.viewDate=new Date(r,s,Math.min(28,o),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:i.modes[this.viewMode].clsName})}}},mousedown:function(t){t.stopPropagation(),t.preventDefault()},showMode:function(t){t&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).show()}},t.fn.datepicker=function(i,n){return this.each(function(){var s=t(this),r=s.data("datepicker"),o="object"==typeof i&&i;r||s.data("datepicker",r=new e(this,t.extend({},t.fn.datepicker.defaults,o))),"string"==typeof i&&r[i](n)})},t.fn.datepicker.defaults={onRender:function(){return""}},t.fn.datepicker.Constructor=e;var i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,i.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},parseFormat:function(t){var e=t.match(/[.\/\-\s].*?/),i=t.split(/\W+/);if(!e||!i||0===i.length)throw new Error("Invalid date format.");return{separator:e,parts:i}},parseDate:function(t,e){var i,n=t.split(e.separator),t=new Date;if(t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),n.length===e.parts.length){for(var s=t.getFullYear(),r=t.getDate(),o=t.getMonth(),a=0,c=e.parts.length;c>a;a++)switch(i=parseInt(n[a],10)||1,e.parts[a]){case"dd":case"d":r=i,t.setDate(i);break;case"mm":case"m":o=i-1,t.setMonth(i-1);break;case"yy":s=2e3+i,t.setFullYear(2e3+i);break;case"yyyy":s=i,t.setFullYear(i)}t=new Date(s,o,r,0,0,0)}return t},formatDate:function(t,e){var i={d:t.getDate(),m:t.getMonth()+1,yy:t.getFullYear().toString().substring(2),yyyy:t.getFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m;for(var t=[],n=0,s=e.parts.length;s>n;n++)t.push(i[e.parts[n]]);return t.join(e.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};i.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+i.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+"</table></div></div>"}(window.jQuery),!function(t){"use strict";function e(t,e){return t.toUpperCase().indexOf(e.toUpperCase())>-1}function i(e){var i=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return t.each(i,function(){e=e.replace(this.re,this.ch)}),e}function n(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+Object.keys(e).join("|")+")",n=new RegExp(i),s=new RegExp(i,"g"),r=null==t?"":""+t;return n.test(r)?r.replace(s,function(t){return e[t]}):r}function s(e,i){var n=arguments,s=e,e=n[0],i=n[1];[].shift.apply(n),"undefined"==typeof e&&(e=s);var o,a=this.each(function(){var s=t(this);if(s.is("select")){var a=s.data("selectpicker"),c="object"==typeof e&&e;if(a){if(c)for(var l in c)c.hasOwnProperty(l)&&(a.options[l]=c[l])}else{var h=t.extend({},r.DEFAULTS,t.fn.selectpicker.defaults||{},s.data(),c);s.data("selectpicker",a=new r(this,h,i))}"string"==typeof e&&(o=a[e]instanceof Function?a[e].apply(a,n):a.options[e])}});return"undefined"!=typeof o?o:a}t.expr[":"].icontains=function(i,n,s){return e(t(i).text(),s[3])},t.expr[":"].aicontains=function(i,n,s){return e(t(i).data("normalizedText")||t(i).text(),s[3])};var r=function(e,i,n){n&&(n.stopPropagation(),n.preventDefault()),this.$element=t(e),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=i,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=r.prototype.val,this.render=r.prototype.render,this.refresh=r.prototype.refresh,this.setStyle=r.prototype.setStyle,this.selectAll=r.prototype.selectAll,this.deselectAll=r.prototype.deselectAll,this.destroy=r.prototype.remove,this.remove=r.prototype.remove,this.show=r.prototype.show,this.hide=r.prototype.hide,this.init()};r.VERSION="1.6.3",r.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:function(t){return 1==t?"{0} item selected":"{0} items selected"},maxOptionsText:function(t,e){var i=[];return i[0]=1==t?"Limit reached ({n} item max)":"Limit reached ({n} items max)",i[1]=1==e?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)",i},selectAllText:"Select All",deselectAllText:"Deselect All",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,searchAccentInsensitive:!1},r.prototype={constructor:r,init:function(){var e=this,i=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof i&&(this.$button.attr("data-id",i),t('label[for="'+i+'"]').click(function(t){t.preventDefault(),e.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile()},createDropdown:function(){var e=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",n=this.autofocus?" autofocus":"",s=this.$element.parents().hasClass("form-group-lg")?" btn-lg":this.$element.parents().hasClass("form-group-sm")?" btn-sm":"",r=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",o=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /></div>':"",a=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">'+this.options.selectAllText+'</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">'+this.options.deselectAllText+"</button></div></div>":"",c='<div class="btn-group bootstrap-select'+e+i+'"><button type="button" class="btn dropdown-toggle selectpicker'+s+'" data-toggle="dropdown"'+n+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+r+o+a+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>';return t(c)},createView:function(){var t=this.createDropdown(),e=this.createLi();return t.find("ul").append(e),t},reloadLi:function(){this.destroyLi();var t=this.createLi();this.$menu.find("ul").append(t)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var e=this,s=[],r=0,o=function(t,e,i){return"<li"+("undefined"!=typeof i?' class="'+i+'"':"")+("undefined"!=typeof e|null===e?' data-original-index="'+e+'"':"")+">"+t+"</li>"},a=function(t,s,r,o){var a=i(n(t));return'<a tabindex="0"'+("undefined"!=typeof s?' class="'+s+'"':"")+("undefined"!=typeof r?' style="'+r+'"':"")+("undefined"!=typeof o?'data-optgroup="'+o+'"':"")+' data-normalized-text="'+a+'">'+t+'<span class="'+e.options.iconBase+" "+e.options.tickIcon+' check-mark"></span></a>'};return this.$element.find("option").each(function(){var i=t(this),n=i.attr("class")||"",c=i.attr("style"),l=i.data("content")?i.data("content"):i.html(),h="undefined"!=typeof i.data("subtext")?'<small class="muted text-muted">'+i.data("subtext")+"</small>":"",u="undefined"!=typeof i.data("icon")?'<span class="'+e.options.iconBase+" "+i.data("icon")+'"></span> ':"",d=i.is(":disabled")||i.parent().is(":disabled"),p=i[0].index;if(""!==u&&d&&(u="<span>"+u+"</span>"),i.data("content")||(l=u+'<span class="text">'+l+h+"</span>"),!e.options.hideDisabled||!d)if(i.parent().is("optgroup")&&i.data("divider")!==!0){if(0===i.index()){r+=1;var f=i.parent().attr("label"),g="undefined"!=typeof i.parent().data("subtext")?'<small class="muted text-muted">'+i.parent().data("subtext")+"</small>":"",m=i.parent().data("icon")?'<span class="'+e.options.iconBase+" "+i.parent().data("icon")+'"></span> ':"";f=m+'<span class="text">'+f+g+"</span>",0!==p&&s.length>0&&s.push(o("",null,"divider")),s.push(o(f,null,"dropdown-header"))}s.push(o(a(l,"opt "+n,c,r),p))}else s.push(i.data("divider")===!0?o("",p,"divider"):i.data("hidden")===!0?o(a(l,n,c),p,"hide is-hidden"):o(a(l,n,c),p))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),t(s.join(""))},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(e){var i=this;e!==!1&&this.$element.find("option").each(function(e){i.setDisabled(e,t(this).is(":disabled")||t(this).parent().is(":disabled")),i.setSelected(e,t(this).is(":selected"))}),this.tabIndex();var s=this.options.hideDisabled?":not([disabled])":"",r=this.$element.find("option:selected"+s).map(function(){var e,n=t(this),s=n.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+n.data("icon")+'"></i> ':"";return e=i.options.showSubtext&&n.attr("data-subtext")&&!i.multiple?' <small class="muted text-muted">'+n.data("subtext")+"</small>":"",n.data("content")&&i.options.showContent?n.data("content"):"undefined"!=typeof n.attr("title")?n.attr("title"):s+n.html()+e}).toArray(),o=this.multiple?r.join(this.options.multipleSeparator):r[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var a=this.options.selectedTextFormat.split(">");if(a.length>1&&r.length>a[1]||1==a.length&&r.length>=2){s=this.options.hideDisabled?", [disabled]":"";var c=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+s).length,l="function"==typeof this.options.countSelectedText?this.options.countSelectedText(r.length,c):this.options.countSelectedText;o=l.replace("{0}",r.length.toString()).replace("{1}",c.toString())}}this.options.title=this.$element.attr("title"),"static"==this.options.selectedTextFormat&&(o=this.options.title),o||(o="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",n(o)),this.$newElement.find(".filter-option").html(o)},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var i=t?t:this.options.style;"add"==e?this.$button.addClass(i):"remove"==e?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(this.options.size!==!1){var t=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),e=t.addClass("open").find("> .dropdown-menu"),i=e.find("li").not(".divider").not(".dropdown-header").filter(":visible").children("a").outerHeight(),n=this.options.header?e.find(".popover-title").outerHeight():0,s=this.options.liveSearch?e.find(".bs-searchbox").outerHeight():0,r=this.options.actionsBox?e.find(".bs-actionsbox").outerHeight():0;t.remove(),this.$newElement.data("liHeight",i).data("headerHeight",n).data("searchHeight",s).data("actionsHeight",r)}},setSize:function(){this.findLis();var e,i,n,s=this,r=this.$menu,o=r.find(".inner"),a=this.$newElement.outerHeight(),c=this.$newElement.data("liHeight"),l=this.$newElement.data("headerHeight"),h=this.$newElement.data("searchHeight"),u=this.$newElement.data("actionsHeight"),d=this.$lis.filter(".divider").outerHeight(!0),p=parseInt(r.css("padding-top"))+parseInt(r.css("padding-bottom"))+parseInt(r.css("border-top-width"))+parseInt(r.css("border-bottom-width")),f=this.options.hideDisabled?", .disabled":"",g=t(window),m=p+parseInt(r.css("margin-top"))+parseInt(r.css("margin-bottom"))+2,v=function(){i=s.$newElement.offset().top-g.scrollTop(),n=g.height()-i-a};if(v(),this.options.header&&r.css("padding-top",0),"auto"==this.options.size){var y=function(){var t,a=s.$lis.not(".hide");v(),e=n-m,s.options.dropupAuto&&s.$newElement.toggleClass("dropup",i>n&&e-m<r.height()),s.$newElement.hasClass("dropup")&&(e=i-m),t=a.length+a.filter(".dropdown-header").length>3?3*c+m-2:0,r.css({"max-height":e+"px",overflow:"hidden","min-height":t+l+h+u+"px"}),o.css({"max-height":e-l-h-u-p+"px","overflow-y":"auto","min-height":Math.max(t-p,0)+"px"})};y(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",y),t(window).off("resize.getSize").on("resize.getSize",y),t(window).off("scroll.getSize").on("scroll.getSize",y)}else if(this.options.size&&"auto"!=this.options.size&&r.find("li"+f).length>this.options.size){var b=this.$lis.not(".divider"+f).find(" > *").slice(0,this.options.size).last().parent().index(),w=this.$lis.slice(0,b+1).filter(".divider").length;e=c*this.options.size+w*d+p,s.options.dropupAuto&&this.$newElement.toggleClass("dropup",i>n&&e<r.height()),r.css({"max-height":e+l+h+u+"px",overflow:"hidden"}),o.css({"max-height":e-p+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var t=this.$newElement.clone().appendTo("body"),e=t.find("> .dropdown-menu").css("width"),i=t.css("width","auto").find("> button").css("width");t.remove(),this.$newElement.css("width",Math.max(parseInt(e),parseInt(i))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var e,i,n=this,s="<div />",r=t(s),o=function(t){r.addClass(t.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",t.hasClass("dropup")),e=t.offset(),i=t.hasClass("dropup")?0:t[0].offsetHeight,r.css({top:e.top+i,left:e.left,width:t[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){n.isDisabled()||(o(t(this)),r.appendTo(n.options.container),r.toggleClass("open",!t(this).hasClass("open")),r.append(n.$menu))}),t(window).resize(function(){o(n.$newElement)}),t(window).on("scroll",function(){o(n.$newElement)}),t("html").on("click",function(e){t(e.target).closest(n.$newElement).length<1&&r.removeClass("open")})},setSelected:function(t,e){this.findLis(),this.$lis.filter('[data-original-index="'+t+'"]').toggleClass("selected",e)},setDisabled:function(t,e){this.findLis(),e?this.$lis.filter('[data-original-index="'+t+'"]').addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+t+'"]').removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var t=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!t.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var e=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(t){t.stopPropagation()}),this.$newElement.on("click",function(){e.setSize(),e.options.liveSearch||e.multiple||setTimeout(function(){e.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(i){var n=t(this),s=n.parent().data("originalIndex"),r=e.$element.val(),o=e.$element.prop("selectedIndex");if(e.multiple&&i.stopPropagation(),i.preventDefault(),!e.isDisabled()&&!n.parent().hasClass("disabled")){var a=e.$element.find("option"),c=a.eq(s),l=c.prop("selected"),h=c.parent("optgroup"),u=e.options.maxOptions,d=h.data("maxOptions")||!1;if(e.multiple){if(c.prop("selected",!l),e.setSelected(s,!l),n.blur(),u!==!1||d!==!1){var p=u<a.filter(":selected").length,f=d<h.find("option:selected").length;if(u&&p||d&&f)if(u&&1==u)a.prop("selected",!1),c.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(s,!0);else if(d&&1==d){h.find("option:selected").prop("selected",!1),c.prop("selected",!0);var g=n.data("optgroup");e.$menu.find(".selected").has('a[data-optgroup="'+g+'"]').removeClass("selected"),e.setSelected(s,!0)}else{var m="function"==typeof e.options.maxOptionsText?e.options.maxOptionsText(u,d):e.options.maxOptionsText,v=m[0].replace("{n}",u),y=m[1].replace("{n}",d),b=t('<div class="notify"></div>');m[2]&&(v=v.replace("{var}",m[2][u>1?0:1]),y=y.replace("{var}",m[2][d>1?0:1])),c.prop("selected",!1),e.$menu.append(b),u&&p&&(b.append(t("<div>"+v+"</div>")),e.$element.trigger("maxReached.bs.select")),d&&f&&(b.append(t("<div>"+y+"</div>")),e.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){e.setSelected(s,!1)},10),b.delay(750).fadeOut(300,function(){t(this).remove()})}}}else a.prop("selected",!1),c.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(s,!0);e.multiple?e.options.liveSearch&&e.$searchbox.focus():e.$button.focus(),(r!=e.$element.val()&&e.multiple||o!=e.$element.prop("selectedIndex")&&!e.multiple)&&e.$element.change()}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(t){t.target==this&&(t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(t){t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){e.$button.focus()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){e.options.liveSearch?e.$searchbox.focus():e.$button.focus(),i.preventDefault(),i.stopPropagation(),t(this).is(".bs-select-all")?e.selectAll():e.deselectAll(),e.$element.change()}),this.$element.change(function(){e.render(!1)})},liveSearchListener:function(){var e=this,s=t('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){e.$menu.find(".active").removeClass("active"),e.$searchbox.val()&&(e.$searchbox.val(""),e.$lis.not(".is-hidden").removeClass("hide"),s.parent().length&&s.remove()),e.multiple||e.$menu.find(".selected").addClass("active"),setTimeout(function(){e.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(t){t.stopPropagation()}),this.$searchbox.on("input propertychange",function(){e.$searchbox.val()?(e.options.searchAccentInsensitive?e.$lis.not(".is-hidden").removeClass("hide").find("a").not(":aicontains("+i(e.$searchbox.val())+")").parent().addClass("hide"):e.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+e.$searchbox.val()+")").parent().addClass("hide"),e.$menu.find("li").filter(":visible:not(.no-results)").length?s.parent().length&&s.remove():(s.parent().length&&s.remove(),s.html(e.options.noneResultsText+' "'+n(e.$searchbox.val())+'"').show(),e.$menu.find("li").last().after(s))):(e.$lis.not(".is-hidden").removeClass("hide"),s.parent().length&&s.remove()),e.$menu.find("li.active").removeClass("active"),e.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),t(this).focus()})},val:function(t){return"undefined"!=typeof t?(this.$element.val(t),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").not(".selected").filter(":visible").find("a").click()},deselectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").filter(".selected").filter(":visible").find("a").click()},keydown:function(e){var n,s,r,o,a,c,l,h,u,d=t(this),p=d.is("input")?d.parent().parent():d.parent(),f=p.data("this"),g={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(f.options.liveSearch&&(p=d.parent().parent()),f.options.container&&(p=f.$menu),n=t("[role=menu] li a",p),u=f.$menu.parent().hasClass("open"),!u&&/([0-9]|[A-z])/.test(String.fromCharCode(e.keyCode))&&(f.options.container?f.$newElement.trigger("click"):(f.setSize(),f.$menu.parent().addClass("open"),u=!0),f.$searchbox.focus()),f.options.liveSearch&&(/(^9$|27)/.test(e.keyCode.toString(10))&&u&&0===f.$menu.find(".active").length&&(e.preventDefault(),f.$menu.parent().removeClass("open"),f.$button.focus()),n=t("[role=menu] li:not(.divider):not(.dropdown-header):visible",p),d.val()||/(38|40)/.test(e.keyCode.toString(10))||0===n.filter(".active").length&&(n=f.$newElement.find("li").filter(f.options.searchAccentInsensitive?":aicontains("+i(g[e.keyCode])+")":":icontains("+g[e.keyCode]+")"))),n.length){if(/(38|40)/.test(e.keyCode.toString(10)))s=n.index(n.filter(":focus")),o=n.parent(":not(.disabled):visible").first().index(),a=n.parent(":not(.disabled):visible").last().index(),r=n.eq(s).parent().nextAll(":not(.disabled):visible").eq(0).index(),c=n.eq(s).parent().prevAll(":not(.disabled):visible").eq(0).index(),l=n.eq(r).parent().prevAll(":not(.disabled):visible").eq(0).index(),f.options.liveSearch&&(n.each(function(e){t(this).is(":not(.disabled)")&&t(this).data("index",e)}),s=n.index(n.filter(".active")),o=n.filter(":not(.disabled):visible").first().data("index"),a=n.filter(":not(.disabled):visible").last().data("index"),r=n.eq(s).nextAll(":not(.disabled):visible").eq(0).data("index"),c=n.eq(s).prevAll(":not(.disabled):visible").eq(0).data("index"),l=n.eq(r).prevAll(":not(.disabled):visible").eq(0).data("index")),h=d.data("prevIndex"),38==e.keyCode&&(f.options.liveSearch&&(s-=1),s!=l&&s>c&&(s=c),o>s&&(s=o),s==h&&(s=a)),40==e.keyCode&&(f.options.liveSearch&&(s+=1),-1==s&&(s=0),s!=l&&r>s&&(s=r),s>a&&(s=a),s==h&&(s=o)),d.data("prevIndex",s),f.options.liveSearch?(e.preventDefault(),d.is(".dropdown-toggle")||(n.removeClass("active"),n.eq(s).addClass("active").find("a").focus(),d.focus())):n.eq(s).focus();else if(!d.is("input")){var m,v,y=[];n.each(function(){t(this).parent().is(":not(.disabled)")&&t.trim(t(this).text().toLowerCase()).substring(0,1)==g[e.keyCode]&&y.push(t(this).parent().index())}),m=t(document).data("keycount"),m++,t(document).data("keycount",m),v=t.trim(t(":focus").text().toLowerCase()).substring(0,1),v!=g[e.keyCode]?(m=1,t(document).data("keycount",m)):m>=y.length&&(t(document).data("keycount",0),m>y.length&&(m=1)),n.eq(y[m-1]).focus()}(/(13|32)/.test(e.keyCode.toString(10))||/(^9$)/.test(e.keyCode.toString(10))&&f.options.selectOnTab)&&u&&(/(32)/.test(e.keyCode.toString(10))||e.preventDefault(),f.options.liveSearch?/(32)/.test(e.keyCode.toString(10))||(f.$menu.find(".active a").click(),d.focus()):t(":focus").click(),t(document).data("keycount",0)),(/(^9$|27)/.test(e.keyCode.toString(10))&&u&&(f.multiple||f.options.liveSearch)||/(27)/.test(e.keyCode.toString(10))&&!u)&&(f.$menu.parent().removeClass("open"),f.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var o=t.fn.selectpicker;t.fn.selectpicker=s,t.fn.selectpicker.Constructor=r,t.fn.selectpicker.noConflict=function(){return t.fn.selectpicker=o,this},t(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",r.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(t){t.stopPropagation()}),t(window).on("load.bs.select.data-api",function(){t(".selectpicker").each(function(){var e=t(this);s.call(e,e.data())})})}(jQuery),function(t){t.fn.serializeJSON=function(e){var i,n,s,r,o,a,c;return a=t.serializeJSON,c=a.optsWithDefaults(e),a.validateOptions(c),n=this.serializeArray(),a.readCheckboxUncheckedValues(n,this,c),i={},t.each(n,function(t,e){s=a.splitInputNameIntoKeysArray(e.name),r=s.pop(),"skip"!==r&&(o=a.parseValue(e.value,r,c),c.parseWithFunction&&"_"===r&&(o=c.parseWithFunction(o,e.name)),a.deepSet(i,s,o,c))}),i},t.serializeJSON={defaultOptions:{parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,checkboxUncheckedValue:void 0,useIntKeysAsArrayIndex:!1},optsWithDefaults:function(e){var i,n;return null==e&&(e={}),i=t.serializeJSON,n=i.optWithDefaults("parseAll",e),{parseNumbers:n||i.optWithDefaults("parseNumbers",e),parseBooleans:n||i.optWithDefaults("parseBooleans",e),parseNulls:n||i.optWithDefaults("parseNulls",e),parseWithFunction:i.optWithDefaults("parseWithFunction",e),checkboxUncheckedValue:i.optWithDefaults("checkboxUncheckedValue",e),useIntKeysAsArrayIndex:i.optWithDefaults("useIntKeysAsArrayIndex",e)}},optWithDefaults:function(e,i){return i[e]!==!1&&""!==i[e]&&(i[e]||t.serializeJSON.defaultOptions[e])},validateOptions:function(t){var e,i;i=["parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","checkboxUncheckedValue","useIntKeysAsArrayIndex"];for(e in t)if(-1===i.indexOf(e))throw new Error("serializeJSON ERROR: invalid option '"+e+"'. Please use one of "+i.join(","))},parseValue:function(e,i,n){var s;return s=t.serializeJSON,"string"==i?e:"number"==i||n.parseNumbers&&s.isNumeric(e)?Number(e):"boolean"==i||n.parseBooleans&&("true"===e||"false"===e)?-1===["false","null","undefined","","0"].indexOf(e):"null"==i||n.parseNulls&&"null"==e?-1!==["false","null","undefined","","0"].indexOf(e)?null:e:"array"==i||"object"==i?JSON.parse(e):"auto"==i?s.parseValue(e,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0}):e},isObject:function(t){return t===Object(t)},isUndefined:function(t){return void 0===t},isValidArrayIndex:function(t){return/^[0-9]+$/.test(String(t))},isNumeric:function(t){return t-parseFloat(t)>=0},splitInputNameIntoKeysArray:function(e){var i,n,s,r,o;return o=t.serializeJSON,r=o.extractTypeFromInputName(e),n=r[0],s=r[1],i=n.split("["),i=t.map(i,function(t){return t.replace(/]/g,"")}),""===i[0]&&i.shift(),i.push(s),i},extractTypeFromInputName:function(e){var i,n;if(n=t.serializeJSON,i=e.match(/(.*):([^:]+)$/)){var s=["string","number","boolean","null","array","object","skip","auto"];if(-1!==s.indexOf(i[2]))return[i[1],i[2]];throw new Error("serializeJSON ERROR: Invalid type "+i[2]+" found in input name '"+e+"', please use one of "+s.join(", "))}return[e,"_"]},deepSet:function(e,i,n,s){var r,o,a,c,l,h;if(null==s&&(s={}),h=t.serializeJSON,h.isUndefined(e))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!i||0===i.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");r=i[0],1===i.length?""===r?e.push(n):e[r]=n:(o=i[1],""===r&&(c=e.length-1,l=e[c],r=h.isObject(l)&&(h.isUndefined(l[o])||i.length>2)?c:c+1),h.isUndefined(e[r])&&(e[r]=""===o?[]:s.useIntKeysAsArrayIndex&&h.isValidArrayIndex(o)?[]:{}),a=i.slice(1),h.deepSet(e[r],a,n,s))},readCheckboxUncheckedValues:function(e,i,n){var s,r,o,a,c;null==n&&(n={}),c=t.serializeJSON,s="input[type=checkbox][name]:not(:checked)",r=i.find(s).add(i.filter(s)),r.each(function(i,s){o=t(s),a=o.attr("data-unchecked-value"),a?e.push({name:s.name,value:a}):c.isUndefined(n.checkboxUncheckedValue)||e.push({name:s.name,value:n.checkboxUncheckedValue})})}}}(window.jQuery||window.Zepto||window.$),function(t){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){var e=t[0];return e.offsetWidth>0&&e.offsetHeight>0}function i(e){if(e.minTime&&(e.minTime=w(e.minTime)),e.maxTime&&(e.maxTime=w(e.maxTime)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=w(e.durationTime)),"now"==e.scrollDefault?e.scrollDefault=w(new Date):e.scrollDefault?e.scrollDefault=w(e.scrollDefault):e.minTime&&(e.scrollDefault=e.minTime),e.scrollDefault&&(e.scrollDefault=r(e.scrollDefault,e)),"string"===t.type(e.timeFormat)&&e.timeFormat.match(/[gh]/)&&(e._twelveHourTime=!0),e.disableTimeRanges.length>0){for(var i in e.disableTimeRanges)e.disableTimeRanges[i]=[w(e.disableTimeRanges[i][0]),w(e.disableTimeRanges[i][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(t,e){return t[0]-e[0]});for(var i=e.disableTimeRanges.length-1;i>0;i--)e.disableTimeRanges[i][0]<=e.disableTimeRanges[i-1][1]&&(e.disableTimeRanges[i-1]=[Math.min(e.disableTimeRanges[i][0],e.disableTimeRanges[i-1][0]),Math.max(e.disableTimeRanges[i][1],e.disableTimeRanges[i-1][1])],e.disableTimeRanges.splice(i,1))}return e}function n(e){var i=e.data("timepicker-settings"),n=e.data("timepicker-list");if(n&&n.length&&(n.remove(),e.data("timepicker-list",!1)),i.useSelect){n=t("<select />",{"class":"ui-timepicker-select"});var r=n}else{n=t("<ul />",{"class":"ui-timepicker-list"});var r=t("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});r.css({display:"none",position:"absolute"}).append(n)}if(i.noneOption)if(i.noneOption===!0&&(i.noneOption=i.useSelect?"Time...":"None"),t.isArray(i.noneOption)){for(var a in i.noneOption)if(parseInt(a,10)==a){var c=s(i.noneOption[a],i.useSelect);n.append(c)}}else{var c=s(i.noneOption,i.useSelect);n.append(c)
}i.className&&r.addClass(i.className),null===i.minTime&&null===i.durationTime||!i.showDuration||(r.addClass("ui-timepicker-with-duration"),r.addClass("ui-timepicker-step-"+i.step));var h=i.minTime;"function"==typeof i.durationTime?h=w(i.durationTime()):null!==i.durationTime&&(h=i.durationTime);var d=null!==i.minTime?i.minTime:0,p=null!==i.maxTime?i.maxTime:d+_-1;d>=p&&(p+=_),p===_-1&&"string"===t.type(i.timeFormat)&&-1!==i.timeFormat.indexOf("H")&&(p=_);for(var g=i.disableTimeRanges,m=0,x=g.length,a=d;p>=a;a+=60*i.step){var S=a,C=b(S,i.timeFormat);if(i.useSelect){var T=t("<option />",{value:C});T.text(C)}else{var T=t("<li />");T.data("time",86400>=S?S:S%86400),T.text(C)}if((null!==i.minTime||null!==i.durationTime)&&i.showDuration){var K=y(a-h,i.step);if(i.useSelect)T.text(T.text()+" ("+K+")");else{var P=t("<span />",{"class":"ui-timepicker-duration"});P.text(" ("+K+")"),T.append(P)}}x>m&&(S>=g[m][1]&&(m+=1),g[m]&&S>=g[m][0]&&S<g[m][1]&&(i.useSelect?T.prop("disabled",!0):T.addClass("ui-timepicker-disabled"))),n.append(T)}if(r.data("timepicker-input",e),e.data("timepicker-list",r),i.useSelect)e.val()&&n.val(o(e.val(),i)),n.on("focus",function(){t(this).data("timepicker-input").trigger("showTimepicker")}),n.on("blur",function(){t(this).data("timepicker-input").trigger("hideTimepicker")}),n.on("change",function(){f(e,t(this).val(),"select")}),f(e,n.val()),e.hide().after(n);else{var E=i.appendTo;"string"==typeof E?E=t(E):"function"==typeof E&&(E=E(e)),E.append(r),u(e,n),n.on("mousedown","li",function(){e.off("focus.timepicker"),e.on("focus.timepicker-ie-hack",function(){e.off("focus.timepicker-ie-hack"),e.on("focus.timepicker",k.show)}),l(e)||e[0].focus(),n.find("li").removeClass("ui-timepicker-selected"),t(this).addClass("ui-timepicker-selected"),v(e)&&(e.trigger("hideTimepicker"),r.hide())})}}function s(e,i){var n,s,r;return"object"==typeof e?(n=e.label,s=e.className,r=e.value):"string"==typeof e?n=e:t.error("Invalid noneOption value"),i?t("<option />",{value:r,"class":s,text:n}):t("<li />",{"class":s,text:n}).data("time",r)}function r(e,i){if(t.isNumeric(e)||(e=w(e)),null===e)return null;var n=e%(60*i.step);return n>=30*i.step?e+=60*i.step-n:e-=n,e}function o(t,e){return t=r(t,e),null!==t?b(t,e.timeFormat):void 0}function a(){return new Date(1970,1,1,0,0,0)}function c(e){var i=t(e.target),n=i.closest(".ui-timepicker-input");0===n.length&&0===i.closest(".ui-timepicker-wrapper").length&&(k.hide(),t(document).unbind(".ui-timepicker"))}function l(t){var e=t.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&e.disableTouchKeyboard}function h(e,i,n){if(!n&&0!==n)return!1;var s=e.data("timepicker-settings"),r=!1,o=30*s.step;return i.find("li").each(function(e,i){var s=t(i);if("number"==typeof s.data("time")){var a=s.data("time")-n;return Math.abs(a)<o||a==o?(r=s,!1):void 0}}),r}function u(t,e){e.find("li").removeClass("ui-timepicker-selected");var i=w(p(t),t.data("timepicker-settings"));if(null!==i){var n=h(t,e,i);if(n){var s=n.offset().top-e.offset().top;(s+n.outerHeight()>e.outerHeight()||0>s)&&e.scrollTop(e.scrollTop()+n.position().top-n.outerHeight()),n.addClass("ui-timepicker-selected")}}}function d(e,i){if(""!==this.value&&"timepicker"!=i){{var n=t(this);n.data("timepicker-list")}if(!n.is(":focus")||e&&"change"==e.type){var s=w(this.value);if(null===s)return void n.trigger("timeFormatError");var r=n.data("timepicker-settings"),o=!1;if(null!==r.minTime&&s<r.minTime?o=!0:null!==r.maxTime&&s>r.maxTime&&(o=!0),t.each(r.disableTimeRanges,function(){return s>=this[0]&&s<this[1]?(o=!0,!1):void 0}),r.forceRoundTime){var a=s%(60*r.step);a>=30*r.step?s+=60*r.step-a:s-=a}var c=b(s,r.timeFormat);o?f(n,c,"error")&&n.trigger("timeRangeError"):f(n,c)}}}function p(t){return t.is("input")?t.val():t.data("ui-timepicker-value")}function f(t,e,i){if(t.is("input")){t.val(e);var n=t.data("timepicker-settings");n.useSelect&&"select"!=i&&t.data("timepicker-list").val(o(e,n))}return t.data("ui-timepicker-value")!=e?(t.data("ui-timepicker-value",e),"select"==i?t.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=i&&t.trigger("changeTime"),!0):(t.trigger("selectTime"),!1)}function g(i){var n=t(this),s=n.data("timepicker-list");if(!s||!e(s)){if(40!=i.keyCode)return!0;k.show.call(n.get(0)),s=n.data("timepicker-list"),l(n)||n.focus()}switch(i.keyCode){case 13:return v(n)&&k.hide.apply(this),i.preventDefault(),!1;case 38:var r=s.find(".ui-timepicker-selected");return r.length?r.is(":first-child")||(r.removeClass("ui-timepicker-selected"),r.prev().addClass("ui-timepicker-selected"),r.prev().position().top<r.outerHeight()&&s.scrollTop(s.scrollTop()-r.outerHeight())):(s.find("li").each(function(e,i){return t(i).position().top>0?(r=t(i),!1):void 0}),r.addClass("ui-timepicker-selected")),!1;case 40:return r=s.find(".ui-timepicker-selected"),0===r.length?(s.find("li").each(function(e,i){return t(i).position().top>0?(r=t(i),!1):void 0}),r.addClass("ui-timepicker-selected")):r.is(":last-child")||(r.removeClass("ui-timepicker-selected"),r.next().addClass("ui-timepicker-selected"),r.next().position().top+2*r.outerHeight()>s.outerHeight()&&s.scrollTop(s.scrollTop()+r.outerHeight())),!1;case 27:s.find("li").removeClass("ui-timepicker-selected"),k.hide();break;case 9:k.hide();break;default:return!0}}function m(i){var n=t(this),s=n.data("timepicker-list");if(!s||!e(s))return!0;if(!n.data("timepicker-settings").typeaheadHighlight)return s.find("li").removeClass("ui-timepicker-selected"),!0;switch(i.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:u(n,s);break;default:return}}function v(t){var e=t.data("timepicker-settings"),i=t.data("timepicker-list"),n=null,s=i.find(".ui-timepicker-selected");if(s.hasClass("ui-timepicker-disabled"))return!1;if(s.length&&(n=s.data("time")),null!==n)if("string"==typeof n)t.val(n),t.trigger("selectTime").trigger("changeTime").trigger("change","timepicker");else{var r=b(n,e.timeFormat);f(t,r,"select")}return!0}function y(t,e){t=Math.abs(t);var i,n,s=Math.round(t/60),r=[];return 60>s?r=[s,S.mins]:(i=Math.floor(s/60),n=s%60,30==e&&30==n&&(i+=S.decimal+5),r.push(i),r.push(1==i?S.hr:S.hrs),30!=e&&n&&(r.push(n),r.push(S.mins))),r.join(" ")}function b(e,i){if(null!==e){var n=new Date(x.valueOf()+1e3*e);if(!isNaN(n.getTime())){if("function"===t.type(i))return i(n);for(var s,r,o="",a=0;a<i.length;a++)switch(r=i.charAt(a)){case"a":o+=n.getHours()>11?S.pm:S.am;break;case"A":o+=n.getHours()>11?S.pm.toUpperCase():S.am.toUpperCase();break;case"g":s=n.getHours()%12,o+=0===s?"12":s;break;case"G":o+=n.getHours();break;case"h":s=n.getHours()%12,0!==s&&10>s&&(s="0"+s),o+=0===s?"12":s;break;case"H":s=n.getHours(),e===_&&(s=24),o+=s>9?s:"0"+s;break;case"i":var c=n.getMinutes();o+=c>9?c:"0"+c;break;case"s":e=n.getSeconds(),o+=e>9?e:"0"+e;break;case"\\":a++,o+=i.charAt(a);break;default:o+=r}return o}}}function w(t,e){if(""===t)return null;if(!t||t+0==t)return t;if("object"==typeof t)return 3600*t.getHours()+60*t.getMinutes()+t.getSeconds();t=t.toLowerCase(),("a"==t.slice(-1)||"p"==t.slice(-1))&&(t+="m");var i=new RegExp("^([0-2]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?\\s*("+S.am+"|"+S.pm+")?$"),n=t.match(i);if(!n)return null;var s=parseInt(1*n[1],10),r=n[4],o=s;12>=s&&r&&(o=12==s?n[4]==S.pm?12:0:s+(n[4]==S.pm?12:0));var a=1*n[2]||0,c=1*n[3]||0,l=3600*o+60*a+c;if(!r&&e&&e._twelveHourTime&&e.scrollDefault){var h=l-e.scrollDefault;0>h&&h>=_/-2&&(l=(l+_/2)%_)}return l}var x=a(),_=86400,S={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},k={init:function(e){return this.each(function(){var s=t(this),r=[];for(var o in t.fn.timepicker.defaults)s.data(o)&&(r[o]=s.data(o));var a=t.extend({},t.fn.timepicker.defaults,r,e);a.lang&&(S=t.extend(S,a.lang)),a=i(a),s.data("timepicker-settings",a),s.addClass("ui-timepicker-input"),a.useSelect?n(s):(s.prop("autocomplete","off"),s.on("click.timepicker focus.timepicker",k.show),s.on("change.timepicker",d),s.on("keydown.timepicker",g),s.on("keyup.timepicker",m),d.call(s.get(0)))})},show:function(i){var s=t(this),r=s.data("timepicker-settings");if(i){if(!r.showOnFocus)return!0;i.preventDefault()}if(r.useSelect)return void s.data("timepicker-list").focus();l(s)&&s.blur();var o=s.data("timepicker-list");if(!s.prop("readonly")&&(o&&0!==o.length&&"function"!=typeof r.durationTime||(n(s),o=s.data("timepicker-list")),!e(o))){k.hide(),o.show();var a={};a.left="rtl"==r.orientation?s.offset().left+s.outerWidth()-o.outerWidth()+parseInt(o.css("marginLeft").replace("px",""),10):s.offset().left+parseInt(o.css("marginLeft").replace("px",""),10),s.offset().top+s.outerHeight(!0)+o.outerHeight()>t(window).height()+t(window).scrollTop()?(o.addClass("ui-timepicker-positioned-top"),a.top=s.offset().top-o.outerHeight()+parseInt(o.css("marginTop").replace("px",""),10)):(o.removeClass("ui-timepicker-positioned-top"),a.top=s.offset().top+s.outerHeight()+parseInt(o.css("marginTop").replace("px",""),10)),o.offset(a);var u=o.find(".ui-timepicker-selected");if(u.length||(p(s)?u=h(s,o,w(p(s))):r.scrollDefault&&(u=h(s,o,r.scrollDefault))),u&&u.length){var d=o.scrollTop()+u.position().top-u.outerHeight();o.scrollTop(d)}else o.scrollTop(0);return t(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",c),r.closeOnWindowScroll&&t(document).on("scroll.ui-timepicker",c),s.trigger("showTimepicker"),this}},hide:function(){var i=t(this),n=i.data("timepicker-settings");return n&&n.useSelect&&i.blur(),t(".ui-timepicker-wrapper").each(function(){var i=t(this);if(e(i)){var n=i.data("timepicker-input"),s=n.data("timepicker-settings");s&&s.selectOnBlur&&v(n),i.hide(),n.trigger("hideTimepicker")}}),this},option:function(e,s){return this.each(function(){var r=t(this),o=r.data("timepicker-settings"),a=r.data("timepicker-list");if("object"==typeof e)o=t.extend(o,e);else if("string"==typeof e&&"undefined"!=typeof s)o[e]=s;else if("string"==typeof e)return o[e];o=i(o),r.data("timepicker-settings",o),a&&(a.remove(),r.data("timepicker-list",!1)),o.useSelect&&n(r)})},getSecondsFromMidnight:function(){return w(p(this))},getTime:function(t){var e=this,i=p(e);if(!i)return null;t||(t=new Date);var n=w(i),s=new Date(t);return s.setHours(n/3600),s.setMinutes(n%3600/60),s.setSeconds(n%60),s.setMilliseconds(0),s},setTime:function(t){var e=this,i=e.data("timepicker-settings");if(i.forceRoundTime)var n=o(t,i);else var n=b(w(t),i.timeFormat);return f(e,n),e.data("timepicker-list")&&u(e,e.data("timepicker-list")),this},remove:function(){var t=this;if(t.hasClass("ui-timepicker-input")){var e=t.data("timepicker-settings");return t.removeAttr("autocomplete","off"),t.removeClass("ui-timepicker-input"),t.removeData("timepicker-settings"),t.off(".timepicker"),t.data("timepicker-list")&&t.data("timepicker-list").remove(),e.useSelect&&t.show(),t.removeData("timepicker-list"),this}}};t.fn.timepicker=function(e){return this.length?k[e]?this.hasClass("ui-timepicker-input")?k[e].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.timepicker"):k.init.apply(this,arguments):this},t.fn.timepicker.defaults={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,showOnFocus:!0,timeFormat:"g:ia",scrollDefault:null,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1}}),function(t){var e=function(t,e){t.data("fliped",!0),t.css({transform:e})},i=function(t){t.data("fliped",!1),t.css({transform:"rotatex(0deg)"})};t.fn.flip=function(n){var s=this,r=this.width(),o=this.height(),a=2*r;if(void 0!==n&&"boolean"==typeof n)n?e(this,this.data("flipedRotate")):i(this);else{var c=t.extend({axis:"y",trigger:"click"},n);"x"==c.axis.toLowerCase()?(a=2*o,this.data("flipedRotate","rotatex(180deg)")):this.data("flipedRotate","rotatey(180deg)");var l=this.data("flipedRotate");this.wrap("<div class='flip'></div>"),this.parent().css({perspective:a,position:"relative",width:r,height:o}),this.css({"transform-style":"preserve-3d",transition:"all 0.5s ease-out"}),this.find(".front").wrap("<div class='front-wrap'></div>"),this.find(".back").wrap("<div class='back-wrap'></div>"),this.find(".front, .back").css({width:"100%",height:"100%"}),this.find(".front-wrap, .back-wrap").css({position:"absolute","backface-visibility":"hidden",width:"100%",height:"100%"}),this.find(".back-wrap").css({transform:l}),"click"==c.trigger.toLowerCase()?this.parent().click(function(){s.data("fliped")?i(s):e(s,l)}):"hover"==c.trigger.toLowerCase()&&this.parent().hover(function(){e(s,l)},function(){i(s)})}return this}}(jQuery),!function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function s(e,i){t.fn[e]=function(s){if("string"==typeof s){for(var o=n.call(arguments,1),a=0,c=this.length;c>a;a++){var l=this[a],h=t.data(l,e);if(h)if(t.isFunction(h[s])&&"_"!==s.charAt(0)){var u=h[s].apply(h,o);if(void 0!==u)return u}else r("no such method '"+s+"' for "+e+" instance");else r("cannot call methods on "+e+" prior to initialization; attempted to call '"+s+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(s),n._init()):(n=new i(this,s),t.data(this,e,n))})}}if(t){var r="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),s(t,e)},t.bridget}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i("object"==typeof exports?require("jquery"):t.jQuery)}(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var s=function(){};i.removeEventListener?s=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(s=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var r={bind:n,unbind:s};"function"==typeof define&&define.amd?define("eventie/eventie",r):"object"==typeof exports?module.exports=r:t.eventie=r}(this),function(t){function e(t){"function"==typeof t&&(e.isReady?t():o.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==r.readyState;e.isReady||i||n()}function n(){e.isReady=!0;for(var t=0,i=o.length;i>t;t++){var n=o[t];n()}}function s(s){return"complete"===r.readyState?n():(s.bind(r,"DOMContentLoaded",i),s.bind(r,"readystatechange",i),s.bind(t,"load",i)),e}var r=t.document,o=[];e.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],s):"object"==typeof exports?module.exports=s(require("eventie")):t.docReady=s(t.eventie)}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,s=this,r=s.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,s=this.getListenersAsObject(t),r="object"==typeof i;for(n in s)s.hasOwnProperty(n)&&-1===e(s[n],i)&&s[n].push(r?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,s,r=this.getListenersAsObject(t);for(s in r)r.hasOwnProperty(s)&&(n=e(r[s],i),-1!==n&&r[s].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,s,r=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)r.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(s=e[n])&&("function"==typeof s?r.call(this,n,s):o.call(this,n,s));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,s,r,o=this.getListenersAsObject(t);for(s in o)if(o.hasOwnProperty(s))for(n=o[s].length;n--;)i=o[s][n],i.once===!0&&this.removeListener(t,i.listener),r=i.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:s.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,s=0,r=i.length;r>s;s++)if(e=i[s]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t),i=-1===t.indexOf("%")&&!isNaN(e);return i&&e}function i(){}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=o.length;i>e;e++){var n=o[e];t[n]=0}return t}function s(i){function s(){if(!d){d=!0;var n=t.getComputedStyle;if(l=function(){var t=n?function(t){return n(t,null)}:function(t){return t.currentStyle};return function(e){var i=t(e);return i||r("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}}(),h=i("boxSizing")){var s=document.createElement("div");s.style.width="200px",s.style.padding="1px 2px 3px 4px",s.style.borderStyle="solid",s.style.borderWidth="1px 2px 3px 4px",s.style[h]="border-box";var o=document.body||document.documentElement;o.appendChild(s);var a=l(s);u=200===e(a.width),o.removeChild(s)}}}function a(t){if(s(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=l(t);if("none"===i.display)return n();var r={};r.width=t.offsetWidth,r.height=t.offsetHeight;for(var a=r.isBorderBox=!(!h||!i[h]||"border-box"!==i[h]),d=0,p=o.length;p>d;d++){var f=o[d],g=i[f];g=c(t,g);var m=parseFloat(g);r[f]=isNaN(m)?0:m}var v=r.paddingLeft+r.paddingRight,y=r.paddingTop+r.paddingBottom,b=r.marginLeft+r.marginRight,w=r.marginTop+r.marginBottom,x=r.borderLeftWidth+r.borderRightWidth,_=r.borderTopWidth+r.borderBottomWidth,S=a&&u,k=e(i.width);k!==!1&&(r.width=k+(S?0:v+x));var C=e(i.height);return C!==!1&&(r.height=C+(S?0:y+_)),r.innerWidth=r.width-(v+x),r.innerHeight=r.height-(y+_),r.outerWidth=r.width+b,r.outerHeight=r.height+w,r}}function c(e,i){if(t.getComputedStyle||-1===i.indexOf("%"))return i;var n=e.style,s=n.left,r=e.runtimeStyle,o=r&&r.left;return o&&(r.left=e.currentStyle.left),n.left=i,i=n.pixelLeft,n.left=s,o&&(r.left=o),i}var l,h,u,d=!1;return a}var r="undefined"==typeof console?i:function(t){console.error(t)},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],s):"object"==typeof exports?module.exports=s(require("desandro-get-style-property")):t.getSize=s(t.getStyleProperty)}(window),function(t){function e(t,e){return t[o](e)}function i(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function n(t,e){i(t);for(var n=t.parentNode.querySelectorAll(e),s=0,r=n.length;r>s;s++)if(n[s]===t)return!0;return!1}function s(t,n){return i(t),e(t,n)}var r,o=function(){if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0,n=e.length;n>i;i++){var s=e[i],r=s+"MatchesSelector";if(t[r])return r}}();if(o){var a=document.createElement("div"),c=e(a,"div");r=c?e:s}else r=n;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return r}):"object"==typeof exports?module.exports=r:window.matchesSelector=r}(Element.prototype),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){for(var e in t)return!1;return e=null,!0}function n(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function s(t,s,r){function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var c=r("transition"),l=r("transform"),h=c&&l,u=!!r("perspective"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[c],p=["transform","transition","transitionDuration","transitionProperty"],f=function(){for(var t={},e=0,i=p.length;i>e;e++){var n=p[e],s=r(n);s&&s!==n&&(t[n]=s)}return t}();e(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.getSize=function(){this.size=s(this.element)},a.prototype.css=function(t){var e=this.element.style;for(var i in t){var n=f[i]||i;e[n]=t[i]}},a.prototype.getPosition=function(){var t=o(this.element),e=this.layout.options,i=e.isOriginLeft,n=e.isOriginTop,s=parseInt(t[i?"left":"right"],10),r=parseInt(t[n?"top":"bottom"],10);s=isNaN(s)?0:s,r=isNaN(r)?0:r;var a=this.layout.size;s-=i?a.paddingLeft:a.paddingRight,r-=n?a.paddingTop:a.paddingBottom,this.position.x=s,this.position.y=r},a.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={};e.isOriginLeft?(i.left=this.position.x+t.paddingLeft+"px",i.right=""):(i.right=this.position.x+t.paddingRight+"px",i.left=""),e.isOriginTop?(i.top=this.position.y+t.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+t.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var g=u?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};a.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,s=parseInt(t,10),r=parseInt(e,10),o=s===this.position.x&&r===this.position.y;if(this.setPosition(t,e),o&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,c=e-n,l={},h=this.layout.options;a=h.isOriginLeft?a:-a,c=h.isOriginTop?c:-c,l.transform=g(a,c),this.transition({to:l,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},a.prototype.moveTo=h?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},a.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},a.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var m=l&&n(l)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:m,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(d,this,!1))},a.prototype.transition=a.prototype[c?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},a.prototype.onotransitionend=function(t){this.ontransitionend(t)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=v[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){var s=e.onEnd[n];s.call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(d,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var y={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(y)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!c||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var r=t.getComputedStyle,o=r?function(t){return r(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],s):"object"==typeof exports?module.exports=s(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(t.Outlayer={},t.Outlayer.Item=s(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===u.call(t)}function n(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,s=t.length;s>n;n++)e.push(t[n]);else e.push(t);return e}function s(t,e){var i=p(e,t);-1!==i&&e.splice(i,1)}function r(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function o(i,o,u,p,f,g){function m(t,i){if("string"==typeof t&&(t=a.querySelector(t)),!t||!d(t))return void(c&&c.error("Bad "+this.constructor.namespace+" element: "+t));this.element=t,this.options=e({},this.constructor.defaults),this.option(i);var n=++v;this.element.outlayerGUID=n,y[n]=this,this._create(),this.options.isInitLayout&&this.layout()}var v=0,y={};return m.namespace="outlayer",m.Item=g,m.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(m.prototype,u.prototype),m.prototype.option=function(t){e(this.options,t)},m.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},m.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},m.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],s=0,r=e.length;r>s;s++){var o=e[s],a=new i(o,this);n.push(a)}return n},m.prototype._filterFindItemElements=function(t){t=n(t);for(var e=this.options.itemSelector,i=[],s=0,r=t.length;r>s;s++){var o=t[s];if(d(o))if(e){f(o,e)&&i.push(o);for(var a=o.querySelectorAll(e),c=0,l=a.length;l>c;c++)i.push(a[c])}else i.push(o)}return i},m.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},m.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},m.prototype._init=m.prototype.layout,m.prototype._resetLayout=function(){this.getSize()},m.prototype.getSize=function(){this.size=p(this.element)},m.prototype._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):d(n)&&(i=n),this[t]=i?p(i)[e]:n):this[t]=0},m.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},m.prototype._getItemsForLayout=function(t){for(var e=[],i=0,n=t.length;n>i;i++){var s=t[i];s.isIgnored||e.push(s)}return e},m.prototype._layoutItems=function(t,e){function i(){n.emitEvent("layoutComplete",[n,t])}var n=this;if(!t||!t.length)return void i();this._itemsOn(t,"layout",i);for(var s=[],r=0,o=t.length;o>r;r++){var a=t[r],c=this._getItemLayoutPosition(a);c.item=a,c.isInstant=e||a.isLayoutInstant,s.push(c)}this._processLayoutQueue(s)},m.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},m.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}},m.prototype._positionItem=function(t,e,i,n){n?t.goTo(e,i):t.moveTo(e,i)},m.prototype._postLayout=function(){this.resizeContainer()},m.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},m.prototype._getContainerSize=h,m.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},m.prototype._itemsOn=function(t,e,i){function n(){return s++,s===r&&i.call(o),!0}for(var s=0,r=t.length,o=this,a=0,c=t.length;c>a;a++){var l=t[a];l.on(e,n)}},m.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},m.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},m.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var n=t[e];this.ignore(n)}}},m.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var n=t[e];s(n,this.stamps),this.unignore(n)}},m.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n(t)):void 0},m.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},m.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},m.prototype._manageStamp=h,m.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=p(t),s={left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom};return s},m.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},m.prototype.bindResize=function(){this.isResizeBound||(i.bind(t,"resize",this),this.isResizeBound=!0)},m.prototype.unbindResize=function(){this.isResizeBound&&i.unbind(t,"resize",this),this.isResizeBound=!1
},m.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},m.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},m.prototype.needsResizeLayout=function(){var t=p(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},m.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},m.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},m.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},m.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var n=t[i];n.reveal()}},m.prototype.hide=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var n=t[i];n.hide()}},m.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];if(n.element===t)return n}},m.prototype.getItems=function(t){if(t&&t.length){for(var e=[],i=0,n=t.length;n>i;i++){var s=t[i],r=this.getItem(s);r&&e.push(r)}return e}},m.prototype.remove=function(t){t=n(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,r=e.length;r>i;i++){var o=e[i];o.remove(),s(o,this.items)}}},m.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];n.destroy()}this.unbindResize();var s=this.element.outlayerGUID;delete y[s],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},m.data=function(t){var e=t&&t.outlayerGUID;return e&&y[e]},m.create=function(t,i){function n(){m.apply(this,arguments)}return Object.create?n.prototype=Object.create(m.prototype):e(n.prototype,m.prototype),n.prototype.constructor=n,n.defaults=e({},m.defaults),e(n.defaults,i),n.prototype.settings={},n.namespace=t,n.data=m.data,n.Item=function(){g.apply(this,arguments)},n.Item.prototype=new g,o(function(){for(var e=r(t),i=a.querySelectorAll(".js-"+e),s="data-"+e+"-options",o=0,h=i.length;h>o;o++){var u,d=i[o],p=d.getAttribute(s);try{u=p&&JSON.parse(p)}catch(f){c&&c.error("Error parsing "+s+" on "+d.nodeName.toLowerCase()+(d.id?"#"+d.id:"")+": "+f);continue}var g=new n(d,u);l&&l.data(d,t,g)}}),l&&l.bridget&&l.bridget(t,n),n},m.Item=g,m}var a=t.document,c=t.console,l=t.jQuery,h=function(){},u=Object.prototype.toString,d="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},p=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],o):"object"==typeof exports?module.exports=o(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):t.Outlayer=o(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){function e(t,e){var n=t.create("masonry");return n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},n.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=e&&1>e?"round":"ceil",s=Math[n](t.size.outerWidth/this.columnWidth);s=Math.min(s,this.cols);for(var r=this._getColGroup(s),o=Math.min.apply(Math,r),a=i(r,o),c={x:this.columnWidth*a,y:o},l=o+t.size.outerHeight,h=this.cols+1-r.length,u=0;h>u;u++)this.colYs[a+u]=l;return c},n.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var s=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,s)}return e},n.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),s=this.options.isOriginLeft?n.left:n.right,r=s+i.outerWidth,o=Math.floor(s/this.columnWidth);o=Math.max(0,o);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var c=(this.options.isOriginTop?n.top:n.bottom)+i.outerHeight,l=o;a>=l;l++)this.colYs[l]=Math.max(c,this.colYs[l])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},n}var i=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++){var s=t[i];if(s===e)return i}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,s=this,r=s.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if("object"==typeof t){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;t.length>e;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,s=this.getListenersAsObject(t),r="object"==typeof i;for(n in s)s.hasOwnProperty(n)&&-1===e(s[n],i)&&s[n].push(r?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,s,r=this.getListenersAsObject(t);for(s in r)r.hasOwnProperty(s)&&(n=e(r[s],i),-1!==n&&r[s].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,s,r=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)r.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(s=e[n])&&("function"==typeof s?r.call(this,n,s):o.call(this,n,s));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if("object"===i)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,s,r,o=this.getListenersAsObject(t);for(s in o)if(o.hasOwnProperty(s))for(n=o[s].length;n--;)i=o[s][n],i.once===!0&&this.removeListener(t,i.listener),r=i.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var s=function(){};i.removeEventListener?s=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(s=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var r={bind:n,unbind:s};"function"==typeof define&&define.amd?define("eventie/eventie",r):t.eventie=r}(this),function(t,e){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,i){function n(t,e){for(var i in e)t[i]=e[i];return t}function s(t){return"[object Array]"===d.call(t)}function r(t){var e=[];if(s(t))e=t;else if("number"==typeof t.length)for(var i=0,n=t.length;n>i;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,i){if(!(this instanceof o))return new o(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=r(t),this.options=n({},this.options),"function"==typeof e?i=e:n(this.options,e),i&&this.on("always",i),this.getImages(),l&&(this.jqDeferred=new l.Deferred);var s=this;setTimeout(function(){s.check()})}function a(t){this.img=t}function c(t){this.src=t,p[t]=this}var l=t.jQuery,h=t.console,u=void 0!==h,d=Object.prototype.toString;o.prototype=new e,o.prototype.options={},o.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);var n=i.nodeType;if(n&&(1===n||9===n||11===n))for(var s=i.querySelectorAll("img"),r=0,o=s.length;o>r;r++){var a=s[r];this.addImage(a)}}},o.prototype.addImage=function(t){var e=new a(t);this.images.push(e)},o.prototype.check=function(){function t(t,s){return e.options.debug&&u&&h.log("confirm",t,s),e.progress(t),i++,i===n&&e.complete(),!0}var e=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var s=0;n>s;s++){var r=this.images[s];r.on("confirm",t),r.check()}},o.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},l&&(l.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(l(this))}),a.prototype=new e,a.prototype.check=function(){var t=p[this.img.src]||new c(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,i){return e.confirm(t.isLoaded,i),!0}),t.check()},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var p={};return c.prototype=new e,c.prototype.check=function(){if(!this.isChecked){var t=new Image;i.bind(t,"load",this),i.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},c.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},c.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},c.prototype.unbindProxyEvents=function(t){i.unbind(t.target,"load",this),i.unbind(t.target,"error",this)},o}),function(t,e,i){function n(e,i){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=t(e),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=t.extend({},c,i),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function s(e,i){var n=!0;return t.each(e,function(t){return"undefined"==typeof i[t]||e[t]!==i[t]?(n=!1,!1):void 0}),n}function r(){return!h&&l}function o(){var t=i.body||i.documentElement,e=t.style,n="transition";if("string"==typeof e[n])return!0;v=["Moz","Webkit","Khtml","O","ms"],n=n.charAt(0).toUpperCase()+n.substr(1);for(var s=0;s<v.length;s++)if("string"==typeof e[v[s]+n])return!0;return!1}var a="tooltipster",c={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(){},functionBefore:function(t,e){e()},functionReady:function(){},functionAfter:function(){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};n.prototype={_init:function(){var e=this;if(i.querySelector){var n=null;void 0===e.$el.data("tooltipster-initialTitle")&&(n=e.$el.attr("title"),void 0===n&&(n=null),e.$el.data("tooltipster-initialTitle",n)),e._content_set(null!==e.options.content?e.options.content:n);var s=e.options.functionInit.call(e.$el,e.$el,e.Content);"undefined"!=typeof s&&e._content_set(s),e.$el.removeAttr("title").addClass("tooltipstered"),!l&&e.options.iconDesktop||l&&e.options.iconTouch?("string"==typeof e.options.icon?(e.$elProxy=t('<span class="'+e.options.iconTheme+'"></span>'),e.$elProxy.text(e.options.icon)):e.$elProxy=e.options.iconCloning?e.options.icon.clone(!0):e.options.icon,e.$elProxy.insertAfter(e.$el)):e.$elProxy=e.$el,"hover"==e.options.trigger?(e.$elProxy.on("mouseenter."+e.namespace,function(){(!r()||e.options.touchDevices)&&(e.mouseIsOverProxy=!0,e._show())}).on("mouseleave."+e.namespace,function(){(!r()||e.options.touchDevices)&&(e.mouseIsOverProxy=!1)}),l&&e.options.touchDevices&&e.$elProxy.on("touchstart."+e.namespace,function(){e._showNow()})):"click"==e.options.trigger&&e.$elProxy.on("click."+e.namespace,function(){(!r()||e.options.touchDevices)&&e._show()})}},_show:function(){var t=this;"shown"!=t.Status&&"appearing"!=t.Status&&(t.options.delay?t.timerShow=setTimeout(function(){("click"==t.options.trigger||"hover"==t.options.trigger&&t.mouseIsOverProxy)&&t._showNow()},t.options.delay):t._showNow())},_showNow:function(i){var n=this;n.options.functionBefore.call(n.$el,n.$el,function(){if(n.enabled&&null!==n.Content){i&&n.callbacks.show.push(i),n.callbacks.hide=[],clearTimeout(n.timerShow),n.timerShow=null,clearTimeout(n.timerHide),n.timerHide=null,n.options.onlyOne&&t(".tooltipstered").not(n.$el).each(function(e,i){var n=t(i),s=n.data("tooltipster-ns");t.each(s,function(t,e){var i=n.data(e),s=i.status(),r=i.option("autoClose");"hidden"!==s&&"disappearing"!==s&&r&&i.hide()})});var s=function(){n.Status="shown",t.each(n.callbacks.show,function(t,e){e.call(n.$el)}),n.callbacks.show=[]};if("hidden"!==n.Status){var r=0;"disappearing"===n.Status?(n.Status="appearing",o()?(n.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+n.options.animation+"-show"),n.options.speed>0&&n.$tooltip.delay(n.options.speed),n.$tooltip.queue(s)):n.$tooltip.stop().fadeIn(s)):"shown"===n.Status&&s()}else{n.Status="appearing";var r=n.options.speed;n.bodyOverflowX=t("body").css("overflow-x"),t("body").css("overflow-x","hidden");var a="tooltipster-"+n.options.animation,c="-webkit-transition-duration: "+n.options.speed+"ms; -webkit-animation-duration: "+n.options.speed+"ms; -moz-transition-duration: "+n.options.speed+"ms; -moz-animation-duration: "+n.options.speed+"ms; -o-transition-duration: "+n.options.speed+"ms; -o-animation-duration: "+n.options.speed+"ms; -ms-transition-duration: "+n.options.speed+"ms; -ms-animation-duration: "+n.options.speed+"ms; transition-duration: "+n.options.speed+"ms; animation-duration: "+n.options.speed+"ms;",h=n.options.minWidth?"min-width:"+Math.round(n.options.minWidth)+"px;":"",u=n.options.maxWidth?"max-width:"+Math.round(n.options.maxWidth)+"px;":"",d=n.options.interactive?"pointer-events: auto;":"";if(n.$tooltip=t('<div class="tooltipster-base '+n.options.theme+'" style="'+h+" "+u+" "+d+" "+c+'"><div class="tooltipster-content"></div></div>'),o()&&n.$tooltip.addClass(a),n._content_insert(),n.$tooltip.appendTo("body"),n.reposition(),n.options.functionReady.call(n.$el,n.$el,n.$tooltip),o()?(n.$tooltip.addClass(a+"-show"),n.options.speed>0&&n.$tooltip.delay(n.options.speed),n.$tooltip.queue(s)):n.$tooltip.css("display","none").fadeIn(n.options.speed,s),n._interval_set(),t(e).on("scroll."+n.namespace+" resize."+n.namespace,function(){n.reposition()}),n.options.autoClose)if(t("body").off("."+n.namespace),"hover"==n.options.trigger){if(l&&setTimeout(function(){t("body").on("touchstart."+n.namespace,function(){n.hide()})},0),n.options.interactive){l&&n.$tooltip.on("touchstart."+n.namespace,function(t){t.stopPropagation()});var p=null;n.$elProxy.add(n.$tooltip).on("mouseleave."+n.namespace+"-autoClose",function(){clearTimeout(p),p=setTimeout(function(){n.hide()},n.options.interactiveTolerance)}).on("mouseenter."+n.namespace+"-autoClose",function(){clearTimeout(p)})}else n.$elProxy.on("mouseleave."+n.namespace+"-autoClose",function(){n.hide()});n.options.hideOnClick&&n.$elProxy.on("click."+n.namespace+"-autoClose",function(){n.hide()})}else"click"==n.options.trigger&&(setTimeout(function(){t("body").on("click."+n.namespace+" touchstart."+n.namespace,function(){n.hide()})},0),n.options.interactive&&n.$tooltip.on("click."+n.namespace+" touchstart."+n.namespace,function(t){t.stopPropagation()}))}n.options.timer>0&&(n.timerHide=setTimeout(function(){n.timerHide=null,n.hide()},n.options.timer+r))}})},_interval_set:function(){var e=this;e.checkInterval=setInterval(function(){if(0===t("body").find(e.$el).length||0===t("body").find(e.$elProxy).length||"hidden"==e.Status||0===t("body").find(e.$tooltip).length)("shown"==e.Status||"appearing"==e.Status)&&e.hide(),e._interval_cancel();else if(e.options.positionTracker){var i=e._repositionInfo(e.$elProxy),n=!1;s(i.dimension,e.elProxyPosition.dimension)&&("fixed"===e.$elProxy.css("position")?s(i.position,e.elProxyPosition.position)&&(n=!0):s(i.offset,e.elProxyPosition.offset)&&(n=!0)),n||(e.reposition(),e.options.positionTrackerCallback.call(e,e.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(t){"object"==typeof t&&null!==t&&this.options.contentCloning&&(t=t.clone(!0)),this.Content=t},_content_insert:function(){var t=this,e=this.$tooltip.find(".tooltipster-content");"string"!=typeof t.Content||t.options.contentAsHTML?e.empty().append(t.Content):e.text(t.Content)},_update:function(t){var e=this;e._content_set(t),null!==e.Content?"hidden"!==e.Status&&(e._content_insert(),e.reposition(),e.options.updateAnimation&&(o()?(e.$tooltip.css({width:"","-webkit-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=e.Status&&(e.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==e.Status&&e.$tooltip.css({"-webkit-transition":e.options.speed+"ms","-moz-transition":e.options.speed+"ms","-o-transition":e.options.speed+"ms","-ms-transition":e.options.speed+"ms",transition:e.options.speed+"ms"})},e.options.speed))},e.options.speed)):e.$tooltip.fadeTo(e.options.speed,.5,function(){"hidden"!=e.Status&&e.$tooltip.fadeTo(e.options.speed,1)}))):e.hide()},_repositionInfo:function(t){return{dimension:{height:t.outerHeight(!1),width:t.outerWidth(!1)},offset:t.offset(),position:{left:parseInt(t.css("left")),top:parseInt(t.css("top"))}}},hide:function(i){var n=this;i&&n.callbacks.hide.push(i),n.callbacks.show=[],clearTimeout(n.timerShow),n.timerShow=null,clearTimeout(n.timerHide),n.timerHide=null;var s=function(){t.each(n.callbacks.hide,function(t,e){e.call(n.$el)}),n.callbacks.hide=[]};if("shown"==n.Status||"appearing"==n.Status){n.Status="disappearing";var r=function(){n.Status="hidden","object"==typeof n.Content&&null!==n.Content&&n.Content.detach(),n.$tooltip.remove(),n.$tooltip=null,t(e).off("."+n.namespace),t("body").off("."+n.namespace).css("overflow-x",n.bodyOverflowX),t("body").off("."+n.namespace),n.$elProxy.off("."+n.namespace+"-autoClose"),n.options.functionAfter.call(n.$el,n.$el),s()};o()?(n.$tooltip.clearQueue().removeClass("tooltipster-"+n.options.animation+"-show").addClass("tooltipster-dying"),n.options.speed>0&&n.$tooltip.delay(n.options.speed),n.$tooltip.queue(r)):n.$tooltip.stop().fadeOut(n.options.speed,r)}else"hidden"==n.Status&&s();return n},show:function(t){return this._showNow(t),this},update:function(t){return this.content(t)},content:function(t){return"undefined"==typeof t?this.Content:(this._update(t),this)},reposition:function(){function i(){var i=t(e).scrollLeft();0>P-i&&(r=P-i,P=i),P+c-i>o&&(r=P-(o+i-c),P=o+i-c)}function n(i,n){a.offset.top-t(e).scrollTop()-l-A-12<0&&n.indexOf("top")>-1&&(I=i),a.offset.top+a.dimension.height+l+12+A>t(e).scrollTop()+t(e).height()&&n.indexOf("bottom")>-1&&(I=i,D=a.offset.top-l-A-12)}var s=this;if(0!==t("body").find(s.$tooltip).length){s.$tooltip.css("width",""),s.elProxyPosition=s._repositionInfo(s.$elProxy);var r=null,o=t(e).width(),a=s.elProxyPosition,c=s.$tooltip.outerWidth(!1),l=(s.$tooltip.innerWidth()+1,s.$tooltip.outerHeight(!1));if(s.$elProxy.is("area")){var h=s.$elProxy.attr("shape"),u=s.$elProxy.parent().attr("name"),d=t('img[usemap="#'+u+'"]'),p=d.offset().left,f=d.offset().top,g=void 0!==s.$elProxy.attr("coords")?s.$elProxy.attr("coords").split(","):void 0;if("circle"==h){var m=parseInt(g[0]),v=parseInt(g[1]),y=parseInt(g[2]);a.dimension.height=2*y,a.dimension.width=2*y,a.offset.top=f+v-y,a.offset.left=p+m-y}else if("rect"==h){var m=parseInt(g[0]),v=parseInt(g[1]),b=parseInt(g[2]),w=parseInt(g[3]);a.dimension.height=w-v,a.dimension.width=b-m,a.offset.top=f+v,a.offset.left=p+m}else if("poly"==h){for(var x=0,_=0,S=0,k=0,C="even",T=0;T<g.length;T++){var K=parseInt(g[T]);"even"==C?(K>S&&(S=K,0===T&&(x=S)),x>K&&(x=K),C="odd"):(K>k&&(k=K,1==T&&(_=k)),_>K&&(_=K),C="even")}a.dimension.height=k-_,a.dimension.width=S-x,a.offset.top=f+_,a.offset.left=p+x}else a.dimension.height=d.outerHeight(!1),a.dimension.width=d.outerWidth(!1),a.offset.top=f,a.offset.left=p}var P=0,E=0,D=0,A=parseInt(s.options.offsetY),F=parseInt(s.options.offsetX),I=s.options.position;if("top"==I){var $=a.offset.left+c-(a.offset.left+a.dimension.width);P=a.offset.left+F-$/2,D=a.offset.top-l-A-12,i(),n("bottom","top")}if("top-left"==I&&(P=a.offset.left+F,D=a.offset.top-l-A-12,i(),n("bottom-left","top-left")),"top-right"==I&&(P=a.offset.left+a.dimension.width+F-c,D=a.offset.top-l-A-12,i(),n("bottom-right","top-right")),"bottom"==I){var $=a.offset.left+c-(a.offset.left+a.dimension.width);P=a.offset.left-$/2+F,D=a.offset.top+a.dimension.height+A+12,i(),n("top","bottom")}if("bottom-left"==I&&(P=a.offset.left+F,D=a.offset.top+a.dimension.height+A+12,i(),n("top-left","bottom-left")),"bottom-right"==I&&(P=a.offset.left+a.dimension.width+F-c,D=a.offset.top+a.dimension.height+A+12,i(),n("top-right","bottom-right")),"left"==I){P=a.offset.left-F-c-12,E=a.offset.left+F+a.dimension.width+12;var L=a.offset.top+l-(a.offset.top+a.dimension.height);if(D=a.offset.top-L/2-A,0>P&&E+c>o){var O=2*parseFloat(s.$tooltip.css("border-width")),N=c+P-O;s.$tooltip.css("width",N+"px"),l=s.$tooltip.outerHeight(!1),P=a.offset.left-F-N-12-O,L=a.offset.top+l-(a.offset.top+a.dimension.height),D=a.offset.top-L/2-A}else 0>P&&(P=a.offset.left+F+a.dimension.width+12,r="left")}if("right"==I){P=a.offset.left+F+a.dimension.width+12,E=a.offset.left-F-c-12;var L=a.offset.top+l-(a.offset.top+a.dimension.height);if(D=a.offset.top-L/2-A,P+c>o&&0>E){var O=2*parseFloat(s.$tooltip.css("border-width")),N=o-P-O;s.$tooltip.css("width",N+"px"),l=s.$tooltip.outerHeight(!1),L=a.offset.top+l-(a.offset.top+a.dimension.height),D=a.offset.top-L/2-A}else P+c>o&&(P=a.offset.left-F-c-12,r="right")}if(s.options.arrow){var M="tooltipster-arrow-"+I;if(s.options.arrowColor.length<1)var R=s.$tooltip.css("background-color");else var R=s.options.arrowColor;if(r?"left"==r?(M="tooltipster-arrow-right",r=""):"right"==r?(M="tooltipster-arrow-left",r=""):r="left:"+Math.round(r)+"px;":r="","top"==I||"top-left"==I||"top-right"==I)var j=parseFloat(s.$tooltip.css("border-bottom-width")),H=s.$tooltip.css("border-bottom-color");else if("bottom"==I||"bottom-left"==I||"bottom-right"==I)var j=parseFloat(s.$tooltip.css("border-top-width")),H=s.$tooltip.css("border-top-color");else if("left"==I)var j=parseFloat(s.$tooltip.css("border-right-width")),H=s.$tooltip.css("border-right-color");else if("right"==I)var j=parseFloat(s.$tooltip.css("border-left-width")),H=s.$tooltip.css("border-left-color");else var j=parseFloat(s.$tooltip.css("border-bottom-width")),H=s.$tooltip.css("border-bottom-color");j>1&&j++;var B="";if(0!==j){var z="",U="border-color: "+H+";";-1!==M.indexOf("bottom")?z="margin-top: -"+Math.round(j)+"px;":-1!==M.indexOf("top")?z="margin-bottom: -"+Math.round(j)+"px;":-1!==M.indexOf("left")?z="margin-right: -"+Math.round(j)+"px;":-1!==M.indexOf("right")&&(z="margin-left: -"+Math.round(j)+"px;"),B='<span class="tooltipster-arrow-border" style="'+z+" "+U+';"></span>'}s.$tooltip.find(".tooltipster-arrow").remove();var W='<div class="'+M+' tooltipster-arrow" style="'+r+'">'+B+'<span style="border-color:'+R+';"></span></div>';s.$tooltip.append(W)}s.$tooltip.css({top:Math.round(D)+"px",left:Math.round(P)+"px"})}return s},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var e=this;e.hide(),e.$el[0]!==e.$elProxy[0]&&e.$elProxy.remove(),e.$el.removeData(e.namespace).off("."+e.namespace);var i=e.$el.data("tooltipster-ns");if(1===i.length){var n=null;"previous"===e.options.restoration?n=e.$el.data("tooltipster-initialTitle"):"current"===e.options.restoration&&(n="string"==typeof e.Content?e.Content:t("<div></div>").append(e.Content).html()),n&&e.$el.attr("title",n),e.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else i=t.grep(i,function(t){return t!==e.namespace}),e.$el.data("tooltipster-ns",i);return e},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(t,e){return"undefined"==typeof e?this.options[t]:(this.options[t]=e,this)},status:function(){return this.Status}},t.fn[a]=function(){var e=arguments;if(0===this.length){if("string"==typeof e[0]){var i=!0;switch(e[0]){case"setDefaults":t.extend(c,e[1]);break;default:i=!1}return i?!0:this}return this}if("string"==typeof e[0]){var s="#*$~&";return this.each(function(){var i=t(this).data("tooltipster-ns"),n=i?t(this).data(i[0]):null;if(!n)throw new Error("You called Tooltipster's \""+e[0]+'" method on an uninitialized element');if("function"!=typeof n[e[0]])throw new Error('Unknown method .tooltipster("'+e[0]+'")');var r=n[e[0]](e[1],e[2]);return r!==n?(s=r,!1):void 0}),"#*$~&"!==s?s:this}var r=[],o=e[0]&&"undefined"!=typeof e[0].multiple,a=o&&e[0].multiple||!o&&c.multiple,l=e[0]&&"undefined"!=typeof e[0].debug,h=l&&e[0].debug||!l&&c.debug;return this.each(function(){var i=!1,s=t(this).data("tooltipster-ns"),o=null;s?a?i=!0:h&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):i=!0,i&&(o=new n(this,e[0]),s||(s=[]),s.push(o.namespace),t(this).data("tooltipster-ns",s),t(this).data(o.namespace,o)),r.push(o)}),a?r:this};var l=!!("ontouchstart"in e),h=!1;t("body").one("mousemove",function(){h=!0})}(jQuery,window,document),function(t){"use strict";var e={init:function(i){return this.each(function(){this.self=t(this),e.destroy.call(this.self),this.opt=t.extend(!0,{},t.fn.raty.defaults,i),e._adjustCallback.call(this),e._adjustNumber.call(this),e._adjustHints.call(this),this.opt.score=e._adjustedScore.call(this,this.opt.score),"img"!==this.opt.starType&&e._adjustStarType.call(this),e._adjustPath.call(this),e._createStars.call(this),this.opt.cancel&&e._createCancel.call(this),this.opt.precision&&e._adjustPrecision.call(this),e._createScore.call(this),e._apply.call(this,this.opt.score),e._setTitle.call(this,this.opt.score),e._target.call(this,this.opt.score),this.opt.readOnly?e._lock.call(this):(this.style.cursor="pointer",e._binds.call(this))})},_adjustCallback:function(){for(var t=["number","readOnly","score","scoreName","target"],e=0;e<t.length;e++)"function"==typeof this.opt[t[e]]&&(this.opt[t[e]]=this.opt[t[e]].call(this))},_adjustedScore:function(t){return t?e._between(t,0,this.opt.number):t},_adjustHints:function(){if(this.opt.hints||(this.opt.hints=[]),this.opt.halfShow||this.opt.half)for(var t=this.opt.precision?10:2,e=0;e<this.opt.number;e++){var i=this.opt.hints[e];"[object Array]"!==Object.prototype.toString.call(i)&&(i=[i]),this.opt.hints[e]=[];for(var n=0;t>n;n++){var s=i[n],r=i[i.length-1];void 0===r&&(r=null),this.opt.hints[e][n]=void 0===s?r:s}}},_adjustNumber:function(){this.opt.number=e._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var t=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var e=0;e<t.length;e++)this.opt[t[e]]=this.opt[t[e]].replace(".","-")},_apply:function(t){e._fill.call(this,t),t&&(t>0&&this.score.val(t),e._roundStars.call(this,t))},_between:function(t,e,i){return Math.min(Math.max(parseFloat(t),e),i)},_binds:function(){this.cancel&&(e._bindOverCancel.call(this),e._bindClickCancel.call(this),e._bindOutCancel.call(this)),e._bindOver.call(this),e._bindClick.call(this),e._bindOut.call(this)},_bindClick:function(){var i=this;i.stars.on("click.raty",function(n){var s=!0,r=i.opt.half||i.opt.precision?i.self.data("score"):this.alt||t(this).data("alt");i.opt.click&&(s=i.opt.click.call(i,+r,n)),(s||void 0===s)&&(i.opt.half&&!i.opt.precision&&(r=e._roundHalfScore.call(i,r)),e._apply.call(i,r))})},_bindClickCancel:function(){var t=this;t.cancel.on("click.raty",function(e){t.score.removeAttr("value"),t.opt.click&&t.opt.click.call(t,null,e)})},_bindOut:function(){var t=this;t.self.on("mouseleave.raty",function(i){var n=+t.score.val()||void 0;e._apply.call(t,n),e._target.call(t,n,i),e._resetTitle.call(t),t.opt.mouseout&&t.opt.mouseout.call(t,n,i)})},_bindOutCancel:function(){var t=this;t.cancel.on("mouseleave.raty",function(i){var n=t.opt.cancelOff;if("img"!==t.opt.starType&&(n=t.opt.cancelClass+" "+n),e._setIcon.call(t,this,n),t.opt.mouseout){var s=+t.score.val()||void 0;t.opt.mouseout.call(t,s,i)
}})},_bindOver:function(){var t=this,i=t.opt.half?"mousemove.raty":"mouseover.raty";t.stars.on(i,function(i){var n=e._getScoreByPosition.call(t,i,this);e._fill.call(t,n),t.opt.half&&(e._roundStars.call(t,n,i),e._setTitle.call(t,n,i),t.self.data("score",n)),e._target.call(t,n,i),t.opt.mouseover&&t.opt.mouseover.call(t,n,i)})},_bindOverCancel:function(){var t=this;t.cancel.on("mouseover.raty",function(i){var n=t.opt.path+t.opt.starOff,s=t.opt.cancelOn;"img"===t.opt.starType?t.stars.attr("src",n):(s=t.opt.cancelClass+" "+s,t.stars.attr("class",n)),e._setIcon.call(t,this,s),e._target.call(t,null,i),t.opt.mouseover&&t.opt.mouseover.call(t,null)})},_buildScoreField:function(){return t("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var e=this.opt.path+this.opt.cancelOff,i=t("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?i.attr({src:e,alt:"x"}):i.attr("data-alt","x").addClass(e),"left"===this.opt.cancelPlace?this.self.prepend("&#160;").prepend(i):this.self.append("&#160;").append(i),this.cancel=i},_createScore:function(){var i=t(this.opt.targetScore);this.score=i.length?i:e._buildScoreField.call(this)},_createStars:function(){for(var i=1;i<=this.opt.number;i++){var n=e._nameForIndex.call(this,i),s={alt:i,src:this.opt.path+this.opt[n]};"img"!==this.opt.starType&&(s={"data-alt":i,"class":s.src}),s.title=e._getHint.call(this,i),t("<"+this.opt.starType+" />",s).appendTo(this),this.opt.space&&this.self.append(i<this.opt.number?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(e){t(this).text(e),t.error(e)},_fill:function(t){for(var i=0,n=1;n<=this.stars.length;n++){var s,r=this.stars[n-1],o=e._turnOn.call(this,n,t);if(this.opt.iconRange&&this.opt.iconRange.length>i){var a=this.opt.iconRange[i];s=e._getRangeIcon.call(this,a,o),n<=a.range&&e._setIcon.call(this,r,s),n===a.range&&i++}else s=this.opt[o?"starOn":"starOff"],e._setIcon.call(this,r,s)}},_getFirstDecimal:function(t){var e=t.toString().split(".")[1],i=0;return e&&(i=parseInt(e.charAt(0),10),"9999"===e.slice(1,5)&&i++),i},_getRangeIcon:function(t,e){return e?t.on||this.opt.starOn:t.off||this.opt.starOff},_getScoreByPosition:function(i,n){var s=parseInt(n.alt||n.getAttribute("data-alt"),10);if(this.opt.half){var r=e._getWidth.call(this),o=parseFloat((i.pageX-t(n).offset().left)/r);s=s-1+o}return s},_getHint:function(t,i){if(0!==t&&!t)return this.opt.noRatedMsg;var n=e._getFirstDecimal.call(this,t),s=Math.ceil(t),r=this.opt.hints[(s||1)-1],o=r,a=!i||this.move;return this.opt.precision?(a&&(n=0===n?9:n-1),o=r[n]):(this.opt.halfShow||this.opt.half)&&(n=a&&0===n?1:n>5?1:0,o=r[n]),""===o?"":o||t},_getWidth:function(){var t=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));return t||e._error.call(this,"Could not get the icon width!"),t},_lock:function(){var t=e._getHint.call(this,this.score.val());this.style.cursor="",this.title=t,this.score.prop("readonly",!0),this.stars.prop("title",t),this.cancel&&this.cancel.hide(),this.self.data("readonly",!0)},_nameForIndex:function(t){return this.opt.score&&this.opt.score>=t?"starOn":"starOff"},_resetTitle:function(){for(var t=0;t<this.opt.number;t++)this.stars[t].title=e._getHint.call(this,t+1)},_roundHalfScore:function(t){var i=parseInt(t,10),n=e._getFirstDecimal.call(this,t);return 0!==n&&(n=n>5?1:.5),i+n},_roundStars:function(t,i){var n,s=(t%1).toFixed(2);if(i||this.move?n=s>.5?"starOn":"starHalf":s>this.opt.round.down&&(n="starOn",this.opt.halfShow&&s<this.opt.round.up?n="starHalf":s<this.opt.round.full&&(n="starOff")),n){var r=this.opt[n],o=this.stars[Math.ceil(t)-1];e._setIcon.call(this,o,r)}},_setIcon:function(t,e){t["img"===this.opt.starType?"src":"className"]=this.opt.path+e},_setTarget:function(t,e){e&&(e=this.opt.targetFormat.toString().replace("{score}",e)),t.is(":input")?t.val(e):t.html(e)},_setTitle:function(t,i){if(t){var n=parseInt(Math.ceil(t),10),s=this.stars[n-1];s.title=e._getHint.call(this,t,i)}},_target:function(i,n){if(this.opt.target){var s=t(this.opt.target);s.length||e._error.call(this,"Target selector invalid or missing!");var r=n&&"mouseover"===n.type;if(void 0===i)i=this.opt.targetText;else if(null===i)i=r?this.opt.cancelHint:this.opt.targetText;else{"hint"===this.opt.targetType?i=e._getHint.call(this,i,n):this.opt.precision&&(i=parseFloat(i).toFixed(1));var o=n&&"mousemove"===n.type;r||o||this.opt.targetKeep||(i=this.opt.targetText)}e._setTarget.call(this,s,i)}},_turnOn:function(t,e){return this.opt.single?t===e:e>=t},_unlock:function(){this.style.cursor="pointer",this.removeAttribute("title"),this.score.removeAttr("readonly"),this.self.data("readonly",!1);for(var t=0;t<this.opt.number;t++)this.stars[t].title=e._getHint.call(this,t+1);this.cancel&&this.cancel.css("display","")},cancel:function(i){return this.each(function(){var n=t(this);n.data("readonly")!==!0&&(e[i?"click":"score"].call(n,null),this.score.removeAttr("value"))})},click:function(i){return this.each(function(){t(this).data("readonly")!==!0&&(i=e._adjustedScore.call(this,i),e._apply.call(this,i),this.opt.click&&this.opt.click.call(this,i,t.Event("click")),e._target.call(this,i))})},destroy:function(){return this.each(function(){var e=t(this),i=e.data("raw");i?e.off(".raty").empty().css({cursor:i.style.cursor}).removeData("readonly"):e.data("raw",e.clone()[0])})},getScore:function(){var t,e=[];return this.each(function(){t=this.score.val(),e.push(t?+t:void 0)}),e.length>1?e:e[0]},move:function(i){return this.each(function(){var n=parseInt(i,10),s=e._getFirstDecimal.call(this,i);n>=this.opt.number&&(n=this.opt.number-1,s=10);var r=e._getWidth.call(this),o=r/10,a=t(this.stars[n]),c=a.offset().left+o*s,l=t.Event("mousemove",{pageX:c});this.move=!0,a.trigger(l),this.move=!1})},readOnly:function(i){return this.each(function(){var n=t(this);n.data("readonly")!==i&&(i?(n.off(".raty").children("img").off(".raty"),e._lock.call(this)):(e._binds.call(this),e._unlock.call(this)),n.data("readonly",i))})},reload:function(){return e.set.call(this,{})},score:function(){var i=t(this);return arguments.length?e.setScore.apply(i,arguments):e.getScore.call(i)},set:function(e){return this.each(function(){t(this).raty(t.extend({},this.opt,e))})},setScore:function(i){return this.each(function(){t(this).data("readonly")!==!0&&(i=e._adjustedScore.call(this,i),e._apply.call(this,i),e._target.call(this,i))})}};t.fn.raty=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void t.error("Method "+i+" does not exist!"):e.init.apply(this,arguments)},t.fn.raty.defaults={cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"/assets/star_rating/cancel-off.png",cancelOn:"/assets/star_rating/cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:void 0,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,space:!0,starHalf:"/assets/star_rating/star-half.png",starOff:"/assets/star_rating/star-off.png",starOn:"/assets/star_rating/star-on.png",starType:"img",target:void 0,targetFormat:"{score}",targetKeep:!1,targetScore:void 0,targetText:"",targetType:"hint"}}(jQuery),function(t){var e,i,n,s,r,o,a,c="Close",l="BeforeClose",h="AfterClose",u="BeforeAppend",d="MarkupParse",p="Open",f="Change",g="mfp",m="."+g,v="mfp-ready",y="mfp-removing",b="mfp-prevent-close",w=function(){},x=!!window.jQuery,_=t(window),S=function(t,i){e.ev.on(g+t+m,i)},k=function(e,i,n,s){var r=document.createElement("div");return r.className="mfp-"+e,n&&(r.innerHTML=n),s?i&&i.appendChild(r):(r=t(r),i&&r.appendTo(i)),r},C=function(i,n){e.ev.triggerHandler(g+i,n),e.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),e.st.callbacks[i]&&e.st.callbacks[i].apply(e,t.isArray(n)?n:[n]))},T=function(i){return i===a&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),a=i),e.currTemplate.closeBtn},K=function(){t.magnificPopup.instance||(e=new w,e.init(),t.magnificPopup.instance=e)},P=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1};w.prototype={constructor:w,init:function(){var i=navigator.appVersion;e.isIE7=-1!==i.indexOf("MSIE 7."),e.isIE8=-1!==i.indexOf("MSIE 8."),e.isLowIE=e.isIE7||e.isIE8,e.isAndroid=/android/gi.test(i),e.isIOS=/iphone|ipad|ipod/gi.test(i),e.supportsTransition=P(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),s=t(document),e.popupsCache={}},open:function(i){n||(n=t(document.body));var r;if(i.isObj===!1){e.items=i.items.toArray(),e.index=0;var a,c=i.items;for(r=0;r<c.length;r++)if(a=c[r],a.parsed&&(a=a.el[0]),a===i.el[0]){e.index=r;break}}else e.items=t.isArray(i.items)?i.items:[i.items],e.index=i.index||0;if(e.isOpen)return void e.updateItemHTML();e.types=[],o="",e.ev=i.mainEl&&i.mainEl.length?i.mainEl.eq(0):s,i.key?(e.popupsCache[i.key]||(e.popupsCache[i.key]={}),e.currTemplate=e.popupsCache[i.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,i),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=k("bg").on("click"+m,function(){e.close()}),e.wrap=k("wrap").attr("tabindex",-1).on("click"+m,function(t){e._checkIfClose(t.target)&&e.close()}),e.container=k("container",e.wrap)),e.contentContainer=k("content"),e.st.preloader&&(e.preloader=k("preloader",e.container,e.st.tLoading));var l=t.magnificPopup.modules;for(r=0;r<l.length;r++){var h=l[r];h=h.charAt(0).toUpperCase()+h.slice(1),e["init"+h].call(e)}C("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(S(d,function(t,e,i,n){i.close_replaceWith=T(n.type)}),o+=" mfp-close-btn-in"):e.wrap.append(T())),e.st.alignTop&&(o+=" mfp-align-top"),e.wrap.css(e.fixedContentPos?{overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}:{top:_.scrollTop(),position:"absolute"}),(e.st.fixedBgPos===!1||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:s.height(),position:"absolute"}),e.st.enableEscapeKey&&s.on("keyup"+m,function(t){27===t.keyCode&&e.close()}),_.on("resize"+m,function(){e.updateSize()}),e.st.closeOnContentClick||(o+=" mfp-auto-cursor"),o&&e.wrap.addClass(o);var u=e.wH=_.height(),f={};if(e.fixedContentPos&&e._hasScrollBar(u)){var g=e._getScrollbarSize();g&&(f.marginRight=g)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):f.overflow="hidden");var y=e.st.mainClass;return e.isIE7&&(y+=" mfp-ie7"),y&&e._addClassToMFP(y),e.updateItemHTML(),C("BuildControls"),t("html").css(f),e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo||n),e._lastFocusedEl=document.activeElement,setTimeout(function(){e.content?(e._addClassToMFP(v),e._setFocus()):e.bgOverlay.addClass(v),s.on("focusin"+m,e._onFocusIn)},16),e.isOpen=!0,e.updateSize(u),C(p),i},close:function(){e.isOpen&&(C(l),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(y),setTimeout(function(){e._close()},e.st.removalDelay)):e._close())},_close:function(){C(c);var i=y+" "+v+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(i+=e.st.mainClass+" "),e._removeClassFromMFP(i),e.fixedContentPos){var n={marginRight:""};e.isIE7?t("body, html").css("overflow",""):n.overflow="",t("html").css(n)}s.off("keyup"+m+" focusin"+m),e.ev.off(m),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&e.currTemplate[e.currItem.type]!==!0||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e._lastFocusedEl&&t(e._lastFocusedEl).focus(),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,C(h)},updateSize:function(t){if(e.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*i;e.wrap.css("height",n),e.wH=n}else e.wH=t||_.height();e.fixedContentPos||e.wrap.css("height",e.wH),C("Resize")},updateItemHTML:function(){var i=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),i.parsed||(i=e.parseEl(e.index));var n=i.type;if(C("BeforeChange",[e.currItem?e.currItem.type:"",n]),e.currItem=i,!e.currTemplate[n]){var s=e.st[n]?e.st[n].markup:!1;C("FirstMarkupParse",s),e.currTemplate[n]=s?t(s):!0}r&&r!==i.type&&e.container.removeClass("mfp-"+r+"-holder");var o=e["get"+n.charAt(0).toUpperCase()+n.slice(1)](i,e.currTemplate[n]);e.appendContent(o,n),i.preloaded=!0,C(f,i),r=i.type,e.container.prepend(e.contentContainer),C("AfterChange")},appendContent:function(t,i){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&e.currTemplate[i]===!0?e.content.find(".mfp-close").length||e.content.append(T()):e.content=t:e.content="",C(u),e.container.addClass("mfp-"+i+"-holder"),e.contentContainer.append(e.content)},parseEl:function(i){var n,s=e.items[i];if(s.tagName?s={el:t(s)}:(n=s.type,s={data:s,src:s.src}),s.el){for(var r=e.types,o=0;o<r.length;o++)if(s.el.hasClass("mfp-"+r[o])){n=r[o];break}s.src=s.el.attr("data-mfp-src"),s.src||(s.src=s.el.attr("href"))}return s.type=n||e.st.type||"inline",s.index=i,s.parsed=!0,e.items[i]=s,C("ElementParse",s),e.items[i]},addGroup:function(t,i){var n=function(n){n.mfpEl=this,e._openClick(n,t,i)};i||(i={});var s="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(s).on(s,n)):(i.isObj=!1,i.delegate?t.off(s).on(s,i.delegate,n):(i.items=t,t.off(s).on(s,n)))},_openClick:function(i,n,s){var r=void 0!==s.midClick?s.midClick:t.magnificPopup.defaults.midClick;if(r||2!==i.which&&!i.ctrlKey&&!i.metaKey){var o=void 0!==s.disableOn?s.disableOn:t.magnificPopup.defaults.disableOn;if(o)if(t.isFunction(o)){if(!o.call(e))return!0}else if(_.width()<o)return!0;i.type&&(i.preventDefault(),e.isOpen&&i.stopPropagation()),s.el=t(i.mfpEl),s.delegate&&(s.items=n.find(s.delegate)),e.open(s)}},updateStatus:function(t,n){if(e.preloader){i!==t&&e.container.removeClass("mfp-s-"+i),n||"loading"!==t||(n=e.st.tLoading);var s={status:t,text:n};C("UpdateStatus",s),t=s.status,n=s.text,e.preloader.html(n),e.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),e.container.addClass("mfp-s-"+t),i=t}},_checkIfClose:function(i){if(!t(i).hasClass(b)){var n=e.st.closeOnContentClick,s=e.st.closeOnBgClick;if(n&&s)return!0;if(!e.content||t(i).hasClass("mfp-close")||e.preloader&&i===e.preloader[0])return!0;if(i===e.content[0]||t.contains(e.content[0],i)){if(n)return!0}else if(s&&t.contains(document,i))return!0;return!1}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?s.height():document.body.scrollHeight)>(t||_.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(i){return i.target===e.wrap[0]||t.contains(e.wrap[0],i.target)?void 0:(e._setFocus(),!1)},_parseMarkup:function(e,i,n){var s;n.data&&(i=t.extend(n.data,i)),C(d,[e,i,n]),t.each(i,function(t,i){if(void 0===i||i===!1)return!0;if(s=t.split("_"),s.length>1){var n=e.find(m+"-"+s[0]);if(n.length>0){var r=s[1];"replaceWith"===r?n[0]!==i[0]&&n.replaceWith(i):"img"===r?n.is("img")?n.attr("src",i):n.replaceWith('<img src="'+i+'" class="'+n.attr("class")+'" />'):n.attr(s[1],i)}}else e.find(m+"-"+t).html(i)})},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:w.prototype,modules:[],open:function(e,i){return K(),e=e?t.extend(!0,{},e):{},e.isObj=!0,e.index=i||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,i){i.options&&(t.magnificPopup.defaults[e]=i.options),t.extend(this.proto,i.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},t.fn.magnificPopup=function(i){K();var n=t(this);if("string"==typeof i)if("open"===i){var s,r=x?n.data("magnificPopup"):n[0].magnificPopup,o=parseInt(arguments[1],10)||0;r.items?s=r.items[o]:(s=n,r.delegate&&(s=s.find(r.delegate)),s=s.eq(o)),e._openClick({mfpEl:s},n,r)}else e.isOpen&&e[i].apply(e,Array.prototype.slice.call(arguments,1));else i=t.extend(!0,{},i),x?n.data("magnificPopup",i):n[0].magnificPopup=i,e.addGroup(n,i);return n};var E,D,A,F="inline",I=function(){A&&(D.after(A.addClass(E)).detach(),A=null)};t.magnificPopup.registerModule(F,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(F),S(c+"."+F,function(){I()})},getInline:function(i,n){if(I(),i.src){var s=e.st.inline,r=t(i.src);if(r.length){var o=r[0].parentNode;o&&o.tagName&&(D||(E=s.hiddenClass,D=k(E),E="mfp-"+E),A=r.after(D).detach().removeClass(E)),e.updateStatus("ready")}else e.updateStatus("error",s.tNotFound),r=t("<div>");return i.inlineElement=r,r}return e.updateStatus("ready"),e._parseMarkup(n,{},i),n}}});var $,L="ajax",O=function(){$&&n.removeClass($)},N=function(){O(),e.req&&e.req.abort()};t.magnificPopup.registerModule(L,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(L),$=e.st.ajax.cursor,S(c+"."+L,N),S("BeforeChange."+L,N)},getAjax:function(i){$&&n.addClass($),e.updateStatus("loading");var s=t.extend({url:i.src,success:function(n,s,r){var o={data:n,xhr:r};C("ParseAjax",o),e.appendContent(t(o.data),L),i.finished=!0,O(),e._setFocus(),setTimeout(function(){e.wrap.addClass(v)},16),e.updateStatus("ready"),C("AjaxContentAdded")},error:function(){O(),i.finished=i.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",i.src))}},e.st.ajax.settings);return e.req=t.ajax(s),""}}});var M,R=function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var n=e.st.image.titleSrc;if(n){if(t.isFunction(n))return n.call(e,i);if(i.el)return i.el.attr(n)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var t=e.st.image,i=".image";e.types.push("image"),S(p+i,function(){"image"===e.currItem.type&&t.cursor&&n.addClass(t.cursor)}),S(c+i,function(){t.cursor&&n.removeClass(t.cursor),_.off("resize"+m)}),S("Resize"+i,e.resizeImage),e.isLowIE&&S("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var i=0;e.isLowIE&&(i=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-i)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,M&&clearInterval(M),t.isCheckingImgSize=!1,C("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var i=0,n=t.img[0],s=function(r){M&&clearInterval(M),M=setInterval(function(){return n.naturalWidth>0?void e._onImageHasSize(t):(i>200&&clearInterval(M),i++,void(3===i?s(10):40===i?s(50):100===i&&s(500)))},r)};s(1)},getImage:function(i,n){var s=0,r=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,C("ImageLoadComplete")):(s++,200>s?setTimeout(r,100):o()))},o=function(){i&&(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("error",a.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},a=e.st.image,c=n.find(".mfp-img");if(c.length){var l=document.createElement("img");l.className="mfp-img",i.img=t(l).on("load.mfploader",r).on("error.mfploader",o),l.src=i.src,c.is("img")&&(i.img=i.img.clone()),l=i.img[0],l.naturalWidth>0?i.hasSize=!0:l.width||(i.hasSize=!1)}return e._parseMarkup(n,{title:R(i),img_replaceWith:i.img},i),e.resizeImage(),i.hasSize?(M&&clearInterval(M),i.loadError?(n.addClass("mfp-loading"),e.updateStatus("error",a.tError.replace("%url%",i.src))):(n.removeClass("mfp-loading"),e.updateStatus("ready")),n):(e.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,n.addClass("mfp-loading"),e.findImageSize(i)),n)}}});var j,H=function(){return void 0===j&&(j=void 0!==document.createElement("p").style.MozTransform),j};t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,i=e.st.zoom,n=".zoom";if(i.enabled&&e.supportsTransition){var s,r,o=i.duration,a=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+i.duration/1e3+"s "+i.easing,s={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},r="transition";return s["-webkit-"+r]=s["-moz-"+r]=s["-o-"+r]=s[r]=n,e.css(s),e},h=function(){e.content.css("visibility","visible")};S("BuildControls"+n,function(){if(e._allowZoom()){if(clearTimeout(s),e.content.css("visibility","hidden"),t=e._getItemToZoom(),!t)return void h();r=a(t),r.css(e._getOffset()),e.wrap.append(r),s=setTimeout(function(){r.css(e._getOffset(!0)),s=setTimeout(function(){h(),setTimeout(function(){r.remove(),t=r=null,C("ZoomAnimationEnded")},16)},o)},16)}}),S(l+n,function(){if(e._allowZoom()){if(clearTimeout(s),e.st.removalDelay=o,!t){if(t=e._getItemToZoom(),!t)return;r=a(t)}r.css(e._getOffset(!0)),e.wrap.append(r),e.content.css("visibility","hidden"),setTimeout(function(){r.css(e._getOffset())},16)}}),S(c+n,function(){e._allowZoom()&&(h(),r&&r.remove(),t=null)})}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return e.currItem.hasSize?e.currItem.img:!1},_getOffset:function(i){var n;n=i?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem);var s=n.offset(),r=parseInt(n.css("padding-top"),10),o=parseInt(n.css("padding-bottom"),10);s.top-=t(window).scrollTop()-r;var a={width:n.width(),height:(x?n.innerHeight():n[0].offsetHeight)-o-r};return H()?a["-moz-transform"]=a.transform="translate("+s.left+"px,"+s.top+"px)":(a.left=s.left,a.top=s.top),a}}});var B="iframe",z="//about:blank",U=function(t){if(e.currTemplate[B]){var i=e.currTemplate[B].find("iframe");i.length&&(t||(i[0].src=z),e.isIE8&&i.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(B,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(B),S("BeforeChange",function(t,e,i){e!==i&&(e===B?U():i===B&&U(!0))}),S(c+"."+B,function(){U()})},getIframe:function(i,n){var s=i.src,r=e.st.iframe;t.each(r.patterns,function(){return s.indexOf(this.index)>-1?(this.id&&(s="string"==typeof this.id?s.substr(s.lastIndexOf(this.id)+this.id.length,s.length):this.id.call(this,s)),s=this.src.replace("%id%",s),!1):void 0});var o={};return r.srcAction&&(o[r.srcAction]=s),e._parseMarkup(n,o,i),e.updateStatus("ready"),n}}});var W=function(t){var i=e.items.length;return t>i-1?t-i:0>t?i+t:t},G=function(t,e,i){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,i)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=e.st.gallery,n=".mfp-gallery",r=Boolean(t.fn.mfpFastClick);return e.direction=!0,i&&i.enabled?(o+=" mfp-gallery",S(p+n,function(){i.navigateByImgClick&&e.wrap.on("click"+n,".mfp-img",function(){return e.items.length>1?(e.next(),!1):void 0}),s.on("keydown"+n,function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()})}),S("UpdateStatus"+n,function(t,i){i.text&&(i.text=G(i.text,e.currItem.index,e.items.length))}),S(d+n,function(t,n,s,r){var o=e.items.length;s.counter=o>1?G(i.tCounter,r.index,o):""}),S("BuildControls"+n,function(){if(e.items.length>1&&i.arrows&&!e.arrowLeft){var n=i.arrowMarkup,s=e.arrowLeft=t(n.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(b),o=e.arrowRight=t(n.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(b),a=r?"mfpFastClick":"click";s[a](function(){e.prev()}),o[a](function(){e.next()}),e.isIE7&&(k("b",s[0],!1,!0),k("a",s[0],!1,!0),k("b",o[0],!1,!0),k("a",o[0],!1,!0)),e.container.append(s.add(o))}}),S(f+n,function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout(function(){e.preloadNearbyImages(),e._preloadTimeout=null},16)}),void S(c+n,function(){s.off(n),e.wrap.off("click"+n),e.arrowLeft&&r&&e.arrowLeft.add(e.arrowRight).destroyMfpFastClick(),e.arrowRight=e.arrowLeft=null})):!1},next:function(){e.direction=!0,e.index=W(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=W(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,i=e.st.gallery.preload,n=Math.min(i[0],e.items.length),s=Math.min(i[1],e.items.length);for(t=1;t<=(e.direction?s:n);t++)e._preloadItem(e.index+t);for(t=1;t<=(e.direction?n:s);t++)e._preloadItem(e.index-t)},_preloadItem:function(i){if(i=W(i),!e.items[i].preloaded){var n=e.items[i];n.parsed||(n=e.parseEl(i)),C("LazyLoad",n),"image"===n.type&&(n.img=t('<img class="mfp-img" />').on("load.mfploader",function(){n.hasSize=!0}).on("error.mfploader",function(){n.hasSize=!0,n.loadError=!0,C("LazyLoadError",n)}).attr("src",n.src)),n.preloaded=!0}}}});var q="retina";t.magnificPopup.registerModule(q,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,i=t.ratio;i=isNaN(i)?i():i,i>1&&(S("ImageHasSize."+q,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/i,width:"100%"})}),S("ElementParse."+q,function(e,n){n.src=t.replaceSrc(n,i)}))}}}}),function(){var e=1e3,i="ontouchstart"in window,n=function(){_.off("touchmove"+r+" touchend"+r)},s="mfpFastClick",r="."+s;t.fn.mfpFastClick=function(s){return t(this).each(function(){var o,a=t(this);if(i){var c,l,h,u,d,p;a.on("touchstart"+r,function(t){u=!1,p=1,d=t.originalEvent?t.originalEvent.touches[0]:t.touches[0],l=d.clientX,h=d.clientY,_.on("touchmove"+r,function(t){d=t.originalEvent?t.originalEvent.touches:t.touches,p=d.length,d=d[0],(Math.abs(d.clientX-l)>10||Math.abs(d.clientY-h)>10)&&(u=!0,n())}).on("touchend"+r,function(t){n(),u||p>1||(o=!0,t.preventDefault(),clearTimeout(c),c=setTimeout(function(){o=!1},e),s())})})}a.on("click"+r,function(){o||s()})})},t.fn.destroyMfpFastClick=function(){t(this).off("touchstart"+r+" click"+r),i&&_.off("touchmove"+r+" touchend"+r)}}(),K()}(window.jQuery||window.Zepto);var Kinetic={};!function(t){var e=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,UA:function(){var e=t.navigator&&t.navigator.userAgent||"",i=e.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[],s=!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:n[1]||"",version:n[2]||"0",mobile:s}}(),Filters:{},Node:function(t){this._init(t)},Shape:function(t){this.__init(t)},Container:function(t){this.__init(t)},Stage:function(t){this.___init(t)},BaseLayer:function(t){this.___init(t)},Layer:function(t){this.____init(t)},FastLayer:function(t){this.____init(t)},Group:function(t){this.___init(t)},isDragging:function(){var t=Kinetic.DD;return t?t.isDragging:!1},isDragReady:function(){var t=Kinetic.DD;return t?!!t.node:!1},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){void 0!==e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(void 0!==t){var i=this.names[t];if(void 0!==i){for(var n=0;n<i.length;n++){var s=i[n];s._id===e&&i.splice(n,1)}0===i.length&&delete this.names[t]}}},getAngle:function(t){return this.angleDeg?t*e:t}}}(this),function(t,e){if("object"==typeof exports){var i=require("canvas"),n=require("jsdom").jsdom,s=n("<!DOCTYPE html><html><head></head><body></body></html>"),r=e();return Kinetic.document=s,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=i.Image,Kinetic.root=t,Kinetic._nodeCanvas=i,void(module.exports=r)}"function"==typeof define&&define.amd&&define(e),Kinetic.document=document,Kinetic.window=window,Kinetic.root=t}((1,eval)("this"),function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,i=0;for(this.length=e;e>i;i++)this[i]=t[i];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){var t,e=[],i=this.length;for(t=0;i>t;t++)e.push(this[t]);return e},Kinetic.Collection.toCollection=function(t){var e,i=new Kinetic.Collection,n=t.length;for(e=0;n>e;e++)i.push(t[e]);return i},Kinetic.Collection._mapMethod=function(t){Kinetic.Collection.prototype[t]=function(){var e,i=this.length,n=[].slice.call(arguments);for(e=0;i>e;e++)this[e][t].apply(this[e],n);return this}},Kinetic.Collection.mapMethods=function(t){var e=t.prototype;for(var i in e)Kinetic.Collection._mapMethod(i)},Kinetic.Transform=function(t){this.m=t&&t.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.m[0]*e+this.m[2]*i,s=this.m[1]*e+this.m[3]*i,r=this.m[0]*-i+this.m[2]*e,o=this.m[1]*-i+this.m[3]*e;return this.m[0]=n,this.m[1]=s,this.m[2]=r,this.m[3]=o,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var i=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,s=this.m[2]+this.m[0]*t,r=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=r,this},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],s=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=s,this.m[4]=r,this.m[5]=o,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,s=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=s,this.m[4]=r,this.m[5]=o,this},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var i=this.m[0],n=this.m[1],s=this.m[2],r=this.m[3],o=this.m[4],a=this.m[5],c=(i*(e-a)-n*(t-o))/(i*r-n*s),l=(t-o-s*c)/i;return this.translate(l,c)}};var t="2d",e="[object Array]",i="[object Number]",n="[object String]",s=Math.PI/180,r=180/Math.PI,o="#",a="",c="0",l="Kinetic warning: ",h="Kinetic error: ",u="rgb(",d={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},p=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;
Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return Object.prototype.toString.call(t)==e},_isNumber:function(t){return Object.prototype.toString.call(t)==i},_isString:function(t){return Object.prototype.toString.call(t)==n},_throttle:function(t,e,i){var n,s,r,o=null,a=0;i||(i={});var c=function(){a=i.leading===!1?0:(new Date).getTime(),o=null,r=t.apply(n,s),n=s=null};return function(){var l=(new Date).getTime();a||i.leading!==!1||(a=l);var h=e-(l-a);return n=this,s=arguments,0>=h?(clearTimeout(o),o=null,a=l,r=t.apply(n,s),n=s=null):o||i.trailing===!1||(o=setTimeout(c,h)),r}},_hasMethods:function(t){var e,i=[];for(e in t)this._isFunction(t[e])&&i.push(e);return i.length>0},createCanvasElement:function(){var t=Kinetic.document.createElement("canvas");return t.style=t.style||{},t},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(t){for(;t=t.parentNode;)if(t==Kinetic.document)return!0;return!1},_simplifyArray:function(t){var e,i,n=[],s=t.length,r=Kinetic.Util;for(e=0;s>e;e++)i=t[e],r._isNumber(i)?i=Math.round(1e3*i)/1e3:r._isString(i)||(i=i.toString()),n.push(i);return n},_getImage:function(e,i){var n,s;if(e)if(this._isElement(e))i(e);else if(this._isString(e))n=new Kinetic.window.Image,n.onload=function(){i(n)},n.src=e;else if(e.data){s=Kinetic.Util.createCanvasElement(),s.width=e.width,s.height=e.height;var r=s.getContext(t);r.putImageData(e,0,0),this._getImage(s.toDataURL(),i)}else i(null);else i(null)},_getRGBAString:function(t){var e=t.red||0,i=t.green||0,n=t.blue||0,s=t.alpha||1;return["rgba(",e,",",i,",",n,",",s,")"].join(a)},_rgbToHex:function(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(o,a);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t=c+t;return o+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in d?(e=d[t],{r:e[0],g:e[1],b:e[2]}):t[0]===o?this._hexToRgb(t.substring(1)):t.substr(0,4)===u?(e=p.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var i=this._clone(e);for(var n in t)i[n]=this._isObject(t[n])?this._merge(t[n],i[n]):t[n];return i},cloneObject:function(t){var e={};for(var i in t)e[i]=this._isObject(t[i])?this.cloneObject(t[i]):this._isArray(t[i])?this.cloneArray(t[i]):t[i];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*s},_radToDeg:function(t){return t*r},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw new Error(h+t)},warn:function(t){Kinetic.root.console&&console.warn&&console.warn(l+t)},extend:function(t,e){for(var i in e.prototype)i in t.prototype||(t.prototype[i]=e.prototype[i])},addMethods:function(t,e){var i;for(i in e)t.prototype[i]=e[i]},_getControlPoints:function(t,e,i,n,s,r,o){var a=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),c=Math.sqrt(Math.pow(s-i,2)+Math.pow(r-n,2)),l=o*a/(a+c),h=o*c/(a+c),u=i-l*(s-t),d=n-l*(r-e),p=i+h*(s-t),f=n+h*(r-e);return[u,d,p,f]},_expandPoints:function(t,e){var i,n,s=t.length,r=[];for(i=2;s-2>i;i+=2)n=Kinetic.Util._getControlPoints(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),r.push(n[0]),r.push(n[1]),r.push(t[i]),r.push(t[i+1]),r.push(n[2]),r.push(n[3]);return r},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),function(){var t=Kinetic.Util.createCanvasElement(),e=t.getContext("2d"),i=Kinetic.UA.mobile?function(){var t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i}():1;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){t=t||{};var e=t.pixelRatio||Kinetic.pixelRatio||i;this.pixelRatio=e,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){this.pixelRatio=t,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px"},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(i){try{return this._canvas.toDataURL()}catch(n){return Kinetic.Util.warn("Unable to get data URL. "+n.message),""}}}},Kinetic.SceneCanvas=function(t){t=t||{};var e=t.width||0,i=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.SceneContext(this),this.setSize(e,i)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,t),i.scale(e,e)},setHeight:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,t),i.scale(e,e)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){t=t||{};var e=t.width||0,i=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.HitContext(this),this.setSize(e,i)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var t=",",e="(",i=")",n="([",s="])",r=";",o="()",a="=",c=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(t){this.init(t)},Kinetic.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(c){var l,h,u,d,p=this.traceArr,f=p.length,g="";for(l=0;f>l;l++)h=p[l],u=h.method,u?(d=h.args,g+=u,g+=c?o:Kinetic.Util._isArray(d[0])?n+d.join(t)+s:e+d.join(t)+i):(g+=h.property,c||(g+=a+h.val)),g+=r;return g},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e,i=this.traceArr;i.push(t),e=i.length,e>=Kinetic.traceArrMax&&i.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth(),e.getHeight())},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},fill:function(){this._context.fill()},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){var t,e,i=this,n=c.length,s=Kinetic.Util._simplifyArray,r=this.setAttr,o=function(t){var n,r=i[t];i[t]=function(){return e=s(Array.prototype.slice.call(arguments,0)),n=r.apply(i,arguments),i._trace({method:t,args:e}),n}};for(t=0;n>t;t++)o(c[t]);i.setAttr=function(){r.apply(i,arguments),i._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(t){Kinetic.Context.call(this,t)},Kinetic.SceneContext.prototype={_fillColor:function(t){var e=t.fill()||Kinetic.Util._getRGBAString({red:t.fillRed(),green:t.fillGreen(),blue:t.fillBlue(),alpha:t.fillAlpha()});this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternImage(),i=t.getFillPatternX(),n=t.getFillPatternY(),s=t.getFillPatternScale(),r=Kinetic.getAngle(t.getFillPatternRotation()),o=t.getFillPatternOffset(),a=t.getFillPatternRepeat();(i||n)&&this.translate(i||0,n||0),r&&this.rotate(r),s&&this.scale(s.x,s.y),o&&this.translate(-1*o.x,-1*o.y),this.setAttr("fillStyle",this.createPattern(e,a||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),i=t.getFillLinearGradientEndPoint(),n=t.getFillLinearGradientColorStops(),s=this.createLinearGradient(e.x,e.y,i.x,i.y);if(n){for(var r=0;r<n.length;r+=2)s.addColorStop(n[r],n[r+1]);this.setAttr("fillStyle",s),this.fill()}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),i=t.getFillRadialGradientEndPoint(),n=t.getFillRadialGradientStartRadius(),s=t.getFillRadialGradientEndRadius(),r=t.getFillRadialGradientColorStops(),o=this.createRadialGradient(e.x,e.y,n,i.x,i.y,s),a=0;a<r.length;a+=2)o.addColorStop(r[a],r[a+1]);this.setAttr("fillStyle",o),this.fill()},_fill:function(t){var e=t.fill()||t.fillRed()||t.fillGreen()||t.fillBlue(),i=t.getFillPatternImage(),n=t.getFillLinearGradientColorStops(),s=t.getFillRadialGradientColorStops(),r=t.getFillPriority();e&&"color"===r?this._fillColor(t):i&&"pattern"===r?this._fillPattern(t):n&&"linear-gradient"===r?this._fillLinearGradient(t):s&&"radial-gradient"===r?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):n?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)},_stroke:function(t){var e=t.dash(),i=t.getStrokeScaleEnabled();t.hasStroke()&&(i||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&this.setLineDash(e),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.stroke()||Kinetic.Util._getRGBAString({red:t.strokeRed(),green:t.strokeGreen(),blue:t.strokeBlue(),alpha:t.strokeAlpha()})),t._strokeFunc(this),i||this.restore())},_applyShadow:function(t){var e=Kinetic.Util,i=t.getAbsoluteOpacity(),n=e.get(t.getShadowColor(),"black"),s=e.get(t.getShadowBlur(),5),r=e.get(t.getShadowOpacity(),1),o=e.get(t.getShadowOffset(),{x:0,y:0});r&&this.setAttr("globalAlpha",r*i),this.setAttr("shadowColor",n),this.setAttr("shadowBlur",s),this.setAttr("shadowOffsetX",o.x),this.setAttr("shadowOffsetY",o.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(t){Kinetic.Context.call(this,t)},Kinetic.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){t.hasStroke()&&(this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var t="get",e="set";Kinetic.Factory={addGetterSetter:function(t,e,i,n,s){this.addGetter(t,e,i),this.addSetter(t,e,n,s),this.addOverloadedGetterSetter(t,e)},addGetter:function(e,i,n){var s=t+Kinetic.Util._capitalize(i);e.prototype[s]=function(){var t=this.attrs[i];return void 0===t?n:t}},addSetter:function(t,i,n,s){var r=e+Kinetic.Util._capitalize(i);t.prototype[r]=function(t){return n&&(t=n.call(this,t)),this._setAttr(i,t),s&&s.call(this),this}},addComponentsGetterSetter:function(i,n,s,r,o){var a,c,l=s.length,h=Kinetic.Util._capitalize,u=t+h(n),d=e+h(n);i.prototype[u]=function(){var t={};for(a=0;l>a;a++)c=s[a],t[c]=this.getAttr(n+h(c));return t},i.prototype[d]=function(t){var e,i=this.attrs[n];r&&(t=r.call(this,t));for(e in t)this._setAttr(n+h(e),t[e]);return this._fireChangeEvent(n,i,t),o&&o.call(this),this},this.addOverloadedGetterSetter(i,n)},addOverloadedGetterSetter:function(i,n){var s=Kinetic.Util._capitalize(n),r=e+s,o=t+s;i.prototype[n]=function(){return arguments.length?(this[r](arguments[0]),this):this[o]()}},backCompat:function(t,e){var i;for(i in e)t.prototype[i]=t.prototype[e[i]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(t){return t>255?255:0>t?0:Math.round(t)},alphaComponent:function(t){return t>1?1:1e-4>t?1e-4:t}}}(),function(){var t="absoluteOpacity",e="absoluteTransform",i="Change",n="children",s=".",r="",o="get",a="id",c="kinetic",l="listening",h="mouseenter",u="mouseleave",d="name",p="set",f="Shape",g=" ",m="stage",v="transform",y="Stage",b="visible",w=["id"],x=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(g);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(i){var n=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(i),this.on(x,function(){this._clearCache(v),n._clearSelfAndDescendantCache(e)}),this.on("visibleChange.kinetic",function(){n._clearSelfAndDescendantCache(b)}),this.on("listeningChange.kinetic",function(){n._clearSelfAndDescendantCache(l)}),this.on("opacityChange.kinetic",function(){n._clearSelfAndDescendantCache(t)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){var i=this._cache[t];return void 0===i&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(t){this._clearCache(t),this.children&&this.getChildren().each(function(e){e._clearSelfAndDescendantCache(t)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var e=t||{},i=e.x||0,n=e.y||0,s=e.width||this.width(),r=e.height||this.height(),o=e.drawBorder||!1;if(this.getLayer(),0===s||0===r)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var a=new Kinetic.SceneCanvas({pixelRatio:1,width:s,height:r}),c=new Kinetic.SceneCanvas({pixelRatio:1,width:s,height:r}),l=new Kinetic.HitCanvas({width:s,height:r}),h=(this.transformsEnabled(),this.x(),this.y(),a.getContext()),u=l.getContext();return this.clearCache(),h.save(),u.save(),o&&(h.save(),h.beginPath(),h.rect(0,0,s,r),h.closePath(),h.setAttr("strokeStyle","red"),h.setAttr("lineWidth",5),h.stroke(),h.restore()),h.translate(-1*i,-1*n),u.translate(-1*i,-1*n),"Shape"===this.nodeType&&(h.translate(-1*this.x(),-1*this.y()),u.translate(-1*this.x(),-1*this.y())),this.drawScene(a,this),this.drawHit(l,this),h.restore(),u.restore(),this._cache.canvas={scene:a,filter:c,hit:l},this},_drawCachedSceneCanvas:function(t){t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(this._getCachedSceneCanvas()._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var t,e,i,n,s=this.filters(),r=this._cache.canvas,o=r.scene,a=r.filter,c=a.getContext();if(s){if(!this._filterUpToDate){try{for(t=s.length,c.clear(),c.drawImage(o._canvas,0,0),e=c.getImageData(0,0,a.getWidth(),a.getHeight()),i=0;t>i;i++)n=s[i],n.call(this,e),c.putImageData(e,0,0)}catch(l){Kinetic.Util.warn("Unable to apply filter. "+l.message)}this._filterUpToDate=!0}return a}return o},_drawCachedHitCanvas:function(t){var e=this._cache.canvas,i=e.hit;t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(i._canvas,0,0),t.restore()},on:function(t,e){var i,n,o,a,c,l=t.split(g),h=l.length;for(i=0;h>i;i++)n=l[i],o=n.split(s),a=o[0],c=o[1]||r,this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:c,handler:e});return this},off:function(t){var e,i,n,r,o,a,c=t.split(g),l=c.length;for(e=0;l>e;e++)if(n=c[e],r=n.split(s),o=r[0],a=r[1],o)this.eventListeners[o]&&this._off(o,a);else for(i in this.eventListeners)this._off(i,a);return this},dispatchEvent:function(t){var e={target:this,type:t.type,evt:t};this.fire(t.type,e)},addEventListener:function(t,e){this.on(t,function(t){e.call(this,t.evt)})},remove:function(){var i=this.getParent();return i&&i.children&&(i.children.splice(this.index,1),i._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(e),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(t),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e=o+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,i;if(t)for(e in t)e===n||(i=p+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(l,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?e?e.isListening():!0:t},isVisible:function(){return this._getCache(b,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?e?e.isVisible():!0:t},shouldDrawHit:function(){var t=this.getLayer();return t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(c){for(e=[],i=c.length,n=0;i>n;n++)s=c[n],a++,s.nodeType!==f&&(e=e.concat(s.getChildren().toArray())),s._id===o._id&&(n=i);e.length>0&&e[0].getDepth()<=r&&t(e)}var e,i,n,s,r=this.getDepth(),o=this,a=0;return o.nodeType!==y&&t(o.getStage().getChildren()),a},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform().getMatrix(),e=new Kinetic.Transform,i=this.offset();return e.m=t.slice(),e.translate(i.x,i.y),e.getTranslation()},setAbsolutePosition:function(t){var e,i=this._clearTransform();return this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,e=this.getAbsoluteTransform(),e.invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(i),this},_setTransform:function(t){var i;for(i in t)this.attrs[i]=t[i];this._clearCache(v),this._clearSelfAndDescendantCache(e)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(v),this._clearSelfAndDescendantCache(e),t},move:function(t){var e=t.x,i=t.y,n=this.getX(),s=this.getY();return void 0!==e&&(n+=e),void 0!==i&&(s+=i),this.setPosition({x:n,y:s}),this},_eachAncestorReverse:function(t,e){var i,n,s=[],r=this.getParent();if(e&&e._id===this._id)return t(this),!0;for(s.unshift(this);r&&(!e||r._id!==e._id);)s.unshift(r),r=r.parent;for(i=s.length,n=0;i>n;n++)t(s[n])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var t=this.index,e=this.parent.getChildren().length;return e-1>t?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(t){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(t,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return Kinetic.Node.prototype.remove.call(this),t.add(this),this},toObject:function(){var t,e,i,n,s=Kinetic.Util,r={},o=this.getAttrs();r.attrs={};for(t in o)e=o[t],s._isFunction(e)||s._isElement(e)||s._isObject(e)&&s._hasMethods(e)||(i=this[t],delete o[t],n=i?i.call(this):null,o[t]=e,n!==e&&(r.attrs[t]=e));return r.className=this.getClassName(),r},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache(m,this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,i){return i?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(t){return t?this._getAbsoluteTransform(t):this._getCache(e,this._getAbsoluteTransform)},_getAbsoluteTransform:function(t){var e,i,n=new Kinetic.Transform;return this._eachAncestorReverse(function(t){e=t.transformsEnabled(),i=t.getTransform(),"all"===e?n.multiply(i):"position"===e&&n.translate(t.x(),t.y())},t),n},getTransform:function(){return this._getCache(v,this._getTransform)},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),i=this.getY(),n=Kinetic.getAngle(this.getRotation()),s=this.getScaleX(),r=this.getScaleY(),o=this.getSkewX(),a=this.getSkewY(),c=this.getOffsetX(),l=this.getOffsetY();return(0!==e||0!==i)&&t.translate(e,i),0!==n&&t.rotate(n),(0!==o||0!==a)&&t.skew(o,a),(1!==s||1!==r)&&t.scale(s,r),(0!==c||0!==l)&&t.translate(-1*c,-1*l),t},clone:function(t){var e,i,n,s,r,o=this.getClassName(),a=Kinetic.Util.cloneObject(this.attrs);for(var l in w){var h=w[l];delete a[h]}for(e in t)a[e]=t[e];var u=new Kinetic[o](a);for(e in this.eventListeners)for(i=this.eventListeners[e],n=i.length,s=0;n>s;s++)r=i[s],r.name.indexOf(c)<0&&(u.eventListeners[e]||(u.eventListeners[e]=[]),u.eventListeners[e].push(r));return u},toDataURL:function(t){t=t||{};var e=t.mimeType||null,i=t.quality||null,n=this.getStage(),s=t.x||0,r=t.y||0,o=new Kinetic.SceneCanvas({width:t.width||this.getWidth()||(n?n.getWidth():0),height:t.height||this.getHeight()||(n?n.getHeight():0),pixelRatio:1}),a=o.getContext();return a.save(),(s||r)&&a.translate(-1*s,-1*r),this.drawScene(o),a.restore(),o.toDataURL(e,i)},toImage:function(t){Kinetic.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(t){return this.nodeType===t?[this]:[]},_off:function(t,e){var i,n,s=this.eventListeners[t];for(i=0;i<s.length;i++)if(n=s[i].name,!("kinetic"===n&&"kinetic"!==e||e&&n!==e)){if(s.splice(i,1),0===s.length){delete this.eventListeners[t];break}i--}},_fireChangeEvent:function(t,e,n){this._fire(t+i,{oldVal:e,newVal:n})},setId:function(t){var e=this.getId();return Kinetic._removeId(e),Kinetic._addId(this,t),this._setAttr(a,t),this},setName:function(t){var e=this.getName();return Kinetic._removeName(e,this._id),Kinetic._addName(this,t),this._setAttr(d,t),this},setAttr:function(){var t=Array.prototype.slice.call(arguments),e=t[0],i=t[1],n=p+Kinetic.Util._capitalize(e),s=this[n];return Kinetic.Util._isFunction(s)?s.call(this,i):this._setAttr(e,i),this},_setAttr:function(t,e){var i;void 0!==e&&(i=this.attrs[t],this.attrs[t]=e,this._fireChangeEvent(t,i,e))},_setComponentAttr:function(t,e,i){var n;void 0!==i&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,n,i))},_fireAndBubble:function(t,e,i){var n=!0;e&&this.nodeType===f&&(e.target=this),t===h&&i&&this._id===i._id?n=!1:t===u&&i&&this._id===i._id&&(n=!1),n&&(this._fire(t,e),e&&!e.cancelBubble&&this.parent&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i.parent):this._fireAndBubble.call(this.parent,t,e)))},_fire:function(t,e){var i,n=this.eventListeners[t];if(e.type=t,n)for(i=0;i<n.length;i++)n[i].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var i,n,s,r=Kinetic.Node.prototype.getClassName.call(t),o=t.children;if(e&&(t.attrs.container=e),i=new Kinetic[r](t.attrs),o)for(n=o.length,s=0;n>s;s++)i.add(this._createNode(o[s]));return i},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(t){var e,i,n=t.data,s=n.length;for(e=0;s>e;e+=4)i=.34*n[e]+.5*n[e+1]+.16*n[e+2],n[e]=i,n[e+1]=i,n[e+2]=i}}(),function(){Kinetic.Filters.Brighten=function(t){var e,i=255*this.brightness(),n=t.data,s=n.length;for(e=0;s>e;e+=4)n[e]+=i,n[e+1]+=i,n[e+2]+=i},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(t){var e,i=t.data,n=i.length;for(e=0;n>e;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]}}(),function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function e(e,s){var r,o,a,c,l,h,u,d,p,f,g,m,v,y,b,w,x,_,S,k,C,T,K,P,E=e.data,D=e.width,A=e.height,F=s+s+1,I=D-1,$=A-1,L=s+1,O=L*(L+1)/2,N=new t,M=null,R=N,j=null,H=null,B=i[s],z=n[s];for(a=1;F>a;a++)R=R.next=new t,a==L&&(M=R);for(R.next=N,u=h=0,o=0;A>o;o++){for(w=x=_=S=d=p=f=g=0,m=L*(k=E[h]),v=L*(C=E[h+1]),y=L*(T=E[h+2]),b=L*(K=E[h+3]),d+=O*k,p+=O*C,f+=O*T,g+=O*K,R=N,a=0;L>a;a++)R.r=k,R.g=C,R.b=T,R.a=K,R=R.next;for(a=1;L>a;a++)c=h+((a>I?I:a)<<2),d+=(R.r=k=E[c])*(P=L-a),p+=(R.g=C=E[c+1])*P,f+=(R.b=T=E[c+2])*P,g+=(R.a=K=E[c+3])*P,w+=k,x+=C,_+=T,S+=K,R=R.next;for(j=N,H=M,r=0;D>r;r++)E[h+3]=K=g*B>>z,0!==K?(K=255/K,E[h]=(d*B>>z)*K,E[h+1]=(p*B>>z)*K,E[h+2]=(f*B>>z)*K):E[h]=E[h+1]=E[h+2]=0,d-=m,p-=v,f-=y,g-=b,m-=j.r,v-=j.g,y-=j.b,b-=j.a,c=u+((c=r+s+1)<I?c:I)<<2,w+=j.r=E[c],x+=j.g=E[c+1],_+=j.b=E[c+2],S+=j.a=E[c+3],d+=w,p+=x,f+=_,g+=S,j=j.next,m+=k=H.r,v+=C=H.g,y+=T=H.b,b+=K=H.a,w-=k,x-=C,_-=T,S-=K,H=H.next,h+=4;u+=D}for(r=0;D>r;r++){for(x=_=S=w=p=f=g=d=0,h=r<<2,m=L*(k=E[h]),v=L*(C=E[h+1]),y=L*(T=E[h+2]),b=L*(K=E[h+3]),d+=O*k,p+=O*C,f+=O*T,g+=O*K,R=N,a=0;L>a;a++)R.r=k,R.g=C,R.b=T,R.a=K,R=R.next;for(l=D,a=1;s>=a;a++)h=l+r<<2,d+=(R.r=k=E[h])*(P=L-a),p+=(R.g=C=E[h+1])*P,f+=(R.b=T=E[h+2])*P,g+=(R.a=K=E[h+3])*P,w+=k,x+=C,_+=T,S+=K,R=R.next,$>a&&(l+=D);for(h=r,j=N,H=M,o=0;A>o;o++)c=h<<2,E[c+3]=K=g*B>>z,K>0?(K=255/K,E[c]=(d*B>>z)*K,E[c+1]=(p*B>>z)*K,E[c+2]=(f*B>>z)*K):E[c]=E[c+1]=E[c+2]=0,d-=m,p-=v,f-=y,g-=b,m-=j.r,v-=j.g,y-=j.b,b-=j.a,c=r+((c=o+L)<$?c:$)*D<<2,d+=w+=j.r=E[c],p+=x+=j.g=E[c+1],f+=_+=j.b=E[c+2],g+=S+=j.a=E[c+3],j=j.next,m+=k=H.r,v+=C=H.g,y+=T=H.b,b+=K=H.a,w-=k,x-=C,_-=T,S-=K,H=H.next,h+=D}}var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];
Kinetic.Filters.Blur=function(t){var i=Math.round(this.blurRadius());i>0&&e(t,i)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,i){var n=4*(i*t.width+e),s=[];return s.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),s}function e(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function i(t){for(var e=[0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function n(n,s){var r=t(n,0,0),o=t(n,n.width-1,0),a=t(n,0,n.height-1),c=t(n,n.width-1,n.height-1),l=s||10;if(e(r,o)<l&&e(o,c)<l&&e(c,a)<l&&e(a,r)<l){for(var h=i([o,r,c,a]),u=[],d=0;d<n.width*n.height;d++){var p=e(h,[n.data[4*d],n.data[4*d+1],n.data[4*d+2]]);u[d]=l>p?0:255}return u}}function s(t,e){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}function r(t,e,i){for(var n=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[],a=0;i>a;a++)for(var c=0;e>c;c++){for(var l=a*e+c,h=0,u=0;s>u;u++)for(var d=0;s>d;d++){var p=a+u-r,f=c+d-r;if(p>=0&&i>p&&f>=0&&e>f){var g=p*e+f,m=n[u*s+d];h+=t[g]*m}}o[l]=2040===h?255:0}return o}function o(t,e,i){for(var n=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[],a=0;i>a;a++)for(var c=0;e>c;c++){for(var l=a*e+c,h=0,u=0;s>u;u++)for(var d=0;s>d;d++){var p=a+u-r,f=c+d-r;if(p>=0&&i>p&&f>=0&&e>f){var g=p*e+f,m=n[u*s+d];h+=t[g]*m}}o[l]=h>=1020?255:0}return o}function a(t,e,i){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[],a=0;i>a;a++)for(var c=0;e>c;c++){for(var l=a*e+c,h=0,u=0;s>u;u++)for(var d=0;s>d;d++){var p=a+u-r,f=c+d-r;if(p>=0&&i>p&&f>=0&&e>f){var g=p*e+f,m=n[u*s+d];h+=t[g]*m}}o[l]=h}return o}Kinetic.Filters.Mask=function(t){var e=this.threshold(),i=n(t,e);return i&&(i=r(i,t.width,t.height),i=o(i,t.width,t.height),i=a(i,t.width,t.height),s(t,i)),t},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(t){var e,i,n=t.data,s=n.length,r=this.red(),o=this.green(),a=this.blue();for(e=0;s>e;e+=4)i=(.34*n[e]+.5*n[e+1]+.16*n[e+2])/255,n[e]=i*r,n[e+1]=i*o,n[e+2]=i*a,n[e+3]=n[e+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(t){var e,i,n,s,r,o=t.data,a=o.length,c=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,u=c*l*Math.cos(h*Math.PI/180),d=c*l*Math.sin(h*Math.PI/180),p=.299*c+.701*u+.167*d,f=.587*c-.587*u+.33*d,g=.114*c-.114*u-.497*d,m=.299*c-.299*u-.328*d,v=.587*c+.413*u+.035*d,y=.114*c-.114*u+.293*d,b=.299*c-.3*u+1.25*d,w=.587*c-.586*u-1.05*d,x=.114*c+.886*u-.2*d;for(e=0;a>e;e+=4)i=o[e+0],n=o[e+1],s=o[e+2],r=o[e+3],o[e+0]=p*i+f*n+g*s,o[e+1]=m*i+v*n+y*s,o[e+2]=b*i+w*n+x*s,o[e+3]=r},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(t){var e,i,n,s,r,o=t.data,a=o.length,c=1,l=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,u=127*this.luminance(),d=c*l*Math.cos(h*Math.PI/180),p=c*l*Math.sin(h*Math.PI/180),f=.299*c+.701*d+.167*p,g=.587*c-.587*d+.33*p,m=.114*c-.114*d-.497*p,v=.299*c-.299*d-.328*p,y=.587*c+.413*d+.035*p,b=.114*c-.114*d+.293*p,w=.299*c-.3*d+1.25*p,x=.587*c-.586*d-1.05*p,_=.114*c+.886*d-.2*p;for(e=0;a>e;e+=4)i=o[e+0],n=o[e+1],s=o[e+2],r=o[e+3],o[e+0]=f*i+g*n+m*s+u,o[e+1]=v*i+y*n+b*s+u,o[e+2]=w*i+x*n+_*s+u,o[e+3]=r}}(),function(){Kinetic.Filters.Emboss=function(t){var e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),n=this.embossDirection(),s=this.embossBlend(),r=0,o=0,a=t.data,c=t.width,l=t.height,h=4*c,u=l;switch(n){case"top-left":r=-1,o=-1;break;case"top":r=-1,o=0;break;case"top-right":r=-1,o=1;break;case"right":r=0,o=1;break;case"bottom-right":r=1,o=1;break;case"bottom":r=1,o=0;break;case"bottom-left":r=1,o=-1;break;case"left":r=0,o=-1}do{var d=(u-1)*h,p=r;1>u+p&&(p=0),u+p>l&&(p=0);var f=(u-1+p)*c*4,g=c;do{var m=d+4*(g-1),v=o;1>g+v&&(v=0),g+v>c&&(v=0);var y=f+4*(g-1+v),b=a[m]-a[y],w=a[m+1]-a[y+1],x=a[m+2]-a[y+2],_=b,S=_>0?_:-_,k=w>0?w:-w,C=x>0?x:-x;if(k>S&&(_=w),C>S&&(_=x),_*=e,s){var T=a[m]+_,K=a[m+1]+_,P=a[m+2]+_;a[m]=T>255?255:0>T?0:T,a[m+1]=K>255?255:0>K?0:K,a[m+2]=P>255?255:0>P?0:P}else{var E=i-_;0>E?E=0:E>255&&(E=255),a[m]=a[m+1]=a[m+2]=E}}while(--g)}while(--u)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,i,n,s){var r,o=i-e,a=s-n;return 0===o?n+a/2:0===a?n:(r=(t-e)/o,r=a*r+n)}Kinetic.Filters.Enhance=function(e){var i,n,s,r,o=e.data,a=o.length,c=o[0],l=c,h=o[1],u=h,d=o[2],p=d,f=o[3],g=f,m=this.enhance();if(0!==m){for(r=0;a>r;r+=4)i=o[r+0],c>i?c=i:i>l&&(l=i),n=o[r+1],h>n?h=n:n>u&&(u=n),s=o[r+2],d>s?d=s:s>p&&(p=s);l===c&&(l=255,c=0),u===h&&(u=255,h=0),p===d&&(p=255,d=0),g===f&&(g=255,f=0);var v,y,b,w,x,_,S,k,C,T,K,P;for(m>0?(y=l+m*(255-l),b=c-m*(c-0),x=u+m*(255-u),_=h-m*(h-0),k=p+m*(255-p),P=d-m*(d-0),K=g+m*(255-g),C=f-m*(f-0)):(v=.5*(l+c),y=l+m*(l-v),b=c+m*(c-v),w=.5*(u+h),x=u+m*(u-w),_=h+m*(h-w),S=.5*(p+d),k=p+m*(p-S),P=d+m*(d-S),T=.5*(g+f),K=g+m*(g-T),C=f+m*(f-T)),r=0;a>r;r+=4)o[r+0]=t(o[r+0],c,l,b,y),o[r+1]=t(o[r+1],h,u,_,x),o[r+2]=t(o[r+2],d,p,P,k)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(t){var e,i=Math.round(254*this.levels())+1,n=t.data,s=n.length,r=255/i;for(e=0;s>e;e+=1)n[e]=Math.floor(n[e]/r)*r},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(t){var e,i=255*this.noise(),n=t.data,s=n.length,r=i/2;for(e=0;s>e;e+=4)n[e+0]+=r-2*r*Math.random(),n[e+1]+=r-2*r*Math.random(),n[e+2]+=r-2*r*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(t){var e,i,n,s,r,o,a,c,l,h,u,d,p,f,g=Math.ceil(this.pixelSize()),m=t.width,v=t.height,y=Math.ceil(m/g),b=Math.ceil(v/g);for(t=t.data,d=0;y>d;d+=1)for(p=0;b>p;p+=1){for(s=0,r=0,o=0,a=0,c=d*g,l=c+g,h=p*g,u=h+g,f=0,e=c;l>e;e+=1)if(!(e>=m))for(i=h;u>i;i+=1)i>=v||(n=4*(m*i+e),s+=t[n+0],r+=t[n+1],o+=t[n+2],a+=t[n+3],f+=1);for(s/=f,r/=f,o/=f,e=c;l>e;e+=1)if(!(e>=m))for(i=h;u>i;i+=1)i>=v||(n=4*(m*i+e),t[n+0]=s,t[n+1]=r,t[n+2]=o,t[n+3]=a)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(t){var e,i=255*this.threshold(),n=t.data,s=n.length;for(e=0;s>e;e+=1)n[e]=n[e]<i?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(t){var e,i,n,s,r,o,a,c,l,h=t.data,u=t.width,d=t.height,p=4*u;do{e=(d-1)*p,i=u;do n=e+4*(i-1),s=h[n],r=h[n+1],o=h[n+2],a=.393*s+.769*r+.189*o,c=.349*s+.686*r+.168*o,l=.272*s+.534*r+.131*o,h[n]=a>255?255:a,h[n+1]=c>255?255:c,h[n+2]=l>255?255:l,h[n+3]=h[n+3];while(--i)}while(--d)}}(),function(){Kinetic.Filters.Solarize=function(t){var e=t.data,i=t.width,n=t.height,s=4*i,r=n;do{var o=(r-1)*s,a=i;do{var c=o+4*(a-1),l=e[c],h=e[c+1],u=e[c+2];l>127&&(l=255-l),h>127&&(h=255-h),u>127&&(u=255-u),e[c]=l,e[c+1]=h,e[c+2]=u}while(--a)}while(--r)}}(),function(){var t=function(t,e,i){var n,s,r,o,a=t.data,c=e.data,l=t.width,h=t.height,u=i.polarCenterX||l/2,d=i.polarCenterY||h/2,p=0,f=0,g=0,m=0,v=Math.sqrt(u*u+d*d);s=l-u,r=h-d,o=Math.sqrt(s*s+r*r),v=o>v?o:v;var y,b,w,x,_=h,S=l,k=360/S*Math.PI/180;for(b=0;S>b;b+=1)for(w=Math.sin(b*k),x=Math.cos(b*k),y=0;_>y;y+=1)s=Math.floor(u+v*y/_*x),r=Math.floor(d+v*y/_*w),n=4*(r*l+s),p=a[n+0],f=a[n+1],g=a[n+2],m=a[n+3],n=4*(b+y*l),c[n+0]=p,c[n+1]=f,c[n+2]=g,c[n+3]=m},e=function(t,e,i){var n,s,r,o,a,c,l=t.data,h=e.data,u=t.width,d=t.height,p=i.polarCenterX||u/2,f=i.polarCenterY||d/2,g=0,m=0,v=0,y=0,b=Math.sqrt(p*p+f*f);s=u-p,r=d-f,c=Math.sqrt(s*s+r*r),b=c>b?c:b;var w,x,_,S,k=d,C=u,T=i.polarRotation||0;for(s=0;u>s;s+=1)for(r=0;d>r;r+=1)o=s-p,a=r-f,w=Math.sqrt(o*o+a*a)*k/b,x=(180*Math.atan2(a,o)/Math.PI+360+T)%360,x=x*C/360,_=Math.floor(x),S=Math.floor(w),n=4*(S*u+_),g=l[n+0],m=l[n+1],v=l[n+2],y=l[n+3],n=4*(r*u+s),h[n+0]=g,h[n+1]=m,h[n+2]=v,h[n+3]=y},i=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(n){var s,r,o,a,c,l,h,u,d,p,f=n.width,g=n.height,m=Math.round(this.kaleidoscopePower()),v=Math.round(this.kaleidoscopeAngle()),y=Math.floor(f*(v%360)/360);if(!(1>m)){i.width=f,i.height=g;var b=i.getContext("2d").getImageData(0,0,f,g);t(n,b,{polarCenterX:f/2,polarCenterY:g/2});for(var w=f/Math.pow(2,m);8>=w;)w=2*w,m-=1;w=Math.ceil(w);var x=w,_=0,S=x,k=1;for(y+w>f&&(_=x,S=0,k=-1),r=0;g>r;r+=1)for(s=_;s!==S;s+=k)o=Math.round(s+y)%f,d=4*(f*r+o),c=b.data[d+0],l=b.data[d+1],h=b.data[d+2],u=b.data[d+3],p=4*(f*r+s),b.data[p+0]=c,b.data[p+1]=l,b.data[p+2]=h,b.data[p+3]=u;for(r=0;g>r;r+=1)for(x=Math.floor(w),a=0;m>a;a+=1){for(s=0;x+1>s;s+=1)d=4*(f*r+s),c=b.data[d+0],l=b.data[d+1],h=b.data[d+2],u=b.data[d+3],p=4*(f*r+2*x-s-1),b.data[p+0]=c,b.data[p+1]=l,b.data[p+2]=h,b.data[p+3]=u;x*=2}e(b,n,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t){Kinetic.root.setTimeout(t,1e3/60)}function e(){return s.apply(Kinetic.root,arguments)}var i=500,n=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),s=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||t}();Kinetic.Animation=function(t,e){var i=Kinetic.Animation;this.func=t,this.setLayers(e),this.id=i.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n()}},Kinetic.Animation.prototype={setLayers:function(t){var e=[];e=t?t.length>0?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,i,n=this.layers;if(n){for(e=n.length,i=0;e>i;i++)if(n[i]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){var t,e=Kinetic.Animation,i=e.animations,n=i.length;for(t=0;n>t;t++)if(i[t].id===this.id)return!0;return!1},start:function(){var t=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),t._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){var e,i=t.id,n=this.animations,s=n.length;for(e=0;s>e;e++)if(n[e].id===i){this.animations.splice(e,1);break}},Kinetic.Animation._runFrames=function(){var t,e,i,s,r,o,a,c,l={},h=this.animations;for(s=0;s<h.length;s++){for(t=h[s],e=t.layers,i=t.func,t._updateFrameObject(n()),o=e.length,r=0;o>r;r++)a=e[r],void 0!==a._id&&(l[a._id]=a);i&&i.call(t,t.frame)}for(c in l)l[c].draw()},Kinetic.Animation._animationLoop=function(){var t=Kinetic.Animation;t.animations.length?(e(t._animationLoop),t._runFrames()):t.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var t=this;this.animRunning||(this.animRunning=!0,t._animationLoop())};var r=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){r.call(this,t)},Kinetic.Layer.prototype.batchDraw=function(){var t=this,e=Kinetic.Animation;this.batchAnim||(this.batchAnim=new e(function(){t.lastBatchDrawTime&&n()-t.lastBatchDrawTime>i&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=n(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}((1,eval)("this")),function(){var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,i=2,n=3,s=0;Kinetic.Tween=function(e){var i,n=this,o=e.node,a=o._id,c=e.duration||1,l=e.easing||Kinetic.Easings.Linear,h=!!e.yoyo;this.node=o,this._id=s++,this.anim=new Kinetic.Animation(function(){n.tween.onEnterFrame()},o.getLayer()),this.tween=new r(i,function(t){n._tweenFunc(t)},l,0,1,1e3*c,h),this._addListeners(),Kinetic.Tween.attrs[a]||(Kinetic.Tween.attrs[a]={}),Kinetic.Tween.attrs[a][this._id]||(Kinetic.Tween.attrs[a][this._id]={}),Kinetic.Tween.tweens[a]||(Kinetic.Tween.tweens[a]={});for(i in e)void 0===t[i]&&this._addAttr(i,e[i]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var i,n,s,r,o,a=this.node,c=a._id;if(s=Kinetic.Tween.tweens[c][t],s&&delete Kinetic.Tween.attrs[c][s][t],i=a.getAttr(t),Kinetic.Util._isArray(e))for(n=[],o=e.length,r=0;o>r;r++)n.push(e[r]-i[r]);else n=e-i;Kinetic.Tween.attrs[c][this._id][t]={start:i,diff:n},Kinetic.Tween.tweens[c][t]=this._id},_tweenFunc:function(t){var e,i,n,s,r,o,a,c=this.node,l=Kinetic.Tween.attrs[c._id][this._id];for(e in l){if(i=l[e],n=i.start,s=i.diff,Kinetic.Util._isArray(n))for(r=[],a=n.length,o=0;a>o;o++)r.push(n[o]+s[o]*t);else r=n+s*t;c.setAttr(e,r)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.node,this.tween.reset(),this},seek:function(t){return this.node,this.tween.seek(1e3*t),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.node,this.tween.finish(),this},destroy:function(){var t,e=this.node._id,i=this._id,n=Kinetic.Tween.tweens[e];this.pause();for(t in n)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][i]}};var r=function(t,e,i,n,s,r,o){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=s-this.begin,this.pause()};r.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>t?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=i,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=n,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===i?this.setTime(t):this.state===n&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,i,n){var s=1.70158;return i*(t/=n)*t*((s+1)*t-s)+e},BackEaseOut:function(t,e,i,n){var s=1.70158;return i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},BackEaseInOut:function(t,e,i,n){var s=1.70158;return(t/=n/2)<1?i/2*t*t*(((s*=1.525)+1)*t-s)+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},ElasticEaseIn:function(t,e,i,n,s,r){var o=0;return 0===t?e:1==(t/=n)?e+i:(r||(r=.3*n),!s||s<Math.abs(i)?(s=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-o)*Math.PI/r))+e)},ElasticEaseOut:function(t,e,i,n,s,r){var o=0;return 0===t?e:1==(t/=n)?e+i:(r||(r=.3*n),!s||s<Math.abs(i)?(s=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin(2*(t*n-o)*Math.PI/r)+i+e)},ElasticEaseInOut:function(t,e,i,n,s,r){var o=0;return 0===t?e:2==(t/=n/2)?e+i:(r||(r=.3*n*1.5),!s||s<Math.abs(i)?(s=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/s),1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-o)*Math.PI/r)+e:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-o)*Math.PI/r)*.5+i+e)},BounceEaseOut:function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,i,n){return i-Kinetic.Easings.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut:function(t,e,i,n){return n/2>t?.5*Kinetic.Easings.BounceEaseIn(2*t,0,i,n)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-n,0,i,n)+.5*i+e},EaseIn:function(t,e,i,n){return i*(t/=n)*t+e},EaseOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,i,n){return i*t/n+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,i=e.node;if(i){if(!e.isDragging){var n=i.getStage().getPointerPosition(),s=i.dragDistance(),r=Math.max(Math.abs(n.x-e.startPointerPos.x),Math.abs(n.y-e.startPointerPos.y));if(s>r)return}i._setDragPosition(t),e.isDragging||(e.isDragging=!0,i.fire("dragstart",{type:"dragstart",target:i,evt:t},!0)),i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)}},_endDragBefore:function(t){var e,i,n=Kinetic.DD,s=n.node;s&&(e=s.nodeType,i=s.getLayer(),n.anim.stop(),n.isDragging&&(n.isDragging=!1,Kinetic.listenClickTap=!1,t&&(t.dragEndNode=s)),delete n.node,(i||s).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",{type:"dragend",target:e,evt:t},!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),i=this.getLayer(),n=e.getPointerPosition(),s=this.getAbsolutePosition();n&&(t.node&&t.node.stopDrag(),t.node=this,t.startPointerPos=n,t.offset.x=n.x-s.x,t.offset.y=n.y-s.y,t.anim.setLayers(i||this.getLayers()),t.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(t){var e=Kinetic.DD,i=this.getStage().getPointerPosition(),n=this.getDragBoundFunc();if(i){var s={x:i.x-e.offset.x,y:i.y-e.offset.y};void 0!==n&&(s=n.call(this,s,t)),this.setAbsolutePosition(s)}},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var e=Kinetic.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return t.node&&t.node._id===this._id&&t.isDragging},Kinetic.Node.prototype._listenDrag=function(){var t=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)}):this.on("mousedown.kinetic touchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var e=Kinetic.document.documentElement;e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(t){if(t){var e=new Kinetic.Collection;return this.children.each(function(i){t(i)&&e.push(i)}),e}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),i=0;i<e.length;i++)t=e[i],delete t.parent,t.index=0,t.hasChildren()&&t.removeChildren(),t.remove();return e=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),i=0;i<e.length;i++)t=e[i],delete t.parent,t.index=0,t.destroy();return e=null,this.children=new Kinetic.Collection,this},add:function(t){if(!(arguments.length>1)){if(t.getParent())return void t.moveTo(this);var e=this.children;return this._validateAdd(t),t.index=e.length,t.parent=this,e.push(t),this._fire("add",{child:t}),this}for(var i=0;i<arguments.length;i++)this.add(arguments[i])},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(t){var e,i,n,s,r,o,a,c=[],l=t.replace(/ /g,"").split(","),h=l.length;for(e=0;h>e;e++)if(n=l[e],"#"===n.charAt(0))r=this._getNodeById(n.slice(1)),r&&c.push(r);else if("."===n.charAt(0))s=this._getNodesByName(n.slice(1)),c=c.concat(s);else for(o=this.getChildren(),a=o.length,i=0;a>i;i++)c=c.concat(o[i]._get(n));return Kinetic.Collection.toCollection(c)},_getNodeById:function(t){var e=Kinetic.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Kinetic.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),i=this.getChildren(),n=i.length,s=0;n>s;s++)e=e.concat(i[s]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),i=e.length,n=0;i>n;n++){var s=e[n];t.children.push(s.toObject())}return t},_getDescendants:function(t){for(var e=[],i=t.length,n=0;i>n;n++){var s=t[n];this.isAncestorOf(s)&&e.push(s)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(t){var e=[];return this.find("Shape").each(function(i){i.isVisible()&&i.intersects(t)&&e.push(i)}),e},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t,e){var i=this.getLayer(),n=t||i&&i.getCanvas(),s=n&&n.getContext(),r=this._cache.canvas,o=r&&r.scene;return this.isVisible()&&(o?this._drawCachedSceneCanvas(s):this._drawChildren(n,"drawScene",e)),this},drawHit:function(t,e){var i=this.getLayer(),n=t||i&&i.hitCanvas,s=n&&n.getContext(),r=this._cache.canvas,o=r&&r.hit;return this.shouldDrawHit()&&(o?this._drawCachedHitCanvas(s):this._drawChildren(n,"drawHit",e)),this},_drawChildren:function(t,e,i){var n,s,r=this.getLayer(),o=t&&t.getContext(),a=this.getClipWidth(),c=this.getClipHeight(),l=a&&c;l&&r&&(n=this.getClipX(),s=this.getClipY(),o.save(),r._applyTransform(this,o),o.beginPath(),o.rect(n,s,a,c),o.clip(),o.reset()),this.children.each(function(n){n[e](t,i)}),l&&o.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function t(t){t.fill()}function e(t){t.stroke()}function i(t){t.fill()}function n(t){t.stroke()}function s(){this._clearCache(r)}var r="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(r){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=i,this._strokeFuncHit=n;for(var o,a=Kinetic.shapes;o=Kinetic.Util.getRandomColor(),!o||o in a;);this.colorKey=o,a[o]=this,Kinetic.Node.call(this,r),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",s)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(r,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},intersects:function(t){var e,i=this.getStage(),n=i.bufferHitCanvas;return n.getContext().clear(),this.drawScene(n),e=n.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,e[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(t,e){var i,n,s,r=this.getLayer(),o=t||r.getCanvas(),a=o.getContext(),c=this._cache.canvas,l=this.sceneFunc(),h=this.hasShadow();return this.isVisible()&&(c?this._drawCachedSceneCanvas(a):l&&(a.save(),this._useBufferCanvas()?(i=this.getStage(),n=i.bufferCanvas,s=n.getContext(),s.clear(),s.save(),s._applyLineJoin(this),r._applyTransform(this,s,e),l.call(this,s),s.restore(),h&&(a.save(),a._applyShadow(this),a.drawImage(n._canvas,0,0),a.restore()),a._applyOpacity(this),a.drawImage(n._canvas,0,0)):(a._applyLineJoin(this),r._applyTransform(this,a,e),h&&(a.save(),a._applyShadow(this),l.call(this,a),a.restore()),a._applyOpacity(this),l.call(this,a)),a.restore())),this},drawHit:function(t,e){var i=this.getLayer(),n=t||i.hitCanvas,s=n.getContext(),r=this.hitFunc()||this.sceneFunc(),o=this._cache.canvas,a=o&&o.hit;return this.shouldDrawHit()&&(a?this._drawCachedHitCanvas(s):r&&(s.save(),s._applyLineJoin(this),i._applyTransform(this,s,e),r.call(this,s),s.restore())),this},drawHitFromCache:function(t){var e,i,n,s,r,o,a,c,l=t||0,h=this._cache.canvas,u=this._getCachedSceneCanvas(),d=u.getContext(),p=h.hit,f=p.getContext(),g=u.getWidth(),m=u.getHeight();f.clear();try{for(e=d.getImageData(0,0,g,m),i=e.data,n=f.getImageData(0,0,g,m),s=n.data,r=i.length,o=Kinetic.Util._hexToRgb(this.colorKey),a=0;r>a;a+=4)c=i[a+3],c>l&&(s[a]=o.r,s[a+1]=o.g,s[a+2]=o.b,s[a+3]=255);f.putImageData(n,0,0)}catch(v){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)
}(),function(){function t(t,e){t.content.addEventListener(e,function(i){t[$+e](i)},!1)}var e="Stage",i="string",n="px",s="mouseout",r="mouseleave",o="mouseover",a="mouseenter",c="mousemove",l="mousedown",h="mouseup",u="click",d="dblclick",p="touchstart",f="touchend",g="tap",m="dbltap",v="touchmove",y="contentMouseout",b="contentMouseover",w="contentMousemove",x="contentMousedown",_="contentMouseup",S="contentClick",k="contentDblclick",C="contentTouchstart",T="contentTouchend",K="contentDbltap",P="contentTouchmove",E="div",D="relative",A="inline-block",F="kineticjs-content",I=" ",$="_",L="container",O="",N=[l,c,h,s,p,v,f,o],M=N.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType=e,Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){if(typeof t===i){var e=t;if(t=Kinetic.document.getElementById(t),!t)throw"Can not find container in document with id "+e}return this._setAttr(L,t),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,i=e.length;for(t=0;i>t;t++)e[t].clear();return this},clone:function(t){return t||(t={}),t.container=Kinetic.document.createElement(E),Kinetic.Container.prototype.clone.call(this,t)},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t);var e=Kinetic.stages.indexOf(this);e>-1&&Kinetic.stages.splice(e,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){function e(s){var r=c[s],l=r.toDataURL(),h=new Kinetic.window.Image;h.onload=function(){a.drawImage(h,0,0),s<c.length-1?e(s+1):t.callback(o.toDataURL(i,n))},h.src=l}t=t||{};var i=t.mimeType||null,n=t.quality||null,s=t.x||0,r=t.y||0,o=new Kinetic.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:1}),a=o.getContext()._context,c=this.children;(s||r)&&a.translate(-1*s,-1*r),e(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t){var e,i,n=this.getChildren(),s=n.length,r=s-1;for(e=r;e>=0;e--)if(i=n[e].getIntersection(t))return i;return null},_resizeDOM:function(){if(this.content){var t,e,i=this.getWidth(),s=this.getHeight(),r=this.getChildren(),o=r.length;for(this.content.style.width=i+n,this.content.style.height=s+n,this.bufferCanvas.setSize(i,s),this.bufferHitCanvas.setSize(i,s),t=0;o>t;t++)e=r[t],e.getCanvas().setSize(i,s),e.hitCanvas.setSize(i,s),e.draw()}},add:function(t){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,t),t._setCanvasSize(this.width(),this.height()),t.draw(),this.content.appendChild(t.canvas._canvas),this;for(var e=0;e<arguments.length;e++)this.add(arguments[e])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var e=0;M>e;e++)t(this,N[e])},_mouseover:function(t){Kinetic.UA.mobile||(this._setPointerPosition(t),this._fire(b,{evt:t}))},_mouseout:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.targetShape;e&&!Kinetic.isDragging()&&(e._fireAndBubble(s,{evt:t}),e._fireAndBubble(r,{evt:t}),this.targetShape=null),this.pointerPos=void 0,this._fire(y,{evt:t})}},_mousemove:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=Kinetic.DD,i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===i._id?i._fireAndBubble(c,{evt:t}):(this.targetShape&&(this.targetShape._fireAndBubble(s,{evt:t},i),this.targetShape._fireAndBubble(r,{evt:t},i)),i._fireAndBubble(o,{evt:t},this.targetShape),i._fireAndBubble(a,{evt:t},this.targetShape),this.targetShape=i):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(s,{evt:t}),this.targetShape._fireAndBubble(r,{evt:t}),this.targetShape=null),this._fire(w,{evt:t}),e&&e._drag(t)}t.preventDefault&&t.preventDefault()},_mousedown:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.clickStartShape=e,e._fireAndBubble(l,{evt:t})),this._fire(x,{evt:t})}t.preventDefault&&t.preventDefault()},_mouseup:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),i=this.clickStartShape,n=!1;Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(h,{evt:t}),Kinetic.listenClickTap&&i&&i._id===e._id&&(e._fireAndBubble(u,{evt:t}),n&&e._fireAndBubble(d,{evt:t}))),this._fire(_,{evt:t}),Kinetic.listenClickTap&&(this._fire(S,{evt:t}),n&&this._fire(k,{evt:t})),Kinetic.listenClickTap=!1}t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.tapStartShape=e,e._fireAndBubble(p,{evt:t}),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(C,{evt:t})},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),i=!1;Kinetic.inDblClickWindow?(i=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(f,{evt:t}),Kinetic.listenClickTap&&e._id===this.tapStartShape._id&&(e._fireAndBubble(g,{evt:t}),i&&e._fireAndBubble(m,{evt:t})),e.isListening()&&t.preventDefault&&t.preventDefault()),Kinetic.listenClickTap&&(this._fire(T,{evt:t}),i&&this._fire(K,{evt:t})),Kinetic.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,i=this.getIntersection(this.getPointerPosition());i&&i.isListening()&&(i._fireAndBubble(v,{evt:t}),i.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(P,{evt:t}),e&&e._drag(t)},_setPointerPosition:function(t){var e,i=this._getContentPosition(),n=t.offsetX,s=t.clientX,r=null,o=null;t=t?t:window.event,void 0!==t.touches?t.touches.length>0&&(e=t.touches[0],r=e.clientX-i.left,o=e.clientY-i.top):void 0!==n?(r=n,o=t.offsetY):"mozilla"===Kinetic.UA.browser?(r=t.layerX,o=t.layerY):void 0!==s&&i&&(r=s-i.left,o=t.clientY-i.top),null!==r&&null!==o&&(this.pointerPos={x:r,y:o})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();if(!t){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";t=Kinetic.document.createElement(E)}t.innerHTML=O,this.content=Kinetic.document.createElement(E),this.content.style.position=D,this.content.style.display=A,this.content.className=F,this.content.setAttribute("role","presentation"),t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var i,n,s=t.split(I),r=s.length;for(i=0;r>i;i++)n=s[i],this.content.addEventListener(n,e,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(t){this.nodeType="Layer",Kinetic.Container.call(this,t)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var t=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),t&&t.parentNode&&Kinetic.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var t="#",e="beforeDraw",i="draw",n=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],s=n.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,t)},_setCanvasSize:function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(t){var e,i,r,o;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(i=0;s>i;i++){if(r=n[i],e=this._getIntersection({x:t.x+r.x,y:t.y+r.y}),o=e.shape)return o;if(!e.antialiased)return null}},_getIntersection:function(e){var i,n,s=this.hitCanvas.context._context.getImageData(e.x,e.y,1,1).data,r=s[3];return 255===r?(i=Kinetic.Util._rgbToHex(s[0],s[1],s[2]),n=Kinetic.shapes[t+i],{shape:n}):r>0?{antialiased:!0}:{}},drawScene:function(t,n){var s=this.getLayer(),r=t||s&&s.getCanvas();return this._fire(e,{node:this}),this.getClearBeforeDraw()&&r.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,r,n),this._fire(i,{node:this}),this},_applyTransform:function(t,e,i){var n=t.getAbsoluteTransform(i).getMatrix();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},drawHit:function(t,e){var i=this.getLayer(),n=t||i&&i.hitCanvas;return i&&i.getClearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,n,e),this},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,t)},_validateAdd:function(t){var e=t.getType();"Shape"!==e&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(t,e){this.canvas.setSize(t,e)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(t){var e=this.getLayer(),i=t||e&&e.getCanvas();return this.getClearBeforeDraw()&&i.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,i),this},_applyTransform:function(t,e,i){if(!i||i._id!==this._id){var n=t.getTransform().getMatrix();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}},draw:function(){return this.drawScene(),this},clear:function(t){return this.getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),this.getCanvas()._canvas.style.display=t?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),i=this.getWidth(),n=this.getHeight();t.beginPath(),e?(t.moveTo(e,0),t.lineTo(i-e,0),t.arc(i-e,e,e,3*Math.PI/2,0,!1),t.lineTo(i,n-e),t.arc(i-e,n-e,e,0,Math.PI/2,!1),t.lineTo(e,n),t.arc(e,n-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var t=2*Math.PI-1e-4,e="Circle";Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,t,!1),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius(t/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var t=2*Math.PI-1e-4,e="Ellipse";Kinetic.Ellipse=function(t){this.___init(t)},Kinetic.Ellipse.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var i=this.getRadius(),n=i.x,s=i.y;e.beginPath(),e.save(),n!==s&&e.scale(1,s/n),e.arc(0,0,n,0,t,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var t=2*Math.PI-1e-4;Kinetic.Ring=function(t){this.___init(t)},Kinetic.Ring.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getInnerRadius(),0,t,!1),e.moveTo(this.getOuterRadius(),0),e.arc(0,0,this.getOuterRadius(),t,0,!0),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setOuterRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setOuterRadius(t/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(t){this.___init(t)},Kinetic.Wedge.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Math.PI/180,Kinetic.Arc=function(t){this.___init(t)},Kinetic.Arc.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=Kinetic.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.getOuterRadius(),0,e,i),t.arc(0,0,this.getInnerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var t="Image";Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(t){var e,i,n,s,r=this.getWidth(),o=this.getHeight(),a=this.getImage();a&&(e=this.getCrop(),i=e.width,n=e.height,s=i&&n?[a,e.x,e.y,i,n,0,0,r,o]:[a,0,0,r,o]),t.beginPath(),t.rect(0,0,r,o),t.closePath(),t.fillStrokeShape(this),a&&t.drawImage.apply(t,s)},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var i="auto",n="center",s="Change.kinetic",r="2d",o="-",a="",c="left",l="text",h="Text",u="middle",d="normal",p="px ",f=" ",g="right",m="word",v="char",y="none",b=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],w=b.length,x=Kinetic.Util.createCanvasElement().getContext(r);Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(n){var r=this;void 0===n.width&&(n.width=i),void 0===n.height&&(n.height=i),Kinetic.Shape.call(this,n),this._fillFunc=t,this._strokeFunc=e,this.className=h;for(var o=0;w>o;o++)this.on(b[o]+s,r._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,i=this.getPadding(),s=this.getTextHeight(),r=this.getLineHeight()*s,o=this.textArr,a=o.length,l=this.getWidth();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",u),t.setAttr("textAlign",c),t.save(),t.translate(i,0),t.translate(0,i+s/2),e=0;a>e;e++){var h=o[e],d=h.text,p=h.width;t.save(),this.getAlign()===g?t.translate(l-p-2*i,0):this.getAlign()===n&&t.translate((l-p-2*i)/2,0),this.partialText=d,t.fillStrokeShape(this),t.restore(),t.translate(0,r)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();return this._setAttr(l,e),this},getWidth:function(){return this.attrs.width===i?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===i?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,i=x,n=this.getFontSize();return i.save(),i.font=this._getContextFont(),e=i.measureText(t),i.restore(),{width:e.width,height:parseInt(n,10)}},_getContextFont:function(){return this.getFontStyle()+f+this.getFontVariant()+f+this.getFontSize()+p+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return x.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),n=0,s=this.getLineHeight()*e,r=this.attrs.width,a=this.attrs.height,c=r!==i,l=a!==i,h=this.getPadding(),u=r-2*h,d=a-2*h,p=0,g=this.getWrap(),m=g!==y,b=g!==v&&m;this.textArr=[],x.save(),x.font=this._getContextFont();for(var w=0,_=t.length;_>w;++w){var S=t[w],k=this._getTextWidth(S);if(c&&k>u)for(;S.length>0;){for(var C=0,T=S.length,K="",P=0;T>C;){var E=C+T>>>1,D=S.slice(0,E+1),A=this._getTextWidth(D);u>=A?(C=E+1,K=D,P=A):T=E}if(!K)break;if(b){var F=Math.max(K.lastIndexOf(f),K.lastIndexOf(o))+1;F>0&&(C=F,K=K.slice(0,C),P=this._getTextWidth(K))}if(this._addTextLine(K,P),n=Math.max(n,P),p+=s,!m||l&&p+s>d)break;if(S=S.slice(C),S.length>0&&(k=this._getTextWidth(S),u>=k)){this._addTextLine(S,k),p+=s,n=Math.max(n,k);break}}else this._addTextLine(S,k),p+=s,n=Math.max(n,k);if(l&&p+s>d)break}x.restore(),this.textHeight=e,this.textWidth=n}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",d),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",d),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",c),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",m),Kinetic.Factory.addGetter(Kinetic.Text,"text",a),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(t){this.___init(t)},Kinetic.Line.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,s=this.getPoints(),r=s.length,o=this.getTension(),a=this.getClosed();if(t.beginPath(),t.moveTo(s[0],s[1]),0!==o&&r>4){for(e=this.getTensionPoints(),i=e.length,n=a?0:4,a||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i-2>n;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);a||t.quadraticCurveTo(e[i-2],e[i-1],s[r-2],s[r-1])}else for(n=2;r>n;n+=2)t.lineTo(s[n],s[n+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var t=this.getPoints(),e=t.length,i=this.getTension(),n=Kinetic.Util,s=n._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),r=n._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),o=Kinetic.Util._expandPoints(t,i),a=[s[2],s[3]].concat(o).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],s[0],s[1],t[0],t[1]]);return a}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(t){this.___init(t)},Kinetic.Sprite.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e=this.getAnimation(),i=this.frameIndex(),n=4*i,s=this.getAnimations()[e],r=s[n+0],o=s[n+1],a=s[n+2],c=s[n+3],l=this.getImage();l&&t.drawImage(l,r,o,a,c,0,0,a,c)},_hitFunc:function(t){var e=this.getAnimation(),i=this.frameIndex(),n=4*i,s=this.getAnimations()[e],r=s[n+2],o=s[n+3];t.beginPath(),t.rect(0,0,r,o),t.closePath(),t.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.getFrameRate())},start:function(){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var t=this.frameIndex(),e=this.getAnimation(),i=this.getAnimations(),n=i[e],s=n.length/4;this.frameIndex(s-1>t?t+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(t){this.___init(t)},Kinetic.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.dataArray,i=!1;t.beginPath();for(var n=0;n<e.length;n++){var s=e[n].command,r=e[n].points;switch(s){case"L":t.lineTo(r[0],r[1]);break;case"M":t.moveTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var o=r[0],a=r[1],c=r[2],l=r[3],h=r[4],u=r[5],d=r[6],p=r[7],f=c>l?c:l,g=c>l?1:c/l,m=c>l?l/c:1;t.translate(o,a),t.rotate(d),t.scale(g,m),t.arc(0,0,f,h,h+u,1-p),t.scale(1/g,1/m),t.rotate(-d),t.translate(-o,-a);break;case"z":t.closePath(),i=!0}}i?t.fillStrokeShape(this):t.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))},Kinetic.Path.getPointOnLine=function(t,e,i,n,s,r,o){void 0===r&&(r=e),void 0===o&&(o=i);var a=(s-i)/(n-e+1e-8),c=Math.sqrt(t*t/(1+a*a));e>n&&(c*=-1);var l,h=a*c;if(n===e)l={x:r,y:o+h};else if((o-i)/(r-e+1e-8)===a)l={x:r+c,y:o+h};else{var u,d,p=this.getLineLength(e,i,n,s);if(1e-8>p)return void 0;var f=(r-e)*(n-e)+(o-i)*(s-i);f/=p*p,u=e+f*(n-e),d=i+f*(s-i);var g=this.getLineLength(r,o,u,d),m=Math.sqrt(t*t-g*g);c=Math.sqrt(m*m/(1+a*a)),e>n&&(c*=-1),h=a*c,l={x:u+c,y:d+h}}return l},Kinetic.Path.getPointOnCubicBezier=function(t,e,i,n,s,r,o,a,c){function l(t){return t*t*t}function h(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}var p=a*l(t)+r*h(t)+n*u(t)+e*d(t),f=c*l(t)+o*h(t)+s*u(t)+i*d(t);return{x:p,y:f}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,i,n,s,r,o){function a(t){return t*t}function c(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}var h=r*a(t)+n*c(t)+e*l(t),u=o*a(t)+s*c(t)+i*l(t);return{x:h,y:u}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,i,n,s,r){var o=Math.cos(r),a=Math.sin(r),c={x:i*Math.cos(s),y:n*Math.sin(s)};return{x:t+(c.x*o-c.y*a),y:e+(c.x*a+c.y*o)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];var e=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var n=0;n<i.length;n++)e=e.replace(new RegExp(i[n],"g"),"|"+i[n]);var s=e.split("|"),r=[],o=0,a=0;for(n=1;n<s.length;n++){var c=s[n],l=c.charAt(0);c=c.slice(1),c=c.replace(new RegExp(",-","g"),"-"),c=c.replace(new RegExp("-","g"),",-"),c=c.replace(new RegExp("e,-","g"),"e-");var h=c.split(",");h.length>0&&""===h[0]&&h.shift();for(var u=0;u<h.length;u++)h[u]=parseFloat(h[u]);for(;h.length>0&&!isNaN(h[0]);){var d,p,f,g,m,v,y,b,w,x,_=null,S=[],k=o,C=a;switch(l){case"l":o+=h.shift(),a+=h.shift(),_="L",S.push(o,a);break;case"L":o=h.shift(),a=h.shift(),S.push(o,a);break;case"m":var T=h.shift(),K=h.shift();if(o+=T,a+=K,_="M",r.length>2&&"z"===r[r.length-1].command)for(var P=r.length-2;P>=0;P--)if("M"===r[P].command){o=r[P].points[0]+T,a=r[P].points[1]+K;break}S.push(o,a),l="l";break;case"M":o=h.shift(),a=h.shift(),_="M",S.push(o,a),l="L";break;case"h":o+=h.shift(),_="L",S.push(o,a);break;case"H":o=h.shift(),_="L",S.push(o,a);break;case"v":a+=h.shift(),_="L",S.push(o,a);break;case"V":a=h.shift(),_="L",S.push(o,a);break;case"C":S.push(h.shift(),h.shift(),h.shift(),h.shift()),o=h.shift(),a=h.shift(),S.push(o,a);break;case"c":S.push(o+h.shift(),a+h.shift(),o+h.shift(),a+h.shift()),o+=h.shift(),a+=h.shift(),_="C",S.push(o,a);break;case"S":p=o,f=a,d=r[r.length-1],"C"===d.command&&(p=o+(o-d.points[2]),f=a+(a-d.points[3])),S.push(p,f,h.shift(),h.shift()),o=h.shift(),a=h.shift(),_="C",S.push(o,a);break;case"s":p=o,f=a,d=r[r.length-1],"C"===d.command&&(p=o+(o-d.points[2]),f=a+(a-d.points[3])),S.push(p,f,o+h.shift(),a+h.shift()),o+=h.shift(),a+=h.shift(),_="C",S.push(o,a);break;case"Q":S.push(h.shift(),h.shift()),o=h.shift(),a=h.shift(),S.push(o,a);break;case"q":S.push(o+h.shift(),a+h.shift()),o+=h.shift(),a+=h.shift(),_="Q",S.push(o,a);break;case"T":p=o,f=a,d=r[r.length-1],"Q"===d.command&&(p=o+(o-d.points[0]),f=a+(a-d.points[1])),o=h.shift(),a=h.shift(),_="Q",S.push(p,f,o,a);break;case"t":p=o,f=a,d=r[r.length-1],"Q"===d.command&&(p=o+(o-d.points[0]),f=a+(a-d.points[1])),o+=h.shift(),a+=h.shift(),_="Q",S.push(p,f,o,a);break;case"A":g=h.shift(),m=h.shift(),v=h.shift(),y=h.shift(),b=h.shift(),w=o,x=a,o=h.shift(),a=h.shift(),_="A",S=this.convertEndpointToCenterParameterization(w,x,o,a,y,b,g,m,v);break;case"a":g=h.shift(),m=h.shift(),v=h.shift(),y=h.shift(),b=h.shift(),w=o,x=a,o+=h.shift(),a+=h.shift(),_="A",S=this.convertEndpointToCenterParameterization(w,x,o,a,y,b,g,m,v)}r.push({command:_||l,points:S,start:{x:k,y:C},pathLength:this.calcLength(k,C,_||l,S)})}("z"===l||"Z"===l)&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r},Kinetic.Path.calcLength=function(t,e,i,n){var s,r,o,a,c=Kinetic.Path;
switch(i){case"L":return c.getLineLength(t,e,n[0],n[1]);case"C":for(s=0,r=c.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),a=.01;1>=a;a+=.01)o=c.getPointOnCubicBezier(a,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),s+=c.getLineLength(r.x,r.y,o.x,o.y),r=o;return s;case"Q":for(s=0,r=c.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),a=.01;1>=a;a+=.01)o=c.getPointOnQuadraticBezier(a,t,e,n[0],n[1],n[2],n[3]),s+=c.getLineLength(r.x,r.y,o.x,o.y),r=o;return s;case"A":s=0;var l=n[4],h=n[5],u=n[4]+h,d=Math.PI/180;if(Math.abs(l-u)<d&&(d=Math.abs(l-u)),r=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),0>h)for(a=l-d;a>u;a-=d)o=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],a,0),s+=c.getLineLength(r.x,r.y,o.x,o.y),r=o;else for(a=l+d;u>a;a+=d)o=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],a,0),s+=c.getLineLength(r.x,r.y,o.x,o.y),r=o;return o=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),s+=c.getLineLength(r.x,r.y,o.x,o.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,i,n,s,r,o,a,c){var l=c*(Math.PI/180),h=Math.cos(l)*(t-i)/2+Math.sin(l)*(e-n)/2,u=-1*Math.sin(l)*(t-i)/2+Math.cos(l)*(e-n)/2,d=h*h/(o*o)+u*u/(a*a);d>1&&(o*=Math.sqrt(d),a*=Math.sqrt(d));var p=Math.sqrt((o*o*a*a-o*o*u*u-a*a*h*h)/(o*o*u*u+a*a*h*h));s===r&&(p*=-1),isNaN(p)&&(p=0);var f=p*o*u/a,g=p*-a*h/o,m=(t+i)/2+Math.cos(l)*f-Math.sin(l)*g,v=(e+n)/2+Math.sin(l)*f+Math.cos(l)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},w=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},x=w([1,0],[(h-f)/o,(u-g)/a]),_=[(h-f)/o,(u-g)/a],S=[(-1*h-f)/o,(-1*u-g)/a],k=w(_,S);return b(_,S)<=-1&&(k=Math.PI),b(_,S)>=1&&(k=0),0===r&&k>0&&(k-=2*Math.PI),1===r&&0>k&&(k+=2*Math.PI),[m,v,o,a,x,k,l,r]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var i="",n="normal";Kinetic.TextPath=function(t){this.___init(t)},Kinetic.TextPath.prototype={___init:function(i){var n=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,i),this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=t,this._strokeFuncHit=e,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){n.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",n._setTextData),n._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save();for(var e=this.glyphInfo,i=0;i<e.length;i++){t.save();var n=e[i].p0;t.translate(n.x,n.y),t.rotate(e[i].rotation),this.partialText=e[i].text,t.fillStrokeShape(this),t.restore()}t.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas,i=e.getContext("2d");i.save(),i.font=this._getContextFont();var n=i.measureText(t);return i.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var t=this,e=this._getTextSize(this.attrs.text);this.textWidth=e.width,this.textHeight=e.height,this.glyphInfo=[];for(var i,n,s,r=this.attrs.text.split(""),o=-1,a=0,c=function(){a=0;for(var e=t.dataArray,n=o+1;n<e.length;n++){if(e[n].pathLength>0)return o=n,e[n];"M"==e[n].command&&(i={x:e[n].points[0],y:e[n].points[1]})}return{}},l=function(e){var r=t._getTextSize(e).width,o=0,l=0;for(n=void 0;Math.abs(r-o)/r>.01&&25>l;){l++;for(var h=o;void 0===s;)s=c(),s&&h+s.pathLength<r&&(h+=s.pathLength,s=void 0);if(s==={}||void 0===i)return void 0;var u=!1;switch(s.command){case"L":Kinetic.Path.getLineLength(i.x,i.y,s.points[0],s.points[1])>r?n=Kinetic.Path.getPointOnLine(r,i.x,i.y,s.points[0],s.points[1],i.x,i.y):s=void 0;break;case"A":var d=s.points[4],p=s.points[5],f=s.points[4]+p;0===a?a=d+1e-8:r>o?a+=Math.PI/180*p/Math.abs(p):a-=Math.PI/360*p/Math.abs(p),(0>p&&f>a||p>=0&&a>f)&&(a=f,u=!0),n=Kinetic.Path.getPointOnEllipticalArc(s.points[0],s.points[1],s.points[2],s.points[3],a,s.points[6]);break;case"C":0===a?a=r>s.pathLength?1e-8:r/s.pathLength:r>o?a+=(r-o)/s.pathLength:a-=(o-r)/s.pathLength,a>1&&(a=1,u=!0),n=Kinetic.Path.getPointOnCubicBezier(a,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3],s.points[4],s.points[5]);break;case"Q":0===a?a=r/s.pathLength:r>o?a+=(r-o)/s.pathLength:a-=(o-r)/s.pathLength,a>1&&(a=1,u=!0),n=Kinetic.Path.getPointOnQuadraticBezier(a,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3])}void 0!==n&&(o=Kinetic.Path.getLineLength(i.x,i.y,n.x,n.y)),u&&(u=!1,s=void 0)}},h=0;h<r.length&&(l(r[h]),void 0!==i&&void 0!==n);h++){var u=Kinetic.Path.getLineLength(i.x,i.y,n.x,n.y),d=0,p=Kinetic.Path.getPointOnLine(d+u/2,i.x,i.y,n.x,n.y),f=Math.atan2(n.y-i.y,n.x-i.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:r[h],rotation:f,p0:i,p1:n}),i=n}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",n),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant",n),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",i),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(t){this.___init(t)},Kinetic.RegularPolygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,s=this.attrs.sides,r=this.attrs.radius;for(t.beginPath(),t.moveTo(0,0-r),e=1;s>e;e++)i=r*Math.sin(2*e*Math.PI/s),n=-1*r*Math.cos(2*e*Math.PI/s),t.lineTo(i,n);t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(t){this.___init(t)},Kinetic.Star.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.innerRadius(),i=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var s=1;2*n>s;s++){var r=s%2===0?i:e,o=r*Math.sin(s*Math.PI/n),a=-1*r*Math.cos(s*Math.PI/n);t.lineTo(o,a)}t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var t=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],e="Change.kinetic",i="none",n="up",s="right",r="down",o="left",a="Label",c=t.length;Kinetic.Label=function(t){this.____init(t)},Kinetic.Label.prototype={____init:function(t){var e=this;this.className=a,Kinetic.Group.call(this,t),this.on("add.kinetic",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(i){var n,s=this,r=function(){s._sync()};for(n=0;c>n;n++)i.on(t[n]+e,r)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,i,a,c,l,h,u=this.getText(),d=this.getTag();if(u&&d){switch(t=u.getWidth(),e=u.getHeight(),i=d.getPointerDirection(),a=d.getPointerWidth(),h=d.getPointerHeight(),c=0,l=0,i){case n:c=t/2,l=-1*h;break;case s:c=t+a,l=e/2;break;case r:c=t/2,l=e+h;break;case o:c=-1*a,l=e/2}d.setAttrs({x:-1*c,y:-1*l,width:t,height:e}),u.setAttrs({x:-1*c,y:-1*l})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(t){this.___init(t)},Kinetic.Tag.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getWidth(),i=this.getHeight(),a=this.getPointerDirection(),c=this.getPointerWidth(),l=this.getPointerHeight();t.beginPath(),t.moveTo(0,0),a===n&&(t.lineTo((e-c)/2,0),t.lineTo(e/2,-1*l),t.lineTo((e+c)/2,0)),t.lineTo(e,0),a===s&&(t.lineTo(e,(i-l)/2),t.lineTo(e+c,i/2),t.lineTo(e,(i+l)/2)),t.lineTo(e,i),a===r&&(t.lineTo((e+c)/2,i),t.lineTo(e/2,i+l),t.lineTo((e-c)/2,i)),t.lineTo(0,i),a===o&&(t.lineTo(0,(i+l)/2),t.lineTo(-1*c,i/2),t.lineTo(0,(i-l)/2)),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",i),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),Pokevisit={Models:{},Collections:{},Routers:{},Views:{},initialize:function(){new Pokevisit.Routers.AppRouter({$rootEl:$("div#main")}),Backbone.history.start()}},function(){this.JST||(this.JST={}),this.JST["filters/date"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="date-label filter-label"><img class="filter-pokeball" src="/assets/pokeball_listings.png">Dates</div>\n<div id="date"></div>\n<div class="filter-choices">\n  <input type="text" id="check-in-filter" placeholder="Check In" class="btn">\n  <input type="text" id="check-out-filter" placeholder="Check Out" class="btn">\n  <select id="select-accomodates-filter">\n    '),_.times(16,function(t){__p.push("\n      <option value=",t+1,">",t+1," Guest</option>\n    ")}),__p.push("\n  </select>\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["filters/price"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="slider-label filter-label"><img class="filter-pokeball" src="/assets/pokeball_listings.png">Price Range</div>\n<div id="slider"></div>\n<span id="low-slider-price">$ 0</span>\n<span id="high-slider-price">$ 1000</span>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["filters/room"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="room-label filter-label"><img class="filter-pokeball" src="/assets/pokeball_listings.png">Locations</div>\n<div class="check-boxes">\n  <label>\n    <input type="checkbox" value="water" data-labelauty="Water">\n  </label>\n\n  <label>\n    <input type="checkbox" value="plains" data-labelauty="Plains">\n  </label>\n\n  <label>\n    <input type="checkbox" value="city" data-labelauty="City">\n  </label>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/about"]=function(obj){var __p=[];with(obj||{}){__p.push('<div class="about-content">\n  <h1>About This Listing</h1>\n  ');var description=listing.escape("description")?listing.escape("description"):"The guest apartment has its own entrance located on the ground level of our home. The private apartment is 720 sq and has 8 ft ceilings. The living room and kitchen are new and the bath and the two bedrooms are remodeled.";__p.push("\n  <p>",description,'</p>\n\n  <div class="about-img">\n    <img src=\'',image?image.escape("url"):"/assets/user_image_placeholder.jpg",'\'>\n  </div>\n\n  <hr>\n  <div class="space-information info-container">\n    <div class="col-xs-3 info-label"><strong>The Space</strong></div>\n    <div class="col-xs-9">\n      <div class="col-xs-6">\n        <div>Type: <strong class="info-info">',listing.escape("hometype"),'</strong></div>\n        <div>Accomodates: <strong class="info-info">',listing.escape("accomodates"),'</strong></div>\n      </div>\n      <div class="col-xs-6">\n        <div>Location: <strong class="info-info">',listing.escape("roomtype"),'</strong></div>\n        <div>CheckIn: <strong class="info-info">',listing.escape("checkintime"),'</strong></div>\n        <div>CheckOut: <strong class="info-info">',listing.escape("checkouttime"),'</strong></div>\n      </div>\n    </div>\n  </div>\n\n  <hr>\n  <div class="price-information info-container">\n    <div class="col-xs-3 info-label"><strong>Price</strong></div>\n    <div class="col-xs-9">\n      <div class="col-xs-6">\n        <div>Weekly Price: $ <strong class="info-info">',7*listing.get("price"),'</strong></div>\n      </div>\n      <div class="col-xs-6">\n        <div>Monthly Price: $ <strong class="info-info">',30*listing.get("price"),'</strong></div>\n      </div>\n    </div>\n  </div>\n\n\n\n  <hr>\n\n    <div class="more-description-information info-container">\n    <div class="col-xs-3 info-label"><strong>Description</strong></div>\n    <div class="col-xs-9">\n    ');var descriptionSummary=listing.escape("description_summary")?listing.escape("description_summary"):"The guest apartment has its own entrance located on the ground level of our home. The private apartment is 720 sq and has 8 ft ceilings. The living room and kitchen are new and the bath and the two bedrooms are remodeled.";__p.push('\n      <div class="col-xs-12">',descriptionSummary,"</div>\n    </div>\n  </div>\n\n</div>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/about_edit"]=function(obj){var __p=[];with(obj||{}){__p.push(""),showNotice&&__p.push('\n  <div class="edit-your-page-notice">Scroll Down and Edit Your Listing\'s Information</div>\n'),__p.push('\n\n\n<div class="about-content">\n  <h1>About This Listing</h1>\n  ');var description=listing.escape("description")?listing.escape("description"):"The guest apartment has its own entrance located on the ground level of our home. The private apartment is 720 sq and has 8 ft ceilings. The living room and kitchen are new and the bath and the two bedrooms are remodeled.";__p.push('\n  <p class="description-p">',description,'</p>\n\n  <textarea class="listing-description-textbox" placeholder="Add something about this place here" ></textarea>\n  <div class="description-buttons">\n    <div>\n      <img class="saveDesc" src="/assets/green_yes.png">\n    </div>\n\n    <div>\n      <img  class="eraseDesc" src="/assets/red_no.png">\n    </div>\n  </div>\n\n\n  <div class="about-img">\n    <img src=\'',image?image.escape("url"):"/assets/user_image_placeholder.jpg",'\'>\n  </div>\n\n\n  <hr>\n  <div class="space-information info-container">\n    <div class="col-xs-3 info-label"><strong>The Space</strong></div>\n    <div class="col-xs-9">\n      <div class="col-xs-6">\n        <div>Type: <strong class="info-info">',listing.escape("hometype"),'</strong></div>\n        <div>Accomodates: <strong class="info-info">',listing.escape("accomodates"),'</strong></div>\n      </div>\n      <div class="col-xs-6">\n        <div>Location: <strong class="info-info">',listing.escape("roomtype"),'</strong></div>\n        <div>CheckIn Time: <input id="check-in-time"></div>\n        <div>CheckOut Time: <input id="check-out-time"></div>\n      </div>\n    </div>\n  </div>\n\n  <hr>\n\n  <div class="price-information info-container">\n    <div class="col-xs-3 info-label"><strong>Price</strong></div>\n    <div class="col-xs-9">\n      <div class="col-xs-6">\n        <div>Weekly Price: $ <strong class="info-info">',7*listing.get("price"),'</strong></div>\n      </div>\n      <div class="col-xs-6">\n        <div>Monthly Price: $ <strong class="info-info">',30*listing.get("price"),'</strong></div>\n      </div>\n    </div>\n  </div>\n\n\n  <hr>\n\n  <div class="more-description-information info-container">\n    <div class="col-xs-3 info-label"><strong>Description</strong></div>\n    <div class="col-xs-9">\n    ');var descriptionSummary=listing.escape("description_summary")?listing.escape("description_summary"):"The guest apartment has its own entrance located on the ground level of our home. The private apartment is 720 sq and has 8 ft ceilings. The living room and kitchen are new and the bath and the two bedrooms are remodeled.";__p.push('\n      <div class="col-xs-12">',descriptionSummary,'</div>\n      <textarea class="listing-description-summary-textbox" placeholder="Add a short description of this place." ></textarea>\n        <div class="description-buttons">\n          <div>\n            <img class="saveDescSummary" src="/assets/green_yes.png">\n          </div>\n\n          <div>\n            <img  class="eraseDescSummary" src="/assets/red_no.png">\n          </div>\n        </div>\n    </div>\n  </div>\n\n</div>\n')}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/index"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="matches-found">\n  <h1 class="matches-result">0 Rentals Available.</h1>\n</div>\n<ul class="listings">\n\n</ul>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/index_item"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="listing-item-img">\n  <div class="listing-item-price"><h6>$</h6><span class="price">',listing.get("price"),"</span></div>\n  "),user&&__p.push('\n    <div class="listing-item-user-img"><img src=\'',user.get("image_url"),"'></div>\n  "),__p.push('\n\n\n</div>\n<div class="listing-item-description-div">\n  <div class="listing-item-description"><a href="#/listings/',listing.id,'">',listing.escape("address"),"</a></div>\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/new"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="container new-page-heading">\n  <h1>List Your Space</h1>\n  <p>Make some pokecash by renting your place.</p>\n</div>\n\n<div class="new-form-group">\n  <form class="new-form">\n\n    <div class="container">\n      <div class="hometype-label new-label">Location Type</div>\n      <div class="hometype-btn-group" role="group" aria-label="...">\n        <button type="button" class="btn" data-home="land">Land</button>\n        <button type="button" class="btn" data-home="sea">Sea</button>\n        <button type="button" class="btn" data-home="underwater">Underwater</button>\n      </div>\n    </div>\n\n    <div class="container">\n      <div class="roomtype-label new-label">Location</div>\n      <div class="roomtype-btn-group" role="group" aria-label="...">\n        <button type="button" class="btn" data-room="water">Water</button>\n        <button type="button" class="btn" data-room="plains">Plains</button>\n        <button type="button" class="btn" data-room="city">City</button>\n      </div>\n    </div>\n\n    <div class="container">\n    <div class="roomtype-label new-label">Accomodates</div>\n      <select id="select-accomodates-option">\n        '),_.times(16,function(t){__p.push("\n          <option value=",t+1,">",t+1," Guest</option>\n        ")}),__p.push('\n      </select>\n    </div>\n\n    <div class="container">\n      <div class="date-label new-label">Dates</div>\n      <input type="text" id="date-avail-new" placeholder="Date Available" class="btn">\n      <input type="text" id="date-end-new" placeholder="Date End" class="btn">\n    </div>\n\n    <div class="container">\n      <button type="button" id="select-pictures" class="btn">Select Picture</button>\n      <div class="img-preview">\n\n      </div>\n    </div>\n\n    <div class="container">\n      <div class="address-label new-label">Address</div>\n      <input type="text" class="form-control" id="address-search" placeholder="Where is your listing?">\n    </div>\n\n    <div class="container">\n      <div class="price-label new-label">Pokecash</div>\n      <input type="number" class="form-control" id="new-price" placeholder="Price">\n    </div>\n\n    <div class="container">\n      <button class="btn create-listing-btn disabled" disabled>Create Listing</button\n    </div>\n  </form>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/request"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="labels">\n  <span class="check-in-label">Check In</span>\n  <span class="check-out-label">Check Out</span>\n  <span class="guests-label">Guests</span>\n</div>\n\n<input type="text" name="" id="check-in-select" placeholder="MM/DD/YYYY" class="btn">\n<input type="text" id="check-out-select" placeholder="MM/DD/YYYY" class="btn">\n\n<select id="select-accomodates">\n  '),listing.get("accomodates")&&(__p.push("\n     "),_.times(listing.get("accomodates"),function(t){__p.push("\n      <option value=",t+1,">",t+1,"</option>\n    ")}),__p.push("\n  ")),__p.push('\n</select>\n\n<button class="book-button">Select Dates/Guests</button>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/review"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="listing-review container">\n  <div class="listing-review-header"><h1>Reviews For This Listing</h1></div>\n\n  <div class="current-review-pts">\n  '),__p.push(listing.get("avg_rating")?'\n    <div class="yes-review-text">Current Rating: </div><div class="yes-review"></div>\n  ':'\n    <div class="no-review">*No Current Reviews For this Listing</div>\n  '),__p.push("\n  <hr>\n  </div>\n\n  "),listing.get("user_id")!==Pokevisit.currentUserId&&__p.push('\n    <div class="new-listing-review">\n      <textarea class="new-listing-review-text" placeholder="Write your review here."></textarea>\n      <div id="new-listing-rating"></div>\n      <button id="create-review" disabled>Please rate/write before submitting</button>\n      <hr class="new-review-hr">\n    </div>\n  '),__p.push('\n\n  <div class="listing-review-content">\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/review_item"]=function(obj){var __p=[];with(obj||{}){__p.push('<div class="reviewer-img">\n  <img src=\'',user?user.get("image_url"):"/assets/default_user_pic.jpg",'\'>\n</div>\n\n<div class="reviewer-text">',review.get("review_text"),"\n  ");var date=new Date(review.get("created_at"));__p.push('\n  <div class="review-date">Posted: ',months[date.getMonth()],", ",date.getFullYear(),"</div>\n</div>\n<hr>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/show"]=function(obj){var __p=[];with(obj||{}){__p.push('<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">\n  <!-- Indicators -->\n  <ol class="carousel-indicators">\n    '),_.times(images.length,function(t){__p.push('\n      <li data-target="#carousel-example-generic" data-slide-to="',t,'" class=',0===t?"active":"","></li>\n    ")}),__p.push('\n  </ol>\n\n  <!-- Wrapper for slides -->\n  <div class="carousel-inner" role="listbox">\n    ');var i=0;__p.push("\n    "),images.each(function(t){__p.push('\n      <div class="item ',0===i?"active":"",'" href="',t.escape("url"),'" style="background-image: url(\'',t.escape("url"),"');\">\n        "),i++,__p.push("\n      </div>\n    ")}),__p.push('\n\n    <div class="pricing ',addFixed?"fixed-pricing":"",'">\n      <div class="price">$ ',listing.get("price"),'</div>\n      <div class="per-night">Per Night</div>\n    </div>\n  </div>\n\n  <!-- Controls -->\n  <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">\n    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>\n    <span class="sr-only">Previous</span>\n  </a>\n  <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">\n    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>\n    <span class="sr-only">Next</span>\n  </a>\n\n\n</div>\n\n<div class="show-container container">\n  <div class="show-summary">\n\n  </div>\n\n  <div class="show-request ',addFixed?"fixed-request":"",' ">\n\n  </div>\n</div>\n\n\n<div class="show-about">\n</div>\n\n\n<div class="show-review">\n</div>\n')}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/sidebar"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="sidebar">\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/summary"]=function(obj){var __p=[];with(obj||{}){__p.push('<img class="listing-show-img" src=\'',user?user.get("image_url"):"/assets/user_image_placeholder.jpg",'\'>\n<h3 class="user-email">',user?user.get("email"):"placeholder@placeholder.com",'</h3>\n\n<div class="date-avail-label">Date Available</div>\n');var dateIn=new Date(listing.get("date_avail"));__p.push("\n"),dateIn.setDate(dateIn.getDate()),__p.push('\n\n<div class="date-avail">\n  <time class="icon">\n    <em>',weekDay[dateIn.getDay()],"</em>\n    <strong>",months[dateIn.getMonth()],"</strong>\n    <span>",dateIn.getDate(),'</span>\n  </time>\n</div>\n\n<div class="date-end-label">Date End</div>\n');var dateOut=new Date(listing.get("date_end"));__p.push("\n"),dateOut.setDate(dateOut.getDate()),__p.push('\n\n<div class="date-end">\n  <time  class="icon">\n    <em>',weekDay[dateOut.getDay()],"</em>\n    <strong>",months[dateOut.getMonth()],"</strong>\n    <span>",dateOut.getDate(),'</span>\n  </time>\n</div>\n\n\n<div class="address-label">Address:</div>\n<div class="summary-location">',listing.escape("address"),"</div>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/your_listings"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="your-listings-header">\n  <img class="listings-pokeball" src="/assets/pokeball_listings.png"><h1>Your Listings</h1>\n</div>\n\n<div class="your-listings" id="listing-container">\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listings/your_listings_item"]=function(obj){var __p=[];with(obj||{}){__p.push('<div class="flipbook">\n  <div class="front">\n    '),image?__p.push('\n      <img class="flipimages" src=\'',image.escape("url"),"'>\n    "):__p.push('\n      <img class="flipimages" alt="IMG">\n    '),__p.push('\n  </div>\n  <div class="back">\n    <div class="your-listing-location">\n      <div class="listing-description"><strong>Address:</strong> ',listing.escape("address"),' </div>\n    </div>\n\n    <div class="your-listing-avail">\n      ');var dateAvail=new Date(listing.get("date_avail"));__p.push("\n      "),dateAvail=dateAvail.getMonth()+1+"/"+dateAvail.getDate()+"/"+dateAvail.getFullYear(),__p.push('\n\n      <div class="listing-description"><strong>Date Available:</strong> ',dateAvail,'</div>\n    </div>\n\n    <div class="your-listing-end">\n      ');var dateEnd=new Date(listing.get("date_end"));__p.push("\n      "),dateEnd=dateEnd.getMonth()+1+"/"+dateEnd.getDate()+"/"+dateEnd.getFullYear(),__p.push('\n\n      <div class="listing-description"><strong>Date End:</strong> ',dateEnd,' </div>\n    </div>\n\n    <button class="btn btn-special edit-listing">Edit Listing</button>\n\n    <button class="btn btn-special show-reservations">Show Reservations</button>\n\n  </div>\n</div>\n')}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/main"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="main">\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["maps/map"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="map-view"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reservations/index"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="reservations-header">\n  <img class="listings-pokeball" src="/assets/pokeball_listings.png"><h1 class="reservationh1">All your reservations</h1>\n</div>\n\n<div class="reservations-index">\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reservations/index_item"]=function(obj){var __p=[];with(obj||{}){__p.push('<div class="reservation-status">\n  <h2>',reservation.get("status"),"</h2>\n  ");var checkInDate=new Date(reservation.get("start_date"));__p.push("\n  "),checkInDate=checkInDate.getMonth()+1+"/"+checkInDate.getDate()+"/"+checkInDate.getFullYear(),__p.push('\n\n  <div class="status-picture ',status,'">\n  </div>\n\n  ');var checkOutDate=new Date(reservation.get("end_date"));__p.push("\n  "),checkOutDate=checkOutDate.getMonth()+1+"/"+checkOutDate.getDate()+"/"+checkOutDate.getFullYear(),__p.push("\n\n  <p><strong>Check In: </strong>",checkInDate,"</p>\n  <p><strong>Check Out: </strong>",checkOutDate,'</p>\n</div>\n\n\n<div class="reservation-image">\n  <img src=\'',img?img.escape("url"):"/assets/user_image_placeholder.jpg",'\'>\n</div>\n\n<div class="reservation-description">',listing.get("address"),'</div>\n<div class="reservation-user-img">\n  <img src=\'',user?user.get("image_url"):"/assets/default_user_pic.jpg","'>\n</div>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reservations/listing_reservations"]=function(obj){var __p=[];with(obj||{}){__p.push('<div class="listing-description">\n  <h2>Listing information</h2>\n  <div><strong>Address:</strong> ',listing.get("address"),"</div>\n\n  ");var dateAvail=new Date(listing.get("date_avail"));__p.push("\n  "),dateAvail=dateAvail.getMonth()+1+"/"+dateAvail.getDate()+"/"+dateAvail.getFullYear(),__p.push("\n\n  <div><strong>Date Available:</strong> ",dateAvail,"</div>\n\n  ");var dateEnd=new Date(listing.get("date_end"));__p.push("\n  "),dateEnd=dateEnd.getMonth()+1+"/"+dateEnd.getDate()+"/"+dateEnd.getFullYear(),__p.push("\n\n  <div><strong>Date Available:</strong> ",dateEnd,'</div>\n</div>\n\n<div class="listing-reservations">\n</div>\n')}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reservations/listing_reservations_item"]=function(obj){var __p=[];with(obj||{}){__p.push('\n<div class="date-in-label">Date In:</div>\n');var dateIn=new Date(reservation.get("start_date"));__p.push("\n"),dateIn.setDate(dateIn.getDate()+1),__p.push('\n\n<div class="date-in">\n  <time  class="icon">\n    <em>',weekDay[dateIn.getDay()],"</em>\n    <strong>",months[dateIn.getMonth()],"</strong>\n    <span>",dateIn.getDate(),'</span>\n  </time>\n</div>\n\n<div class="date-out-label">Date Out:</div>\n');var dateOut=new Date(reservation.get("end_date"));__p.push("\n"),dateOut.setDate(dateOut.getDate()+1),__p.push('\n\n<div class="date-out">\n  <time  class="icon">\n    <em>',weekDay[dateOut.getDay()],"</em>\n    <strong>",months[dateOut.getMonth()],"</strong>\n    <span>",dateOut.getDate(),'</span>\n  </time>\n</div>\n\n<div class="reservation-user-info">User</div>\n<div class="reservation-user-img">\n  <img src=\'',user.escape("image_url"),'\' alt="IMG" class="reservation-user-img-icon">\n</div>\n\n<button class="approve-reservation btn" data-reservation=',reservation.id,' >Approve</button>\n<button class="deny-reservation btn" data-reservation=',reservation.id," >Deny</button>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/user"]=function(obj){var __p=[];with(obj||{})__p.push('<h1 class="change-profile-picture">Change Your Profile Picture!</h1>\n<div class="profile-picture">\n  <div class="profile-picture-holder tooltip" title="Click on image to replace profile picture.">\n    <img class="profile-picture-pic" src=\n    \'',user?user.escape("image_url"):"/assets/user_image_placeholder.jpg",'\'>\n  </div>\n</div>\n<div class="extra-fun">\n  <button id="create-pikachus" title="Drag around and click on pikachus to make them do things">Create a Pikachu</button>\n  <div id="sprite-container" style="height:200px;">\n\n  </div>\n</div>\n');return __p.join("")}}.call(this),Pokevisit.Models.Image=Backbone.Model.extend({urlRoot:"/listing_images"}),Pokevisit.Models.Listing=Backbone.Model.extend({urlRoot:"/listings",images:function(){return this._images=this._images||new Pokevisit.Collections.Images,this._images},reservations:function(){return this._reservations=this._reservations||new Pokevisit.Collections.Reservations,this._reservations},reviews:function(){return this._reviews=this._reviews||new Pokevisit.Collections.Reviews,this._reviews},parse:function(t){return this.images().set(t.images),this.reservations().set(t.reservations),this.reviews().set(t.reviews),delete t.images,delete t.reservations,delete t.reviews,t}}),Pokevisit.Models.Reservation=Backbone.Model.extend({urlRoot:"/reservations"}),Pokevisit.Models.Review=Backbone.Model.extend({urlRoot:"/reviews"}),Pokevisit.Models.User=Backbone.Model.extend({urlRoot:"/users"}),Pokevisit.Models.UserImage=Backbone.Model.extend({urlRoot:"/user_images"}),Pokevisit.Collections.Images=Backbone.Collection.extend({url:"/listing_images",model:Pokevisit.Models.Image,comparator:function(t){return t.id
}}),Pokevisit.Collections.Listings=Backbone.Collection.extend({url:"/listings",model:Pokevisit.Models.Listing,updateFilteredCollection:function(t){var e=function(e){for(key in t)if(t[key](e)===!1)return!1;return!0};this.set(Pokevisit.listings.filter(e))},getOrFetch:function(t){var e;return(e=this.get(t))?e.fetch():(e=new Pokevisit.Models.Listing({id:t}),e.fetch({success:function(){this.add(e)}.bind(this)})),e}}),Pokevisit.listings=new Pokevisit.Collections.Listings,Pokevisit.filteredListings=new Pokevisit.Collections.Listings,Pokevisit.Collections.OwnListings=Pokevisit.Collections.Listings.extend({url:"listings/own_listings"}),Pokevisit.ownListings=new Pokevisit.Collections.OwnListings,Pokevisit.Collections.Reservations=Backbone.Collection.extend({url:"/reservations",model:Pokevisit.Models.Reservation,comparator:function(t){return t.get("start_date")}}),Pokevisit.yourPendingReservations=new Pokevisit.Collections.Reservations,Pokevisit.Collections.Reviews=Backbone.Collection.extend({url:"/reviews",model:Pokevisit.Models.Review}),Pokevisit.Collections.UserImages=Backbone.Collection.extend({url:"/user_images",model:Pokevisit.Models.UserImage}),Pokevisit.allUserImages=new Pokevisit.Collections.UserImages,Pokevisit.Collections.Users=Backbone.Collection.extend({url:"/users",model:Pokevisit.Models.User}),Pokevisit.allUsers=new Pokevisit.Collections.Users,Backbone.CompositeView=Backbone.View.extend({addSubview:function(t,e){this.subviews(t).push(e),this.attachSubview(t,e.render())},attachSubview:function(t,e){this.$(t).append(e.$el),e.delegateEvents(),e.attachSubviews&&e.attachSubviews()},attachSubviews:function(){var t=this;_(this.subviews()).each(function(e,i){t.$(i).empty(),_(e).each(function(e){t.attachSubview(i,e)})})},remove:function(){Backbone.View.prototype.remove.call(this),_(this.subviews()).each(function(t){_(t).each(function(t){t.remove()})})},removeSubview:function(t,e){e.remove();var i=this.subviews(t);i.splice(i.indexOf(e),1)},subviews:function(t){return this._subviews=this._subviews||{},t?(this._subviews[t]=this._subviews[t]||[],this._subviews[t]):this._subviews}}),Pokevisit.Views.DateFilter=Backbone.CompositeView.extend({template:JST["filters/date"],className:"date-filter filter",attachCalendars:function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),i=this.$("#check-in-filter").datepicker({onRender:function(t){return t.valueOf()<e.valueOf()?"disabled":""}}).on("changeDate",function(t){if(this.dateFilterIn(t),!n.date||t.date.valueOf()>n.date.valueOf()){var e=new Date(t.date);e.setDate(e.getDate()+1),n.setValue(e),this.dateFilterOut(e)}i.hide(),this.$("#check-out-filter")[0].focus()}.bind(this)).data("datepicker"),n=this.$("#check-out-filter").datepicker({onRender:function(t){return t.valueOf()<=i.date.valueOf()?"disabled":""}}).on("changeDate",function(t){n.hide(),this.dateFilterOut(t.date)}.bind(this)).data("datepicker")},dateFilterIn:function(t){var e=t.date;Pokevisit.filteredListings.trigger("filterResult",{filter:"checkin",data:function(t){return e.valueOf()<=new Date(t.get("date_end")).valueOf()&&e.valueOf()>=new Date(t.get("date_avail")).valueOf()?!0:!1}})},dateFilterOut:function(t){var e=t;Pokevisit.filteredListings.trigger("filterResult",{filter:"checkout",data:function(t){return e.valueOf()<=new Date(t.get("date_end")).valueOf()&&e.valueOf()>=new Date(t.get("date_avail")).valueOf()?!0:!1}})},selectFilter:function(){this.$("#select-accomodates-filter").on("change",function(t){var e=$(t.currentTarget).val();Pokevisit.filteredListings.trigger("filterResult",{filter:"accomodates",data:function(t){return t.get("accomodates")>=e?!0:!1}})}.bind(this))},doQueryThings:function(){if(window.initialQueryParams){if(window.initialQueryParams.checkin&&"null"!==window.initialQueryParams.checkin){var t=new Date(parseInt(window.initialQueryParams.checkin));$("#check-in-filter").datepicker("setValue",t),this.dateFilterIn({date:t})}if(window.initialQueryParams.checkout&&"null"!==window.initialQueryParams.checkout){var e=new Date(parseInt(window.initialQueryParams.checkout));$("#check-out-filter").datepicker("setValue",e),this.dateFilterOut(e)}if(window.initialQueryParams.guests){var i=parseInt(window.initialQueryParams.guests);$("#select-accomodates-filter").selectpicker("val",i),Pokevisit.filteredListings.trigger("filterResult",{filter:"accomodates",data:function(t){return t.get("accomodates")>=i?!0:!1}})}window.initialQueryParams.lat&&window.initialQueryParams.lng&&"null"!==window.initialQueryParams.lat&&"null"!==window.initialQueryParams.lng&&(window.pokevisitMap.setCenter({lat:parseFloat(window.initialQueryParams.lat),lng:parseFloat(window.initialQueryParams.lng)}),window.pokevisitMap.setZoom(11)),window.initialQueryParams=null}},render:function(){var t=this.template();return this.$el.html(t),setTimeout(function(){this.attachCalendars(),this.$("#select-accomodates-filter").selectpicker(),this.selectFilter(),setTimeout(function(){this.doQueryThings()}.bind(this),0)}.bind(this),0),this}}),Pokevisit.Views.PriceFilter=Backbone.CompositeView.extend({template:JST["filters/price"],className:"price-filter filter",attachSlider:function(){this.$("#slider").noUiSlider({start:[0,1e3],step:1,behaviour:"drag-tap",connect:!0,range:{min:0,max:1e3}}),this.$lowPrice=this.$("#low-slider-price"),this.$highPrice=this.$("#high-slider-price"),this.onSlide(),this.slideFilter()},onSlide:function(){this.$("#slider").on("slide",function(){var t=this.$("#slider").val();this.$lowPrice.html("$ "+parseInt(t[0])),this.$highPrice.html("$ "+parseInt(t[1]))}.bind(this))},slideFilter:function(){this.$("#slider").on("change",function(){var t=this.$("#slider").val();Pokevisit.filteredListings.trigger("filterResult",{filter:"price",data:function(e){return e.get("price")>=parseInt(t[0])&&e.get("price")<=parseInt(t[1])?!0:!1}})}.bind(this))},render:function(){var t=this.template();return this.$el.html(t),setTimeout(function(){this.attachSlider()}.bind(this),0),this}}),Pokevisit.Views.RoomFilter=Backbone.CompositeView.extend({template:JST["filters/room"],className:"room-filter filter",listenToCheckBox:function(){this.$("input").labelauty({checked_label:"Unselect",unchecked_label:"Select"}),this.$("input").on("change",function(){var t=this.$("input:checked").map(function(){return $(this).val()}).get();Pokevisit.filteredListings.trigger("filterResult",{filter:"roomtype",data:function(e){return 0===t.length?!0:_.contains(t,e.escape("roomtype"))?!0:!1}})}.bind(this))},render:function(){var t=this.template();return this.$el.html(t),setTimeout(function(){this.listenToCheckBox()}.bind(this),0),this}}),Pokevisit.Views.ListingAbout=Backbone.CompositeView.extend({template:function(){return"show"===this.showState?JST["listings/about"]:"edit"===this.showState?JST["listings/about_edit"]:void 0},className:"listing-about-main container",events:{"click img.saveDesc":"saveDesc","click img.eraseDesc":"clearDesc","click img.saveDescSummary":"saveDescSummary","click img.eraseDescSummary":"clearDescSummary","keyup textarea.listing-description-textbox":"descriptionPreview","changeTime #check-in-time":"updateListingCheckInTime","changeTime #check-out-time":"updateListingCheckOutTime"},updateListingCheckInTime:function(){var t=this.$("#check-in-time").val();t!=this.model.get("checkintime")&&(this.model.set({checkintime:t}),this.model.save({},{}))},updateListingCheckOutTime:function(){var t=this.$("#check-out-time").val();t!=this.model.get("checkouttime")&&(this.model.set({checkouttime:t}),this.model.save({},{}))},initialize:function(){this.listenTo(this.model,"sync change:description change:description_summary",this.render),this.showState="show",$(window).scroll(function(){var t=$("body").scrollTop();this.$("div.edit-your-page-notice").css("top",50-t+"px"),t>5?(this.$("div.edit-your-page-notice").addClass("fade"),setTimeout(function(){this.$("div.edit-your-page-notice").on("transitionend",function(){this.$("div.edit-your-page-notice").addClass("hide")}.bind(this))}.bind(this),0)):(this.$("div.edit-your-page-notice").removeClass("fade"),this.$("div.edit-your-page-notice").removeClass("hide"))})},saveDesc:function(){var t=this.$("textarea.listing-description-textbox").val();this.model.set({description:t}),this.model.save({},{success:function(){}.bind(this)})},clearDesc:function(){this.$("textarea.listing-description-textbox").val("")},saveDescSummary:function(){var t=this.$("textarea.listing-description-summary-textbox").val();this.model.set({description_summary:t}),this.model.save({},{})},clearDescSummary:function(){this.$("textarea.listing-description-summary-textbox").val("")},setShowState:function(){this.model.get("user_id")===Pokevisit.currentUserId?(this.showState="edit",$("button.book-button").attr("disabled","disabled")):this.showState="show"},descriptionPreview:function(t){var e=$(t.currentTarget).val();this.$("p.description-p").html(0===e.length?this.model.escape("description"):e)},attachTimepicker:function(){this.$("#check-in-time").timepicker({setTime:"1:00pm"}),this.$("#check-out-time").timepicker(),this.model.get("checkintime")&&this.model.get("checkouttime")&&(this.$("#check-in-time").timepicker("setTime",this.model.get("checkintime")),this.$("#check-out-time").timepicker("setTime",this.model.get("checkouttime")))},render:function(){this.setShowState();var t=this.model.images().models,e=t.length,i=t[_.random(0,e-1)],n=$("body").scrollTop()>0?!1:!0,s=this.template()({listing:this.model,image:i,showNotice:n});return this.$el.html(s),setTimeout(function(){this.attachTimepicker()}.bind(this),0),this}}),Pokevisit.Views.ListingIndex=Backbone.CompositeView.extend({template:JST["listings/index"],className:"listings-index",initialize:function(){this.listSelector="ul.listings",this.setDefaultFilterData(),this._currentDate=new Date,this._markers=[],this.listenTo(this.collection,"add",this.addView),this.listenTo(this.collection,"remove",this.removeView),this.listenTo(this.collection,"filterResult",this.updateFilter),Pokevisit.listings.fetch({success:function(){this.collection.updateFilteredCollection(this._filterData)}.bind(this)}),this.collection.each(function(t){this.addView(t)}.bind(this))},updateFilter:function(t){this._filterData[t.filter]=t.data,this.collection.updateFilteredCollection(this._filterData)},updateMatches:function(){var t=this.collection.length;this.$("h1.matches-result").html(""+t+" Rentals Available.")},addView:function(t){var e=new Pokevisit.Views.ListingIndexItem({model:t,_markers:this._markers});this.addSubview(this.listSelector,e),this.addMarker(t),this.updateMatches()},addMarker:function(t){var e=new google.maps.LatLng(t.get("lat"),t.get("lng")),i=new google.maps.Marker({map:window.pokevisitMap,draggable:!1,animation:google.maps.Animation.DROP,position:e,icon:"/assets/marker.png",listingId:t.id}),n=new Pokevisit.Views.ListingIndexItem({model:t,_markers:this._markers});google.maps.event.addListener(i,"click",function(){var t=document.createElement("div");t.id="infowindow-listing",t.appendChild(n.render().$el.get(0)),window.pokevisitMapInfo.setContent(t),window.pokevisitMapInfo.open(window.pokevisitMap,this),window.pokevisitMap.panTo(e)}),this._markers.push(i)},removeView:function(t){this.updateMatches();for(var e=0;e<this.subviews(this.listSelector).length;e++)this.subviews(this.listSelector)[e].model.id===t.id&&this.removeSubview(this.listSelector,this.subviews(this.listSelector)[e]);this._markers=this._markers.filter(function(e){return e.listingId==t.id&&e.setMap(null),e.listingId!==t.id})},setDefaultFilterData:function(){this._filterData={roomtype:function(){return!0},accomodates:function(){return!0},location:function(){return!1},checkin:function(){return!0},checkout:function(){return!0},price:function(t){return t.get("price")>=0&&t.get("price")<=1e3?!0:!1}}},render:function(){var t=this.template();return this.$el.html(t),this.attachSubviews(),this}}),Pokevisit.Views.ListingIndexItem=Backbone.CompositeView.extend({template:JST["listings/index_item"],tagName:"li",className:"listing-item",attributes:function(){return{"data-id":this.model.id}},events:{click:"showListing",mouseenter:"changeMarker",mouseleave:"revertMarker"},showListing:function(t){var e=$(t.currentTarget).data("id");Backbone.history.navigate("#/listings/"+e,{trigger:!0})},initialize:function(t){this._markers=t._markers,this.listenTo(this.model,"sync",this.render),this.listenTo(Pokevisit.allUsers,"sync",this.render),this.images=this.model.images()},changeMarker:function(){_.each(this._markers,function(t){t.listingId===this.model.id&&(t.setIcon("/assets/marker2.png"),t.setZIndex(google.maps.Marker.MAX_ZINDEX+1))}.bind(this))},revertMarker:function(){_.each(this._markers,function(t){t.listingId===this.model.id&&(t.setIcon("/assets/marker.png"),t.setZIndex(google.maps.Marker.MAX_ZINDEX))}.bind(this))},render:function(){var t=Pokevisit.allUsers.findWhere({id:this.model.get("user_id")}),e=this.template({listing:this.model,user:t});return this.$el.html(e),this.images.length>0&&this.$("div.listing-item-img").css({"background-image":"url("+this.images.models[0].escape("url")+")"}),this}}),Pokevisit.Views.ListingNew=Backbone.CompositeView.extend({template:JST["listings/new"],className:"listing-new",events:{"click .hometype-btn-group button":"getHomeType","click .roomtype-btn-group button":"getRoomType","change #select-accomodates-option":"updateAccomodates","keyup #new-price":"getPrice","click .create-listing-btn":"createListing","click button#select-pictures":"selectPictures"},initialize:function(){this.setFilepicker(),this._imageUrls=[],this._numImages=0,this._params=Object.create(null),this._params.listing={hometype:null,roomtype:null,accomodates:1,date_avail:null,date_end:null,address:null,price:null},window.testParams=this._params.listing},getHomeType:function(t){var e=$(t.currentTarget);e.addClass("active"),e.siblings().removeClass("active"),this._params.listing.hometype=e.data("home"),this.convertButton()},getRoomType:function(t){var e=$(t.currentTarget);e.addClass("active"),e.siblings().removeClass("active"),this._params.listing.roomtype=e.data("room"),this.convertButton()},updateAccomodates:function(t){this._params.listing.accomodates=parseInt($(t.currentTarget).val()),this.convertButton()},getPrice:function(t){var e=$(t.currentTarget);this._params.listing.price=parseInt(e.val()),this.convertButton()},setFilepicker:function(){filepicker&&filepicker.setKey("AJXpnUispSeOzkYcpSa8Kz")},convertButton:function(){this.paramsCompleted()?(this.$("button.create-listing-btn").removeClass("disabled"),this.$("button.create-listing-btn").removeAttr("disabled","disabled")):(this.$("button.create-listing-btn").addClass("disabled"),this.$("button.create-listing-btn").attr("disabled","disabled"))},createListing:function(t){t.preventDefault(),this.paramsCompleted()&&(this.model.set(this._params),this.model.save({},{success:function(){Pokevisit.ownListings.add(this.model);var t=function(t){Backbone.history.navigate("#/listings/"+t,{trigger:!0})};0===this._imageUrls.length&&this._imageUrls.push("/assets/plains/plains_4.jpg"),this.createImages(this.model.id,this._imageUrls,t)}.bind(this)}))},createImages:function(t,e,i){var n=new Pokevisit.Models.Image,s={image:{listing_id:t,url:e.shift()}};n.set(s),n.save({},{success:function(){e.length>0?(this.model.images().add(n),this.createImages(t,e,i)):i(t)}.bind(this)})},paramsCompleted:function(){var t=this._params.listing;for(key in t)if(!t[key])return!1;return!0},attachDatepicker:function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),i=this.$("#date-avail-new").datepicker({onRender:function(t){return t.valueOf()<e.valueOf()?"disabled":""}}).on("changeDate",function(t){if(this._params.listing.date_avail=t.date,this.convertButton(),t.date.valueOf()>n.date.valueOf()){var e=new Date(t.date);e.setDate(e.getDate()+1),n.setValue(e),this._params.listing.date_end=e,this.convertButton()}i.hide(),this.$("#date-end-new")[0].focus()}.bind(this)).data("datepicker"),n=this.$("#date-end-new").datepicker({onRender:function(t){return t.valueOf()<=i.date.valueOf()?"disabled":""}}).on("changeDate",function(t){n.hide(),this._params.listing.date_end=t.date,this.convertButton()}.bind(this)).data("datepicker")},attachAutocomplete:function(){var t=this.$("#address-search").get(0);this._autoComplete=new google.maps.places.Autocomplete(t),google.maps.event.addListener(this._autoComplete,"place_changed",function(){var t=this._autoComplete.getPlace();this._params.listing.address=t.formatted_address,this.convertButton()}.bind(this))},selectPictures:function(){filepicker.pickMultiple(function(t){_.each(t,function(t){this._imageUrls.push(t.url),this.$("div.img-preview").append(t.url+", ")}.bind(this))}.bind(this))},render:function(){this.setFilepicker();var t=this.template();return this.$el.html(t),setTimeout(function(){this.$("#select-accomodates-option").selectpicker(),this.attachDatepicker(),this.attachAutocomplete()}.bind(this),0),this}}),Pokevisit.Views.ListingRequest=Backbone.CompositeView.extend({template:JST["listings/request"],events:{"click button.book-button":"createReservation"},initialize:function(){this.listenTo(this.model,"sync",this.render),this._checkIn=void 0,this._checkOut=void 0},attachDate:function(){this.reservations=this.model.reservations(),this.unavailableDayRanges=[],this.reservations.each(function(t){"APPROVED"==t.escape("status")&&this.unavailableDayRanges.push([new Date(t.get("start_date")),new Date(t.get("end_date"))])}.bind(this));var t=new Date,e=(new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),this.model),i=this.unavailableDayRanges,n=this.$("#check-in-select").datepicker({onRender:function(t){return dateFlag="",_.each(i,function(e){t>=e[0]&&t<=e[1]&&(dateFlag="disabled")}),"disabled"===dateFlag?dateFlag:t.valueOf()<new Date(e.escape("date_avail")).valueOf()||t.valueOf()>new Date(e.escape("date_end"))?"disabled":""}}).on("changeDate",function(t){if(this._checkIn=t.date,t.date.valueOf()>s.date.valueOf()){var e=new Date(t.date);e.setDate(e.getDate()+1),s.setValue(e),this._checkOut=e}n.hide(),this.$("#check-out-select")[0].focus()}.bind(this)).data("datepicker");this.$("#check-in-select").datepicker("setValue",new Date(e.escape("date_avail"))),this._checkIn=new Date(e.escape("date_avail"));var s=this.$("#check-out-select").datepicker({onRender:function(t){return dateFlag="",_.each(i,function(e){t>=e[0]&&t<=e[1]&&(dateFlag="disabled")}),"disabled"===dateFlag?dateFlag:t.valueOf()>new Date(e.escape("date_end").valueOf())||t.valueOf()<new Date(e.escape("date_avail")).valueOf()?"disabled":""}.bind(this)}).on("changeDate",function(t){s.hide(),this._checkOut=t.date}.bind(this)).data("datepicker"),r=new Date(e.escape("date_avail"));r.setDate(r.getDate()+1),this.$("#check-out-select").datepicker("setValue",r),this._checkOut=r},attachSelect:function(){this.$("#select-accomodates").selectpicker()},createReservation:function(t){t.preventDefault();$(t.currentTarget);if(this._checkIn&&this._checkOut){var e=this.$("#select-accomodates").val(),i={reservation:{listing_id:this.model.id,start_date:this._checkIn,end_date:this._checkOut,guests:e}},n=new Pokevisit.Models.Reservation;n.set(i),n.save({},{success:function(){Pokevisit.yourPendingReservations.add(n),this.changeButtonSuccessCSS()}.bind(this),error:function(){this.changeButtonErrorCSS()}.bind(this)})}},changeButtonSuccessCSS:function(){this.$("button.book-button").html("Successful Reservation"),this.$("button.book-button").css("background","#007a87"),this.$("button.book-button").css("border-color","#007a87"),this.$("button.book-button").css("border-bottom-color","#004f58"),this.$("button.book-button").attr("disabled","disabled")},changeButtonErrorCSS:function(){this.$("button.book-button").html("Check Your Dates!"),this.$("button.book-button").css("background","#f39c12"),this.$("button.book-button").css("border-color","#f39c12"),this.$("button.book-button").css("border-bottom-color","#f39c12")},render:function(){var t=this.template({listing:this.model});return this.$el.html(t),setTimeout(function(){this.model.get("user_id")&&this.attachDate(),this.attachSelect()}.bind(this),0),this}}),Pokevisit.Views.ListingReview=Backbone.CompositeView.extend({template:JST["listings/review"],events:{"keyup textarea.new-listing-review-text":"updateText","click button#create-review":"createReview"},initialize:function(){this.reviewsSelector="div.listing-review-content",this.listenTo(this.model,"sync",this.render),this.listenTo(this.model.reviews(),"add",this.addView),this.listenTo(this.model.reviews(),"remove",this.removeView),this.model.reviews().each(function(t){this.addView(t)}.bind(this)),this._reviewParams={review:{listing_id:this.model.id,review_text:null,rating:null}}},createReview:function(t){t.preventDefault();var e=new Pokevisit.Models.Review;e.set(this._reviewParams),e.save({},{success:function(){this.model.reviews().add(e),this.updatePointsClientSide(),this.$("textarea.new-listing-review-text").html(""),this.$("#create-review").attr("disabled",!0),this.$("div.no-review").remove(),0===this.$("div.yes-review").length&&(this.$("div.current-review-pts").prepend('<div class="yes-review-text">Current Rating: </div><div class="yes-review"></div>'),setTimeout(function(){this.$("div.yes-review").raty({score:e.get("rating")})}.bind(this),0)),$("html, body").animate({scrollTop:$(document).height()-$(window).height()},1400)}.bind(this)})},updatePointsClientSide:function(){var t=0;this.model.reviews().each(function(e){t+=e.get("rating")}),this.$("div.yes-review").raty({score:t/this.model.reviews().length})},addView:function(t){var e=new Pokevisit.Views.ListingReviewItem({model:t});this.addSubview(this.reviewsSelector,e)},removeView:function(t){_.each(this.subviews(this.reviewsSelector),function(e){e.model.id===t.id&&this.removeSubview(e)}.bind(this))},attachRating:function(){this.$("#new-listing-rating").raty({half:!0,click:function(t){this._reviewParams.review.rating=t+1,this.updateButton()}.bind(this)})},updateButton:function(){var t=this.$("#create-review");this._reviewParams.review.listing_id&&this._reviewParams.review.rating&&this._reviewParams.review.review_text&&this._reviewParams.review.review_text.length>0?(t.removeAttr("disabled"),t.html("Add Review")):(t.attr("disabled",!0),t.html("Please rate/write before submitting"))},updateText:function(t){this._reviewParams.review.review_text=$(t.currentTarget).val(),this.updateButton()},attachListingRating:function(){this.$("div.yes-review").raty({score:this.model.get("avg_rating"),readOnly:!0})},render:function(){var t=this.template({listing:this.model});return this.$el.html(t),this.attachSubviews(),setTimeout(function(){this.attachRating(),this.attachListingRating()}.bind(this),0),this}}),Pokevisit.Views.ListingReviewItem=Backbone.CompositeView.extend({template:JST["listings/review_item"],className:"review-item row",initialize:function(){this.listenTo(Pokevisit.allUsers,"sync",this.render)},render:function(){var t=Pokevisit.allUsers.findWhere({id:this.model.get("user_id")}),e=["January","February","March","April","May","June","July","August","September","October","November","December"],i=this.template({review:this.model,months:e,user:t});return this.$el.html(i),this}}),Pokevisit.Views.ListingShow=Backbone.CompositeView.extend({template:JST["listings/show"],initialize:function(){this.listenTo(this.model,"sync",this.render),this.summarySelector="div.show-summary",this.requestSelector="div.show-request",this.aboutSelector="div.show-about",this.reviewSelector="div.show-review";var t=new Pokevisit.Views.ListingSummary({collection:Pokevisit.allUsers,model:this.model});this.addSubview(this.summarySelector,t);var e=new Pokevisit.Views.ListingRequest({model:this.model});this.addSubview(this.requestSelector,e);var i=new Pokevisit.Views.ListingAbout({model:this.model});this.addSubview(this.aboutSelector,i);var n=new Pokevisit.Views.ListingReview({model:this.model});this.addSubview(this.reviewSelector,n),$(window).scroll(function(){var t=$("body").scrollTop();t>513?(this.$("div.pricing").addClass("fixed-pricing"),this.$("div.show-request").addClass("fixed-request")):(this.$("div.pricing").removeClass("fixed-pricing"),this.$("div.show-request").removeClass("fixed-request"))})},render:function(){if($("div.pricing").hasClass("fixed-pricing"))var t=!0;var e=this.template({listing:this.model,images:this.model.images(),addFixed:t});return this.$el.html(e),this.attachSubviews(),this.model.get("user_id")===Pokevisit.currentUserId&&this.$("div.show-about").css("min-height","1400px"),setTimeout(function(){this.$("div.carousel-inner").magnificPopup({delegate:"div.item",type:"image",gallery:{enabled:!0}})},0),this}}),Pokevisit.Views.ListingSideBar=Backbone.CompositeView.extend({template:JST["listings/sidebar"],initialize:function(){this.sidebarSelector="div.sidebar";var t=new Pokevisit.Views.DateFilter;this.addSubview(this.sidebarSelector,t);var e=new Pokevisit.Views.RoomFilter;this.addSubview(this.sidebarSelector,e);var i=new Pokevisit.Views.PriceFilter;this.addSubview(this.sidebarSelector,i);var n=new Pokevisit.Views.ListingIndex({collection:Pokevisit.filteredListings});this.addSubview(this.sidebarSelector,n)},render:function(){var t=this.template();return this.$el.html(t),this.attachSubviews(),this}}),Pokevisit.Views.ListingSummary=Backbone.CompositeView.extend({template:JST["listings/summary"],className:"listing-summary",initialize:function(){this.listenTo(this.collection,"sync",this.render),this.listenTo(this.model,"sync",this.render)},render:function(){var t=this.collection.findWhere({id:this.model.get("user_id")}),e=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=this.template({listing:this.model,user:t,months:e,weekDay:i});return this.$el.html(n),this}}),Pokevisit.Views.YourListings=Backbone.CompositeView.extend({template:JST["listings/your_listings"],initialize:function(){this.listingItemsSelector="div.your-listings",this.listenTo(this.collection,"add",this.addView),this.listenTo(this.collection,"remove",this.removeView),this.collection.each(function(t){this.addView(t)}.bind(this))},addView:function(t){var e=new Pokevisit.Views.YourListingsItem({model:t});this.addSubview(this.listingItemsSelector,e)},attachSubview:function(t,e){this.$(this.listingItemsSelector).masonry(),this.$(t).append(e.$el).masonry("appended",e.$el),e.delegateEvents(),e.attachSubviews&&e.attachSubviews()},removeView:function(t){_.each(this.subviews(this.listingItemsSelector),function(e){e.model.id===t.id&&this.removeSubview(e)}.bind(this))},render:function(){var t=this.template();return this.$el.html(t),this.attachSubviews(),this.$(this.listingItemsSelector).masonry(),this}}),Pokevisit.Views.YourListingsItem=Backbone.CompositeView.extend({template:JST["listings/your_listings_item"],className:function(){var t="your-listing-item ",e=Math.random();return t+=.4>e?"item":.8>e?"itemw2":"itemw3"},initialize:function(){this.listenTo(this.model,"sync",this.render)},events:{"click button.edit-listing":"showListing","click button.show-reservations":"showListingReservations"},showListing:function(t){t.preventDefault(),Backbone.history.navigate("#/listings/"+this.model.id,{trigger:!0})},showListingReservations:function(t){t.preventDefault(),Backbone.history.navigate("#/listings/"+this.model.id+"/reservations",{trigger:!0})},render:function(){var t=this.model.images().models[0];t||this.model.fetch();var e=this.template({listing:this.model,image:t});return this.$el.html(e),this.$(".flipbook").flip({axis:"x",trigger:"hover"}),setTimeout(function(){$("div.flip").css("width","100%"),$("div.flip").css("height","100%"),$("#listing-container").imagesLoaded(function(){$("#listing-container").masonry({columnWidth:0,itemSelector:".item"})})},0),this}}),Pokevisit.Views.MainView=Backbone.CompositeView.extend({template:JST["main/main"],initialize:function(){this.mainSelector="div.main";var t=new Pokevisit.Views.ListingSideBar;this.addSubview(this.mainSelector,t);var e=new Pokevisit.Views.Map;this.addSubview(this.mainSelector,e)},render:function(){var t=this.template();return this.$el.html(t),this.attachSubviews(),this}}),Pokevisit.Views.Map=Backbone.CompositeView.extend({template:JST["maps/map"],initialize:function(){this.mapViewSelector=".map-view";var t=new Pokevisit.Views.MapMain;this.addSubview(this.mapViewSelector,t)},render:function(){var t=this.template();return this.$el.html(t),this.attachSubviews(),setTimeout(function(){google.maps.event.trigger(window.pokevisitMap,"resize")},0),this}}),Pokevisit.Views.MapMain=Backbone.CompositeView.extend({attributes:{id:"map-canvas"},initialize:function(){this._mapOptions={center:{lat:37.726666666,lng:-122.395555555},minZoom:5,zoom:10},window.pokevisitMap=this._map=new google.maps.Map(this.el,this._mapOptions),window.pokevisitMapInfo=new google.maps.InfoWindow;var t=document.getElementById("form-search");$(t).keydown(function(t){13==t.which&&t.preventDefault()}),window.pokevisitAutocomplete=this._autocomplete=new google.maps.places.Autocomplete(t),this._autocomplete.bindTo("bounds",this._map),google.maps.event.addListener(this._map,"bounds_changed",function(){this.handleMapMove()}.bind(this)),google.maps.event.addListener(this._autocomplete,"place_changed",function(){this.handlePlaceChange()}.bind(this))},handlePlaceChange:function(){var t=this._autocomplete.getPlace();t.geometry&&(t.geometry.viewport?this._map.fitBounds(t.geometry.viewport):(this._map.setCenter(t.geometry.location),this._map.setZoom(17)))},handleMapMove:function(){var t=this._map.getBounds();latRange=[t.Fa.k,t.Fa.j],lngRange=[t.wa.j,t.wa.k],Pokevisit.filteredListings.trigger("filterResult",{filter:"location",data:function(t){return t.get("lat")>=latRange[0]&&t.get("lat")<=latRange[1]&&t.get("lng")>=lngRange[0]&&t.get("lng")<=lngRange[1]?!0:!1}})},render:function(){return this}}),Pokevisit.Views.ListingReservationIndex=Backbone.CompositeView.extend({template:JST["reservations/listing_reservations"],events:{"click button.approve-reservation":"approveReservation","click button.deny-reservation":"denyReservation"},initialize:function(){this.listingReservationsSelector="div.listing-reservations",this.listenTo(this.collection,"add",this.addView),this.listenTo(this.collection,"remove",this.removeView),this.listenTo(this.model,"sync",this.render),this.collection.each(function(t){"PENDING"===t.get("status")&&this.addView(t)}.bind(this))},approveReservation:function(t){t.preventDefault();var e,i=$(t.currentTarget).data("reservation");_.each(this.subviews(this.listingReservationsSelector),function(t){t.model.id===i&&(e=t)}),$.ajax({url:"/reservations/"+i+"/approve",type:"GET",dataType:"json",success:function(){e.$el.fadeOut(1e3,_.bind(e.remove,e)),this.model.fetch({success:function(){this.updateReservationViews(e)}.bind(this)})}.bind(this)})},denyReservation:function(t){t.preventDefault();var e,i=$(t.currentTarget).data("reservation");_.each(this.subviews(this.listingReservationsSelector),function(t){t.model.id===i&&(e=t)}),$.ajax({url:"/reservations/"+i+"/deny",type:"GET",dataType:"json",success:function(){e.$el.fadeOut(1e3,_.bind(e.remove,e)),this.model.fetch()}.bind(this)})},updateReservationViews:function(t){_.each(this.subviews(this.listingReservationsSelector),function(e){var e=e;e.model.id!==t.model.id&&"PENDING"!=e.model.get("status")&&e.$el.fadeOut(1e3,_.bind(e.remove,e))}.bind(this))},addView:function(t){if("PENDING"===t.get("status")){var e=new Pokevisit.Views.ListingReservationIndexItem({model:t});this.addSubview(this.listingReservationsSelector,e)}},removeView:function(t){_.each(this.subviews(this.listingReservationsSelector),function(e){e.model.id===t.id&&this.removeSubview(e)}.bind(this))},render:function(){var t=this.template({listing:this.model});return this.$el.html(t),this.attachSubviews(),this}}),Pokevisit.Views.ListingReservationIndexItem=Backbone.CompositeView.extend({template:JST["reservations/listing_reservations_item"],className:"listing-reservation-item",render:function(){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=Pokevisit.allUsers.findWhere({id:this.model.get("user_id")}),n=this.template({reservation:this.model,user:i,months:t,weekDay:e});return this.$el.html(n),this}}),Pokevisit.Views.ReservationIndex=Backbone.CompositeView.extend({template:JST["reservations/index"],initialize:function(){this.reservationItemsSelector="div.reservations-index",this.listenTo(this.collection,"add",this.addView),this.listenTo(this.collection,"remove",this.removeView),this.collection.each(function(t){this.addView(t)
}.bind(this))},addView:function(t){var e=new Pokevisit.Views.ReservationIndexItem({model:t});this.addSubview(this.reservationItemsSelector,e)},removeView:function(t){_.each(this.subviews(this.reservationItemsSelector),function(e){e.model.id===t.id&&this.removeSubview(e)}.bind(this))},render:function(){var t=this.template();return this.$el.html(t),this.attachSubviews(),this}}),Pokevisit.Views.ReservationIndexItem=Backbone.CompositeView.extend({template:JST["reservations/index_item"],className:"reservation-index-item",events:{"click .reservation-image img":"redirectToListingPage"},initialize:function(){this.listing=Pokevisit.listings.getOrFetch(this.model.get("listing_id")),this.listenTo(this.listing,"sync",this.render),this.listenTo(this.model,"change:status",this.render),this.listenTo(Pokevisit.allUsers,"sync",this.render)},redirectToListingPage:function(){Backbone.history.navigate("#/listings/"+this.listing.id,{trigger:!0})},render:function(){var t=Pokevisit.allUsers.findWhere({id:this.listing.get("user_id")});if(!this.listing.get("user_id"))return this;var e;"APPROVED"===this.model.get("status")?e="approved":"DENIED"===this.model.get("status")?e="denied":"PENDING"===this.model.get("status")&&(e="pending");var i=this.template({reservation:this.model,status:e,listing:this.listing,img:this.listing.images().models[0],user:t});return this.$el.html(i),this}}),Pokevisit.Views.User=Backbone.CompositeView.extend({template:JST["users/user"],className:"user-profile-view",initialize:function(){this.setFilepicker(),this.listenTo(Pokevisit.allUsers,"sync",this.render)},events:{"click h1.change-profile-picture":"uploadPicture","click img.profile-picture-pic":"uploadPicture","click button#create-pikachus":"createPikachu"},setFilepicker:function(){filepicker&&filepicker.setKey("AJXpnUispSeOzkYcpSa8Kz")},uploadPicture:function(){filepicker.pick(function(t){this.user.set({image_url:t.url}),this.user.save({},{success:function(){$("img.header-img").attr("src",this.user.get("image_url")),this.$("img.profile-picture-pic").attr("src",this.user.get("image_url"))}.bind(this)})}.bind(this))},createPikachu:function(){var t=($("#sprite-container").width(),$("#sprite-container").height(),_.random(100,900)),e=_.random(0,140),i=new Kinetic.Sprite(this._pikaOptions(t,e));this._layer.add(i),i.start(),i.on("click",function(){var t=["run","idle","thundershock","rolling"],e=t[_.random(0,t.length-1)];i.animation(e)})},sprite:function(){var t=$("#sprite-container").width(),e=$("#sprite-container").height();this._stage=new Kinetic.Stage({container:"sprite-container",width:t,height:e}),this._layer=new Kinetic.Layer,this._imageObj=new Image,this._imageObj.onload=function(){this._pikaOptions=function(t,e){return{x:t,y:e,image:this._imageObj,animation:"idle",animations:{idle:[8,29,41,44,49,29,34,42,87,29,34,41,124,29,33,42],run:[6,161,51,32,61,167,54,25,119,163,52,28,178,166,51,24],thundershock:[17,286,40,38,65,286,40,38,116,276,33,56,317,193,36,45],rolling:[12,420,30,44,48,425,44,30,100,415,30,43,134,423,43,30]},frameRate:5,frameIndex:0,draggable:!0}}}.bind(this),this._stage.add(this._layer),this._imageObj.src="/assets/pikachu_big_sprite2.png"},render:function(){this.setFilepicker(),this.user=Pokevisit.allUsers.findWhere({id:Pokevisit.currentUserId});var t=this.template({user:this.user});return this.$el.html(t),setTimeout(function(){this.$(".tooltip").tooltipster(),this.$("#create-pikachus").tooltipster(),this.sprite()}.bind(this),0),this}}),Pokevisit.Routers.AppRouter=Backbone.Router.extend({routes:{"checkin=:checkin&checkout=:checkout&lat=:lat&lng=:lng&guests=:guests":"main","":"main",own_listings:"indexYourListings",reservations:"showReservations","listings/new":"new","listings/:id/reservations":"reservationIndex","edit-profile":"editUserProfile","listings/:id":"show"},initialize:function(t){this.$rootEl=t.$rootEl,Pokevisit.allUsers.fetch({success:function(){$("img.header-img").attr("src",Pokevisit.allUsers.findWhere({id:Pokevisit.currentUserId}).get("image_url")),this.adjustHeaderDropDownWidth()}.bind(this)})},main:function(t,e,i,n,s){window.initialQueryParams={checkin:t,checkout:e,lat:i,lng:n,guests:s};var r=new Pokevisit.Views.MainView;this._swapView(r)},"new":function(){this.setUpAutoComplete();var t=new Pokevisit.Models.Listing,e=new Pokevisit.Views.ListingNew({model:t});this._swapView(e)},editUserProfile:function(){this.setUpAutoComplete();var t=new Pokevisit.Views.User;this._swapView(t)},showReservations:function(){this.setUpAutoComplete();var t=new Pokevisit.Views.ReservationIndex({collection:Pokevisit.yourPendingReservations});Pokevisit.yourPendingReservations.fetch(),this._swapView(t)},show:function(t){this.setUpAutoComplete();var e=Pokevisit.listings.getOrFetch(t),i=new Pokevisit.Views.ListingShow({model:e});this._swapView(i)},indexYourListings:function(){this.setUpAutoComplete();var t=new Pokevisit.Views.YourListings({collection:Pokevisit.ownListings});Pokevisit.ownListings.fetch(),this._swapView(t)},reservationIndex:function(t){this.setUpAutoComplete();var e=Pokevisit.ownListings.getOrFetch(t);if(Pokevisit.currentUserId==e.get("user_id")){var i=new Pokevisit.Views.ListingReservationIndex({model:e,collection:e.reservations()});this._swapView(i)}},_swapView:function(t){this._currentView&&this._currentView.remove(),this._currentView=t,this.$rootEl.html(this._currentView.render().$el)},setUpAutoComplete:function(){var t=document.getElementById("form-search");$(t).keydown(function(t){13==t.which&&t.preventDefault()}),this._autocomplete=new google.maps.places.Autocomplete(t),google.maps.event.addListener(this._autocomplete,"place_changed",function(){this.handlePlaceChange()}.bind(this))},handlePlaceChange:function(){var t=this._autocomplete.getPlace();if(t.geometry){var e=t.geometry.location.lat(),i=t.geometry.location.lng();Backbone.history.navigate("#/checkin=null&checkout=null&lat="+e+"&lng="+i+"&guests=1",{trigger:!0})}},adjustHeaderDropDownWidth:function(){var t=$("a.dropdown-toggle").css("width");$("ul.dropdown-menu").css("width",t)}});